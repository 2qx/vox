{
  "contractName": "BlockPoints",
  "constructorInputs": [],
  "abi": [
    {
      "name": "release",
      "inputs": [
        {
          "name": "age",
          "type": "int"
        }
      ]
    }
  ],
  "bytecode": "0065cd1d OP_OVER OP_GREATERTHANOREQUAL OP_VERIFY OP_0 OP_INPUTSEQUENCENUMBER OP_OVER OP_GREATERTHANOREQUAL OP_VERIFY OP_DUP OP_CHECKSEQUENCEVERIFY OP_DROP OP_INPUTINDEX OP_OUTPUTTOKENAMOUNT OP_INPUTINDEX OP_UTXOTOKENAMOUNT OP_ROT OP_0 OP_UTXOVALUE OP_MUL 00e1f505 OP_DIV OP_SUB OP_GREATERTHANOREQUAL OP_VERIFY OP_INPUTINDEX OP_1ADD OP_TXINPUTCOUNT OP_NUMEQUAL",
  "source": "contract BlockPoints() {\n\n    function release(int age) {\n\n        // Force a block based relative timelock\n        // 0065cd1d OP_OVER OP_GREATERTHANOREQUAL OP_VERIFY\n        require(500000000 >= age);\n\n        // Ensure the first input exceeds the age claimed\n        // OP_0 OP_INPUTSEQUENCENUMBER OP_OVER OP_GREATERTHANOREQUAL OP_VERIFY\n        require(tx.inputs[0].sequenceNumber >= age);\n        \n        // Require the token vault thread to exceed the age claimed\n        // OP_DUP OP_CHECKSEQUENCEVERIFY OP_DROP\n        require(this.age >= age);\n\n        // Allow anyone to withdraw a token amount proportional to the value of their aged utxo.\n        // Note: to convert block satoshis to coindays: 144 * 100_000_000 \n        // \n        // OP_INPUTINDEX OP_OUTPUTTOKENAMOUNT \n        // OP_INPUTINDEX OP_UTXOTOKENAMOUNT \n        // OP_ROT OP_0 OP_UTXOVALUE OP_MUL 00904e5a03 OP_DIV OP_SUB OP_GREATERTHANOREQUAL\n        require(\n            tx.outputs[this.activeInputIndex].tokenAmount >= \n            tx.inputs[this.activeInputIndex].tokenAmount - \n            (age * tx.inputs[0].value/100000000)\n        );\n\n        // This thread must be in the last input position\n        // to prevent users building transactions with multiple airdrop threads. \n        //\n        // OP_INPUTINDEX OP_1ADD OP_TXINPUTCOUNT OP_NUMEQUAL\n        require(this.activeInputIndex+1 == tx.inputs.length);\n    }\n}",
  "debug": {
    "bytecode": "040065cd1d78a26900cb78a26976b275c0d3c0d07b00c6950400e1f5059694a269c08bc39c",
    "sourceMap": "7:16:7:25;:29::32;:16:::1;:8::34;11:26:11:27:0;:16::43:1;:47::50:0;:16:::1;:8::52;15:28:15:31:0;:8::33:1;;24:23:24:44:0;:12::57:1;25:22:25:43:0;:12::56:1;26:13:26:16:0;:29::30;:19::37:1;:13;:38::47:0;:13:::1;25:12::48;24;23:8:27:10;33:16:33:37:0;:::39:1;:43::59:0;:16:::1",
    "logs": [],
    "requires": [
      {
        "ip": 3,
        "line": 7
      },
      {
        "ip": 8,
        "line": 11
      },
      {
        "ip": 10,
        "line": 15
      },
      {
        "ip": 24,
        "line": 23
      },
      {
        "ip": 29,
        "line": 33
      }
    ]
  },
  "compiler": {
    "name": "cashc",
    "version": "0.11.0-next.4"
  },
  "updatedAt": "2025-05-23T02:03:14.559Z"
}
