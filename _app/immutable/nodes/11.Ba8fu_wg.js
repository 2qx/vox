import{f as b,a as i,c as D,t as st}from"../chunks/DTc5U4eY.js";import{o as Le}from"../chunks/_R59KZhj.js";import{c as r,r as a,f as z,s,t as L,p as Me,ao as Et,aB as x,a as Fe,ak as v,ay as Kt,aA as rt,I as t,af as He}from"../chunks/CQU5mOuk.js";import{h as Ee,s as _}from"../chunks/CF3aPdyL.js";import{i as f}from"../chunks/CZ0rTjPC.js";import{e as gt,i as mt}from"../chunks/CbL2L94E.js";import{s as I}from"../chunks/-rOGAMhN.js";import{p as Ne,s as Pe}from"../chunks/DBDCTY7c.js";import{p as Ae}from"../chunks/BtG5M0Gx.js";import{I as Ue,B as $e,W as Ie,T as Ve,g as je}from"../chunks/BTBIn4-B.js";import{$ as De,a as Gt}from"../chunks/BDt1pbpk.js";import{B as Oe,t as We}from"../chunks/B2Xzehbr.js";import{U as Re,L as Nt,F as qe}from"../chunks/DUN7heMW.js";import{F as Pt}from"../chunks/AE0-DbwT.js";import{j as Ke,d as Ge,s as Qt,n as Qe,b as Je,k as Xe,l as Ye}from"../chunks/BQUio51k.js";import{V as G,T as Ze,b as ta,c as ea,g as At}from"../chunks/Bt3MikUi.js";const aa=!0,sa=({params:ot,url:S})=>({time:S.searchParams.get("time")}),Aa=Object.freeze(Object.defineProperty({__proto__:null,load:sa,prerender:aa},Symbol.toStringTag,{value:"Module"}));var ra=b('<a target="_blank" class="svelte-50yui7">salemkode</a> <a target="_blank" class="svelte-50yui7">bch.ninja</a>',1),oa=b('<a target="_blank" class="svelte-50yui7">bch.ninja</a> <a target="_blank" class="svelte-50yui7">chaingraph.cash</a> <a target="_blank" class="svelte-50yui7">imaginary.cash</a>',1),na=b('<div class="svelte-50yui7"><!></div>');function Jt(ot,S){let n=Ne(S,"isMainnet",3,!0);var u=na(),nt=r(u);{var M=h=>{var Q=D(),ht=z(Q);{var it=F=>{var H=ra(),g=z(H),O=s(g,2);L(()=>{I(g,"href",`https://explorer.salemkode.com/address/${S.address??""}`),I(O,"href",`https://explorer.bch.ninja/address/${S.address??""}`)}),i(F,H)},lt=F=>{var H=oa(),g=z(H),O=s(g,2),J=s(O,2);L(()=>{I(g,"href",`https://chipnet.bch.ninja/address/${S.address??""}`),I(O,"href",`https://chipnet.chaingraph.cash/address/${S.address??""}`),I(J,"href",`https://chipnet.imaginary.cash/address/${S.address??""}`)}),i(F,H)};f(ht,F=>{n()?F(it):F(lt,!1)})}i(h,Q)};f(nt,h=>{S.address&&h(M)})}a(u),i(ot,u)}var ia=b('<meta name="description" content="Future Vault Series"/> <link rel="icon" type="image/svg"/>',1),la=b('<meta name="description" content="Future Vault Series"/> <link rel="icon" type="image/svg" href="/FBCH.svg"/>',1),ca=b('<h2 class="svelte-styg3z"> <sub>■</sub></h2>'),va=b('<p class="svelte-styg3z"><b><!></b></p>'),da=b('<p class="svelte-styg3z">no coupons available</p>'),ua=b('<div style="text-align:center"><h2 class="svelte-styg3z">loading coupons</h2> <!></div>'),pa=b("<li>C<sub> </sub> <!><br/></li>"),ga=b('<tr class="svelte-styg3z"><td class="svelte-styg3z"><i> </i></td><td class="r svelte-styg3z"> <img width="15" alt="bchLogo"/></td><td class="r svelte-styg3z"><i><!></i> <!></td></tr>'),ma=b('<table class="couponTable svelte-styg3z"><thead class="svelte-styg3z"><tr class="header svelte-styg3z"><td class="svelte-styg3z">category</td><td class="svelte-styg3z"> </td><td class="svelte-styg3z"> </td></tr></thead><tbody class="svelte-styg3z"></tbody><tfoot><tr><td></td><td class="r svelte-styg3z"> <img width="15" alt="bchLogo"/></td><td class="r svelte-styg3z"> <!></td></tr></tfoot></table>'),ha=b('<p class="svelte-styg3z">loading threads</p> <!>',1),_a=b(`<div style="display:flex; flex-direction:column; align-items:flex-end;"><h1 class="svelte-styg3z"> <sub>■</sub></h1> <!></div> <!> <p class="svelte-styg3z"> </p> <div style="display:flex;"><!></div> <h4>Spot Coupons</h4> <p class="svelte-styg3z">Coupons discount placement of <i>P</i> </p> <!> <h4>Coupon Contracts</h4> <ul class="couponList svelte-styg3z"></ul> <h4>Vault Threads</h4> <div style="display:flex"><!></div> <p class="svelte-styg3z">Seven (7) unspent transaction outputs control swapping of coins and tokens on a 1:1 basis
				with the vault unlocking script.</p> <p class="cashaddr svelte-styg3z">Category/pre-genesis: <a target="_blank"> </a></p> <!> <hr/> <p style="font-size:small" class="svelte-styg3z"><i>sats (satoshis)</i>: one 100,000,000<sup>th</sup> of a whole coin.<br/> <i>spb</i>: rate in sats per coin per block of time remaining to maturation.<br/> <i>coupon rate per annum</i>: effective non-compounding rate of annual return.<br/> Note: approximate rates assume 870 sats network transaction fees (550 swap, 320 redeem)―paid
				to miners.</p>`,1),fa=b('<div style="text-align:center"><h2 class="svelte-styg3z">loading</h2> <!></div>'),ba=b('<section><div class="text-column"><!></div></section>');function Ua(ot,S){Me(S,!0);let n=Et(Number(S.data.time)),u=x(0),nt=x(""),M=x(void 0),h,Q=x(""),ht=G.getScriptHash(n),it=x(""),lt=x(""),F,H=x(void 0);const g=Ae.url.hostname=="vox.cash",O=g?"bitcoincash":"bchtest",J=g?"BCH":"tBCH",_t=g?"FBCH":"tFBCH",Xt=g?"bch.imaginary.cash":"chipnet.bch.ninja",Ut=g?Oe:We,Yt=g?"explorer.bch.ninja":"chipnet.bch.ninja",X=g?Ze:ta;let K=x(Et([])),Y=x([]),ct=x(Et([])),Z=new Map([]),Zt=x(0),te=x(0),tt,ft=x(0),$t=x(0),It=x(0n),ee=G.getAddress(n,O);const ae=async function(){let e=await h.request("blockchain.scripthash.listunspent",ht,"include_tokens");if(e instanceof Error)throw e;v(K,e.filter(o=>o.token_data?.category==X.get(n)),!0),v($t,Qt(t(K),!0),!0),v(It,Qe(t(K),X.get(n)),!0)};async function Vt(){h&&t(u)>1e3&&v(M,await G.getAllCouponUtxos(h,t(u),[n]),!0),t(M)&&(v(H,Map.groupBy(t(M),({locktime:e,placement:o,value:w})=>`${e}-${o}-${w}`),!0),t(M).sort((e,o)=>parseFloat(o.spb)-parseFloat(e.spb)),v(Zt,Number(t(M).reduce((e,o)=>e+o.placement,0)/1e8),!0),v(te,Number(t(M).reduce((e,o)=>e+o.value,0)),!0))}const vt=()=>{clearTimeout(F),F=setTimeout(()=>{jt(),Vt()},1e3)},se=async()=>{clearTimeout(F),F=setTimeout(async()=>{for(;t(ct).length;){let e=t(ct).shift();try{await oe(e),await Ye(100),console.log("broadcast"),vt()}catch(o){console.error(o),v(ct,[],!0),v(Y,[]),Z=new Map([]),vt()}}},500)};async function re(e){Z.has(e.locktime)||Z.set(e.locktime,await h.request("blockchain.scripthash.listunspent",G.getScriptHash(e.locktime),"include_tokens"));let o=Z.get(e.locktime).filter(P=>P.token_data?.category==X.get(e.locktime)),w=G.swap(e.placement,o,t(Y),e.locktime,t(nt),e),W=Je(Xe(w.transaction));t(ct).push(W),se(),v(M,t(M)?.filter(P=>!(P.tx_hash==e.tx_hash&&P.tx_pos==e.tx_pos)),!0),v(H,Map.groupBy(t(M),({locktime:P,placement:A,value:V})=>`${P}-${A}-${V}`),!0),v(Y,w.walletUtxos),Z.set(e.locktime,w.contractUtxos)}const oe=async function(e){let o=await h.request("blockchain.transaction.broadcast",e);if(o instanceof Error)throw v(it,Gt[h.status],!0),o},jt=async function(){let e=await h.request("blockchain.scripthash.listunspent",t(Q),"include_tokens");if(e instanceof Error)throw e;v(Y,e.filter(o=>!o.token_data?.nft)),v(ft,Qt(t(Y),!0),!0)},ne=function(e){if(v(it,Gt[h.status],!0),e.method==="blockchain.headers.subscribe"){let o=e.params[0];v(u,o.height,!0),vt()}else e.method==="blockchain.scripthash.subscribe"?e.params[1]!==t(lt)&&(v(lt,e.params[1],!0),v(ft,0),vt()):console.log(e)};Le(async()=>{$e.StorageProvider=Ue,tt=g?await Ie.named("vox"):await Ve.named("vox"),v(nt,je(tt.mnemonic,tt.derivationPath.slice(0,-2),tt.isTestnet),!0);let e=Ke(tt.getDepositAddress());if(typeof e=="string")throw e;v(Q,Ge(e.bytecode),!0),h=new De(Re,"1.4.1",Xt),await h.connect(),h.on("notification",ne),await h.subscribe("blockchain.headers.subscribe"),ae(),Vt(),jt()});var bt=ba();Ee(e=>{var o=D(),w=z(o);{var W=A=>{var V=ia(),dt=s(z(V),2);L(()=>{Kt.title=`${_t}-${n/1e3}`,I(dt,"href",`/FBCH-${n}.svg`)}),i(A,V)},P=A=>{var V=la();rt(2),L(()=>Kt.title=_t),i(A,V)};f(w,A=>{n>1e3?A(W):A(P,!1)})}i(e,o)});var Dt=r(bt),ie=r(Dt);{var le=e=>{var o=_a(),w=z(o),W=r(w),P=r(W);rt(),a(W);var A=s(W,2);{var V=c=>{var l=D(),d=z(l);{var k=y=>{var m=ca(),p=r(m);rt(),a(m),L(C=>_(p,`T  -${C??""}`),[()=>(n-t(u)).toLocaleString()]),i(y,m)};f(d,y=>{n-t(u)>0&&y(k)})}i(c,l)};f(A,c=>{t(u)&&c(V)})}a(w);var dt=s(w,2);{var ve=c=>{var l=va(),d=r(l),k=r(d);{var y=p=>{var C=st();L(E=>_(C,`Unlocking around
							${E??""}`),[()=>At(t(u),n).toLocaleDateString()]),i(p,C)},m=(p,C)=>{{var E=T=>{var U=st();L((j,q)=>_(U,`Unlocks around
							${j??""}
							${q??""}`),[()=>At(t(u),n).toLocaleDateString(),()=>At(t(u),n).toLocaleTimeString()]),i(T,U)},R=(T,U)=>{{var j=N=>{var $=st("Redemptions are open");i(N,$)},q=N=>{var $=st("-");i(N,$)};f(T,N=>{n-t(u)<0?N(j):N(q,!1)},U)}};f(p,T=>{n-t(u)>=0?T(E):T(R,!1)},C)}};f(k,p=>{n-t(u)>=2e3?p(y):p(m,!1)})}a(d),a(l),i(c,l)};f(dt,c=>{t(u)&&c(ve)})}var yt=s(dt,2),de=r(yt);a(yt);var xt=s(yt,2),ue=r(xt);Pt(ue,{get time(){return n},size:75}),a(xt);var kt=s(xt,4),pe=s(r(kt),2);a(kt);var Ot=s(kt,2);{var ge=c=>{var l=D(),d=z(l);{var k=m=>{var p=D(),C=z(p);gt(C,17,()=>t(H).values(),mt,(E,R)=>{var T=D(),U=z(T);gt(U,17,()=>t(R),mt,(j,q,N)=>{var $=D(),Tt=z($);{var et=B=>{qe(B,Pe({handlePlacement:re},()=>t(q),{get isMainnet(){return g},get couponCount(){return t(R).length},get balance(){return t(ft)}}))};f(Tt,B=>{N==0&&B(et)})}i(j,$)}),i(E,T)}),i(m,p)},y=m=>{var p=da();i(m,p)};f(d,m=>{t(H).size>0?m(k):m(y,!1)})}i(c,l)},me=c=>{var l=ua(),d=s(r(l),2);Nt(d),a(l),i(c,l)};f(Ot,c=>{t(H)?c(ge):c(me,!1)})}var wt=s(Ot,4);gt(wt,21,()=>ea,mt,(c,l)=>{var d=pa(),k=s(r(d)),y=r(k,!0);a(k);var m=s(k),p=s(m);const C=He(()=>G.getCouponAddress(Math.pow(10,t(l))*1e8,n,O));Jt(p,{get address(){return t(C)},get isMainnet(){return g}}),rt(),a(d),L(E=>{_(y,t(l)),_(m,` ${E??""} BCH `)},[()=>Math.pow(10,t(l))]),i(c,d)}),a(wt);var zt=s(wt,4),he=r(zt);Jt(he,{get address(){return ee},get isMainnet(){return g}}),a(zt);var St=s(zt,4),Ct=s(r(St)),_e=r(Ct,!0);a(Ct),a(St);var fe=s(St,2);{var be=c=>{var l=ma(),d=r(l),k=r(d),y=s(r(k)),m=r(y,!0);a(y);var p=s(y),C=r(p);a(p),a(k),a(d);var E=s(d);gt(E,21,()=>t(K),mt,(et,B)=>{var ut=D(),xe=z(ut);{var ke=Bt=>{var Lt=ga(),Mt=r(Lt),Wt=r(Mt),we=r(Wt,!0);a(Wt),a(Mt);var Ft=s(Mt),Rt=r(Ft),ze=s(Rt);a(Ft);var qt=s(Ft),Ht=r(qt),Se=r(Ht);{var Ce=at=>{var pt=st();L(Be=>_(pt,Be),[()=>(Number(t(B).token_data.amount)/1e8).toLocaleString(void 0,{minimumFractionDigits:1})]),i(at,pt)};f(Se,at=>{t(B).token_data&&at(Ce)})}a(Ht);var Te=s(Ht,2);Pt(Te,{get time(){return n},size:15}),a(qt),a(Lt),L((at,pt)=>{_(we,at),_(Rt,`${pt??""} `),I(ze,"src",Ut)},[()=>t(B).token_data.category.substring(0,4)+"..."+t(B).token_data.category.slice(-2),()=>(Number(t(B).value)/1e8).toLocaleString(void 0,{minimumFractionDigits:1})]),i(Bt,Lt)};f(xe,Bt=>{t(B).token_data&&Bt(ke)})}i(et,ut)}),a(E);var R=s(E),T=r(R),U=s(r(T)),j=r(U),q=s(j);a(U);var N=s(U),$=r(N),Tt=s($);Pt(Tt,{get time(){return n},size:15}),a(N),a(T),a(R),a(l),L((et,B,ut)=>{_(m,J),_(C,`${_t}-${et??""}`),_(j,`${B??""} `),I(q,"src",Ut),_($,`${ut??""} `)},[()=>String(n).padStart(7,"0"),()=>(Number(t($t))/1e8).toLocaleString(void 0,{minimumFractionDigits:1}),()=>(Number(t(It))/1e8).toLocaleString(void 0,{minimumFractionDigits:1})]),i(c,l)},ye=c=>{var l=ha(),d=s(z(l),2);Nt(d),i(c,l)};f(fe,c=>{t(K)&&t(K).length?c(be):c(ye,!1)})}rt(4),L((c,l,d,k,y)=>{_(P,`Vault ${c??""}`),_(de,`Vault locking Bitcoin Cash (${J}) for CashTokens until opening redemptions after
				block ${l??""}―in
				${d??""} blocks.`),_(pe,` ${J} into the vault; limit one coupon per transaction.`),I(Ct,"href",k),_(_e,y)},[()=>n.toLocaleString(),()=>n.toLocaleString(),()=>(n-t(u)).toLocaleString(),()=>`https://${Yt}/tx/${X.get(n)}`,()=>X.get(n)]),i(e,o)},ce=e=>{var o=fa(),w=s(r(o),2);Nt(w),a(o),i(e,o)};f(ie,e=>{n?e(le):e(ce,!1)})}a(Dt),a(bt),i(ot,bt),Fe()}export{Ua as component,Aa as universal};
//# sourceMappingURL=11.Ba8fu_wg.js.map
