import{f as _,a as s,c as V,t as rt}from"../chunks/DIGK3fbx.js";import"../chunks/D2hU0Bvh.js";import{o as Dt}from"../chunks/gevkG0Tn.js";import{p as It,a as qt,s as i,c as a,C as st,n as ot,D as t,r as e,f as D,t as u,K as I,a0 as Lt}from"../chunks/D9HGzNEp.js";import{d as At,s as b}from"../chunks/DLwNFu-O.js";import{a as Bt}from"../chunks/Dk1kGLoU.js";import{i as x}from"../chunks/CKOgfgCC.js";import{e as nt,i as Ot}from"../chunks/Clu73D2-.js";import{a as H,s as K}from"../chunks/8RjDFi4k.js";import{s as Wt}from"../chunks/964CQeWy.js";import{i as Ht,p as Ct}from"../chunks/CJ_KPFzz.js";import{r as Ft}from"../chunks/B3x9nJtb.js";import{h as Mt}from"../chunks/DM0FqWsN.js";import{b as ct}from"../chunks/C4jED5RM.js";import{b as Nt}from"../chunks/B8sppVjI.js";import"../chunks/CQVT_UhJ.js";import{I as Pt,T as Ut,W as jt,B as zt,a as Rt}from"../chunks/BgdkrN9n.js";const Kt=!0,Ie=Object.freeze(Object.defineProperty({__proto__:null,prerender:Kt},Symbol.toStringTag,{value:"Module"}));var _t=Ft(()=>zt),$t=_('<qr-code><img width="30px" slot="icon"/></qr-code> <pre id="deposit" class="svelte-cu1t27"> </pre>',3),Et=_('<div class="svelte-cu1t27"><br/> <b> </b></div>'),Gt=(X,C)=>C(),Jt=(X,C)=>C(),Qt=_('<img height="64px"/>'),Vt=_('<img width="64px" alt="bchLogo"/>'),Xt=_('<tr class="svelte-cu1t27"><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"> </td></tr>'),Yt=_('<div class="walletHead svelte-cu1t27"><button class="svelte-cu1t27">Consolidate Tokens</button> <button class="svelte-cu1t27">Consolidate Sats</button></div> <h3>Unspent Outputs (coins)</h3> <table class="wallet svelte-cu1t27"><thead class="svelte-cu1t27"><tr class="header svelte-cu1t27"><td></td><td>Token</td><td>Fungible</td><td>NFT</td><td>Sats <img width="15" alt="bchLogo"/></td></tr></thead><tbody class="svelte-cu1t27"></tbody></table>',1),Zt=_("<p>no wallet utxos available</p>"),te=_("<p>loading wallet...</p>"),ee=_('<pre class="svelte-cu1t27"> </pre>'),ae=_('<pre class="svelte-cu1t27"> </pre>'),re=_('<pre class="svelte-cu1t27"> </pre>'),se=_('<!> <pre class="svelte-cu1t27"> </pre> <pre class="svelte-cu1t27"> </pre> <pre class="svelte-cu1t27"> </pre> <!> <pre class="svelte-cu1t27">   &nbsp;</pre>',1),oe=_("<p>no history</p>"),ne=_("<h3>History</h3> <!>",1),ie=_('<p style="color: red"> </p>'),ve=_("<p>...getting history</p>"),le=_('<section><div class="status"><div class="scanable svelte-cu1t27"><!> <!></div> <!> <!></div></section>');function qe(X,C){It(C,!1);let f=ot(),Y=ot(),$=ot();async function pt(){const r=t(f).getTokenDepositAddress();let v=(await t(f).getUtxos()).filter(o=>o.token).filter(o=>!o.token.capability);console.log(v);let g=[...new Set(v.map(o=>o.token.tokenId))].map(o=>{const d=v.filter(c=>c.token.tokenId==o&&c.token.amount>0n).map(c=>c.token.amount||0n).reduce((c,q)=>c+q,0n);return new Rt({cashaddr:r,value:800,amount:d,tokenId:o})});return await t(f).send(g)}async function mt(){return await t(f).sendMax(t(f).getDepositAddress())}Dt(async()=>{try{const r=Ct.url.hostname!=="vox.cash";_t(_t().StorageProvider=Pt),st(f,r?await Ut.named("vox"):await jt.named("vox")),console.log(t(f).toDbString()),st(Y,await t(f).getBalance("sat")),st($,await t(f).getUtxos())}catch(r){throw r}}),Ht();var Z=le(),it=a(Z),tt=a(it),vt=a(tt);{var ut=r=>{var v=$t(),l=D(v);H(l,"id","qr1"),u(()=>H(l,"contents",t(f).getDepositAddress())),H(l,"module-color","#000"),H(l,"position-ring-color","#8dc351"),H(l,"position-center-color","#ff00ec"),H(l,"mask-x-to-y-ratio","1.2"),Wt(l,`width: 150px;
                height: 150px;
                margin: 0.5em auto;
                background-color: #fff;`);var g=a(l);e(l);var o=i(l,2),d=a(o,!0);e(o),u(c=>{K(g,"src",Mt),b(d,c)},[()=>t(f).getDepositAddress()],I),s(r,v)};x(vt,r=>{t(f)&&r(ut)})}var ft=i(vt,2);{var gt=r=>{var v=Et(),l=i(a(v),2),g=a(l);e(l),e(v),u(o=>b(g,`${o??""} satoshis`),[()=>t(Y).toLocaleString()],I),s(r,v)};x(ft,r=>{t(Y)>=0&&r(gt)})}e(tt);var lt=i(tt,2);{var ht=r=>{var v=V(),l=D(v);{var g=d=>{var c=Yt(),q=D(c),E=a(q);E.__click=[Gt,pt];var y=i(E,2);y.__click=[Jt,mt],e(q);var L=i(q,4),F=a(L),B=a(F),w=i(a(B),4),G=i(a(w));e(w),e(B),e(F);var M=i(F);nt(M,7,()=>t($),O=>O.txid+":"+O.vout,(O,k)=>{var A=Xt(),N=a(A),W=a(N),et=a(W);{var P=n=>{var m=Qt();u(Tt=>{K(m,"src",Tt),K(m,"alt",t(k).token?.tokenId)},[()=>Nt(t(k).token?.tokenId,16)],I),s(n,m)},at=n=>{var m=Vt();u(()=>K(m,"src",ct)),s(n,m)};x(et,n=>{t(k).token?n(P):n(at,!1)})}e(W),e(N);var U=i(N),h=a(U),p=a(h);{var T=n=>{var m=rt();u(()=>b(m,t(k).token?.tokenId)),s(n,m)};x(p,n=>{t(k).token&&n(T)})}e(h),e(U);var S=i(U),J=a(S),j=a(J);{var z=n=>{var m=rt();u(()=>b(m,t(k).token.amount)),s(n,m)};x(j,n=>{t(k).token&&n(z)})}e(J),e(S);var R=i(S),Q=a(R),wt=a(Q);{var St=n=>{var m=rt();u(()=>b(m,t(k).token.commitment)),s(n,m)};x(wt,n=>{t(k).token&&n(St)})}e(Q),e(R);var dt=i(R),yt=a(dt,!0);e(dt),e(A),u(n=>b(yt,n),[()=>Number(t(k).satoshis).toLocaleString(void 0,{})],I),s(O,A)}),e(M),e(L),u(()=>K(G,"src",ct)),s(d,c)},o=d=>{var c=Zt();s(d,c)};x(l,d=>{t($).length>0?d(g):d(o,!1)})}s(r,v)},bt=r=>{var v=te();s(r,v)};x(lt,r=>{t($)?r(ht):r(bt,!1)})}var kt=i(lt,2);{var xt=r=>{var v=V(),l=D(v);Bt(l,()=>t(f).getHistory("sat",0,10,!0),g=>{var o=ve();s(g,o)},(g,o)=>{var d=ne(),c=i(D(d),2);{var q=y=>{var L=V(),F=D(L);nt(F,3,()=>t(o),B=>B.hash,(B,w)=>{var G=se(),M=D(G);{var O=h=>{var p=ee(),T=a(p,!0);e(p),u(S=>b(T,S),[()=>new Date(t(w).timestamp*1e3).toISOString()],I),s(h,p)},k=h=>{var p=ae(),T=a(p,!0);e(p),u(S=>b(T,S),[()=>new Date().toISOString()],I),s(h,p)};x(M,h=>{t(w).timestamp>0?h(O):h(k,!1)})}var A=i(M,2),N=a(A);e(A);var W=i(A,2),et=a(W);e(W);var P=i(W,2),at=a(P);e(P);var U=i(P,2);nt(U,1,()=>t(w).tokenAmountChanges,Ot,(h,p)=>{var T=V(),S=D(T);{var J=j=>{var z=re(),R=a(z);e(z),u(Q=>b(R,`  assets:cash:tokens  ${Q??""} ${t(p).tokenId??""} `),[()=>t(p).amount.toLocaleString()],I),s(j,z)};x(S,j=>{t(p).amount!=0n&&j(J)})}s(h,T)}),Lt(2),u((h,p)=>{b(N,`# ${t(w).blockHeight??""}â–  ${t(w).hash??""} `),b(et,`  assets:cash    ${h??""} sat`),b(at,`  expenses:fees  ${p??""} sat # ${t(w).size??""} bytes`)},[()=>t(w).valueChange.toLocaleString().padStart(14),()=>t(w).fee.toLocaleString().padStart(14)],I),s(B,G)}),s(y,L)},E=y=>{var L=oe();s(y,L)};x(c,y=>{t(o).length>0?y(q):y(E,!1)})}s(g,d)},(g,o)=>{var d=ie(),c=a(d,!0);e(d),u(()=>b(c,t(o).message)),s(g,d)}),s(r,v)};x(kt,r=>{t(f)&&r(xt)})}e(it),e(Z),s(X,Z),qt()}At(["click"]);export{qe as component,Ie as universal};
//# sourceMappingURL=8.CiX6uHNU.js.map
