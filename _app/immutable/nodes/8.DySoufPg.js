import{f as d,a as r,c as Q,t as nt}from"../chunks/DIGK3fbx.js";import"../chunks/D2hU0Bvh.js";import{o as At}from"../chunks/gevkG0Tn.js";import{p as Bt,a as Ot,s as n,c as a,C as X,n as V,D as t,r as e,f as A,t as m,K as I,a0 as Wt}from"../chunks/D9HGzNEp.js";import{d as Ht,s as b}from"../chunks/DLwNFu-O.js";import{a as Ct}from"../chunks/Dk1kGLoU.js";import{i as k}from"../chunks/CKOgfgCC.js";import{e as vt,i as Ft}from"../chunks/Clu73D2-.js";import{a as M,s as j}from"../chunks/8RjDFi4k.js";import{s as Mt}from"../chunks/964CQeWy.js";import{i as Nt,p as Pt}from"../chunks/D8-Wf-Ms.js";import{r as Ut}from"../chunks/B3x9nJtb.js";import{h as jt}from"../chunks/DM0FqWsN.js";import{b as mt}from"../chunks/C4jED5RM.js";import{b as zt}from"../chunks/B8sppVjI.js";import"../chunks/CQVT_UhJ.js";import{I as Rt,T as Kt,W as $t,B as Et,a as Gt}from"../chunks/BgdkrN9n.js";const Jt=!0,We=Object.freeze(Object.defineProperty({__proto__:null,prerender:Jt},Symbol.toStringTag,{value:"Module"}));var ut=Ut(()=>Et);const Qt=(z,q)=>{X(q,!t(q))};var Vt=d('<qr-code><img width="30px" slot="icon"/></qr-code> <pre id="deposit" class="svelte-cu1t27"> </pre>',3),Xt=d('<div class="svelte-cu1t27"><br/> <b> </b></div>'),Yt=(z,q)=>q(),Zt=(z,q)=>q(),te=d("<p> </p>"),ee=d('<img height="64px"/>'),ae=d('<img width="64px" alt="bchLogo"/>'),re=d('<tr class="svelte-cu1t27"><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"> </td></tr>'),oe=d('<div class="walletHead svelte-cu1t27"><button class="svelte-cu1t27">Consolidate Tokens</button> <button class="svelte-cu1t27">Consolidate Sats</button> <button class="svelte-cu1t27">Show/hide backup</button></div> <!> <h3>Unspent Outputs (coins)</h3> <table class="wallet svelte-cu1t27"><thead class="svelte-cu1t27"><tr class="header svelte-cu1t27"><td></td><td>Token</td><td>Fungible</td><td>NFT</td><td>Sats <img width="15" alt="bchLogo"/></td></tr></thead><tbody class="svelte-cu1t27"></tbody></table>',1),se=d("<p>no wallet utxos available</p>"),ne=d("<p>loading wallet...</p>"),ve=d('<pre class="svelte-cu1t27"> </pre>'),ie=d('<pre class="svelte-cu1t27"> </pre>'),le=d('<pre class="svelte-cu1t27"> </pre>'),ce=d('<!> <pre class="svelte-cu1t27"> </pre> <pre class="svelte-cu1t27"> </pre> <pre class="svelte-cu1t27"> </pre> <!> <pre class="svelte-cu1t27">   &nbsp;</pre>',1),de=d("<p>no history</p>"),_e=d("<h3>History</h3> <!>",1),pe=d('<p style="color: red"> </p>'),me=d("<p>...getting history</p>"),ue=d('<section><div class="status"><div class="scanable svelte-cu1t27"><!> <!></div> <!> <!></div></section>');function He(z,q){Bt(q,!1);let u=V(),Y=V(),R=V(),it=V(!1);async function ft(){const o=t(u).getTokenDepositAddress();let i=(await t(u).getUtxos()).filter(s=>s.token).filter(s=>!s.token.capability);console.log(i);let h=[...new Set(i.map(s=>s.token.tokenId))].map(s=>{const _=i.filter(p=>p.token.tokenId==s&&p.token.amount>0n).map(p=>p.token.amount||0n).reduce((p,B)=>p+B,0n);return new Gt({cashaddr:o,value:800,amount:_,tokenId:s})});return await t(u).send(h)}async function gt(){return await t(u).sendMax(t(u).getDepositAddress())}At(async()=>{try{const o=Pt.url.hostname!=="vox.cash";ut(ut().StorageProvider=Rt),X(u,o?await Kt.named("vox"):await $t.named("vox")),console.log(t(u).toDbString()),X(Y,await t(u).getBalance("sat")),X(R,await t(u).getUtxos())}catch(o){throw o}}),Nt();var Z=ue(),lt=a(Z),tt=a(lt),ct=a(tt);{var bt=o=>{var i=Vt(),l=A(i);M(l,"id","qr1"),m(()=>M(l,"contents",t(u).getDepositAddress())),M(l,"module-color","#000"),M(l,"position-ring-color","#8dc351"),M(l,"position-center-color","#ff00ec"),M(l,"mask-x-to-y-ratio","1.2"),Mt(l,`width: 150px;
                height: 150px;
                margin: 0.5em auto;
                background-color: #fff;`);var h=a(l);e(l);var s=n(l,2),_=a(s,!0);e(s),m(p=>{j(h,"src",jt),b(_,p)},[()=>t(u).getDepositAddress()],I),r(o,i)};k(ct,o=>{t(u)&&o(bt)})}var ht=n(ct,2);{var kt=o=>{var i=Xt(),l=n(a(i),2),h=a(l);e(l),e(i),m(s=>b(h,`${s??""} satoshis`),[()=>t(Y).toLocaleString()],I),r(o,i)};k(ht,o=>{t(Y)>=0&&o(kt)})}e(tt);var dt=n(tt,2);{var xt=o=>{var i=Q(),l=A(i);{var h=_=>{var p=oe(),B=A(p),K=a(B);K.__click=[Yt,ft];var T=n(K,2);T.__click=[Zt,gt];var H=n(T,2);H.__click=[Qt,it],e(B);var $=n(B,2);{var N=S=>{var c=te(),O=a(c,!0);e(c),m(D=>b(O,D),[()=>t(u).toDbString()],I),r(S,c)};k($,S=>{t(it)&&S(N)})}var w=n($,4),C=a(w),P=a(C),E=n(a(P),4),et=n(a(E));e(E),e(P),e(C);var F=n(C);vt(F,7,()=>t(R),S=>S.txid+":"+S.vout,(S,c)=>{var O=re(),D=a(O),G=a(D),at=a(G);{var x=v=>{var g=ee();m(Lt=>{j(g,"src",Lt),j(g,"alt",t(c).token?.tokenId)},[()=>zt(t(c).token?.tokenId,16)],I),r(v,g)},f=v=>{var g=ae();m(()=>j(g,"src",mt)),r(v,g)};k(at,v=>{t(c).token?v(x):v(f,!1)})}e(G),e(D);var y=n(D),L=a(y),rt=a(L);{var U=v=>{var g=nt();m(()=>b(g,t(c).token?.tokenId)),r(v,g)};k(rt,v=>{t(c).token&&v(U)})}e(L),e(y);var W=n(y),J=a(W),ot=a(J);{var Tt=v=>{var g=nt();m(()=>b(g,t(c).token.amount)),r(v,g)};k(ot,v=>{t(c).token&&v(Tt)})}e(J),e(W);var st=n(W),_t=a(st),Dt=a(_t);{var It=v=>{var g=nt();m(()=>b(g,t(c).token.commitment)),r(v,g)};k(Dt,v=>{t(c).token&&v(It)})}e(_t),e(st);var pt=n(st),qt=a(pt,!0);e(pt),e(O),m(v=>b(qt,v),[()=>Number(t(c).satoshis).toLocaleString(void 0,{})],I),r(S,O)}),e(F),e(w),m(()=>j(et,"src",mt)),r(_,p)},s=_=>{var p=se();r(_,p)};k(l,_=>{t(R).length>0?_(h):_(s,!1)})}r(o,i)},wt=o=>{var i=ne();r(o,i)};k(dt,o=>{t(R)?o(xt):o(wt,!1)})}var St=n(dt,2);{var yt=o=>{var i=Q(),l=A(i);Ct(l,()=>t(u).getHistory("sat",0,10,!0),h=>{var s=me();r(h,s)},(h,s)=>{var _=_e(),p=n(A(_),2);{var B=T=>{var H=Q(),$=A(H);vt($,3,()=>t(s),N=>N.hash,(N,w)=>{var C=ce(),P=A(C);{var E=x=>{var f=ve(),y=a(f,!0);e(f),m(L=>b(y,L),[()=>new Date(t(w).timestamp*1e3).toISOString()],I),r(x,f)},et=x=>{var f=ie(),y=a(f,!0);e(f),m(L=>b(y,L),[()=>new Date().toISOString()],I),r(x,f)};k(P,x=>{t(w).timestamp>0?x(E):x(et,!1)})}var F=n(P,2),S=a(F);e(F);var c=n(F,2),O=a(c);e(c);var D=n(c,2),G=a(D);e(D);var at=n(D,2);vt(at,1,()=>t(w).tokenAmountChanges,Ft,(x,f)=>{var y=Q(),L=A(y);{var rt=U=>{var W=le(),J=a(W);e(W),m(ot=>b(J,`  assets:cash:tokens  ${ot??""} ${t(f).tokenId??""} `),[()=>t(f).amount.toLocaleString()],I),r(U,W)};k(L,U=>{t(f).amount!=0n&&U(rt)})}r(x,y)}),Wt(2),m((x,f)=>{b(S,`# ${t(w).blockHeight??""}â–  ${t(w).hash??""} `),b(O,`  assets:cash    ${x??""} sat`),b(G,`  expenses:fees  ${f??""} sat # ${t(w).size??""} bytes`)},[()=>t(w).valueChange.toLocaleString().padStart(14),()=>t(w).fee.toLocaleString().padStart(14)],I),r(N,C)}),r(T,H)},K=T=>{var H=de();r(T,H)};k(p,T=>{t(s).length>0?T(B):T(K,!1)})}r(h,_)},(h,s)=>{var _=pe(),p=a(_,!0);e(_),m(()=>b(p,t(s).message)),r(h,_)}),r(o,i)};k(St,o=>{t(u)&&o(yt)})}e(lt),e(Z),r(z,Z),Ot()}Ht(["click"]);export{He as component,We as universal};
//# sourceMappingURL=8.DySoufPg.js.map
