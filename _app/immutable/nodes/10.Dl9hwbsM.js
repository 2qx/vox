import{f as p,a as n,c as x}from"../chunks/DTc5U4eY.js";import{o as we}from"../chunks/_R59KZhj.js";import{aA as Ce,p as xe,aB as r,ao as Te,t as D,a as Be,ay as Ee,s as g,c as P,I as a,ak as o,r as H,f as T}from"../chunks/CQU5mOuk.js";import{h as Ae,s as Fe}from"../chunks/CF3aPdyL.js";import{i as B}from"../chunks/CZ0rTjPC.js";import{e as J,i as X}from"../chunks/CbL2L94E.js";import{s as I}from"../chunks/-rOGAMhN.js";import{s as Se}from"../chunks/DBDCTY7c.js";import{p as Me}from"../chunks/BujN204M.js";import{U as Ne,L as We,F as $e}from"../chunks/DUN7heMW.js";import"../chunks/CuzQ0eOn.js";import{B as De}from"../chunks/BzLj6JBc.js";import{C as Pe}from"../chunks/B7hCbxZp.js";import{D as He}from"../chunks/DMvn4Q5j.js";import{$ as Ie,a as Y}from"../chunks/BDt1pbpk.js";import{I as Ue,B as ze,W as Oe,T as Le,g as je}from"../chunks/BTBIn4-B.js";import{j as Ke,d as Re,s as qe,b as Ve,k as Ge,l as Qe}from"../chunks/BQUio51k.js";import{V as E,T as Je,b as Xe}from"../chunks/Bt3MikUi.js";const Ye=!0,Tt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ye},Symbol.toStringTag,{value:"Module"}));var Ze=p("<h1>About Future Bitcoin Cash</h1> <h3>What is a <em>Future</em>?</h3> <p>A <em>Future</em> is a financial instrument representing some good or service to be delivered at some future date.</p> <p>Futures are a way to hedge risk by allowing a commodity producer to agree on a future price and date of delivery with a buyer.</p> <p>Financial futures allow parties to hedge risk or profit from stabilizing market volatility.</p> <h3>What is Future Bitcoin Cash (FBCH)?</h3> <p>Keeping with the philosophy of bitcoin, a trustless fully-backed currency should have a trustless fully-backed future. With CashTokens and a simple timelocked vault, a fully-backed trustless future token fairly simple easy.</p> <p>Futures are created by locking coins in a series vault corresponding to a future locktime. The corresponding token will then trade at a discount to the face value at maturity.</p> <h3>Why do people lock coins into futures?</h3> <p>Coupons are plain cash outputs that can be used to incentivize locking coins for futures.</p> <p>Coupons are not tokens, nor are they controlled by a central authority. Any one (or thing) that can send Bitcoin Cash to and address can create a coupon. Coupons are plain Bitcoin Cash unspent outputs, held by a contract.</p> <h3>Where do the coupons come from?</h3> <p>Future coupons can come from anywhere.  Writing a coupon is permissionless.</p> <p>Future coupon writers send bitcoin to a contract corresponding to a future vault and locking denomination.</p> <p>An individual may write many coupons at once, in the same transaction. A decentralized autonomous organization (DAO) may emit a stream of coupons according to some predetermined logic. Coupon writers may have differing or conflicting goals.</p> <p>Coupons are cash, and verifiable on-chain.</p>",1);function et(A){var F=Ze();Ce(30),n(A,F)}var tt=p('<meta name="description" content="Swap coins for Futures."/>'),at=p("<img/>"),ot=p('<img alt="Disconnected"/>'),rt=p("<p>no coupons available</p>"),st=p('<div style="text-align:center"><h2>loading coupons</h2> <!></div>'),nt=p(`<section><div class="status svelte-yzs2kw"> <!> <!></div> <h1>Stake coins for futures</h1> <!> <div><p style="font-size:small"><i>sats (satoshis)</i>: one 100,000,000<sup>th</sup> of a whole coin.<br/> <i>spb</i>: rate in sats per coin per block of time remaining to maturation.<br/> <i>apy, coupon rate per annum</i>: effective non-compounding rate of annual return. Note:
			approximate rates assume 870 sats network transaction fees (550 swap, 320 redeem)â€•paid to
			miners.</p></div> <!></section>`);function Bt(A,F){xe(F,!0);let b=r(0),U=r(""),i=r(void 0),s,y,d=r(void 0),S=r(""),Z=r(0),ee=r(0),te=r(0),k=r(""),z=r(""),h=r([]),_=r(Te([])),f=new Map([]),O=r(0);const w=Me.url.hostname=="vox.cash",ae=w?"bch.imaginary.cash":"chipnet.bch.ninja",oe=w?Je:Xe;let v;const C=()=>{clearTimeout(y),y=setTimeout(()=>{j(),L()},1e3)},re=async()=>{clearTimeout(y),y=setTimeout(async()=>{for(;a(_).length;){let e=a(_).shift();try{await ne(e),await Qe(100),console.log("broadcast"),C()}catch(t){console.error(t),o(_,[],!0),o(h,[]),f=new Map([]),C()}}},500)};async function se(e){f.has(e.locktime)||f.set(e.locktime,await s.request("blockchain.scripthash.listunspent",E.getScriptHash(e.locktime),"include_tokens"));let t=f.get(e.locktime).filter(l=>l.token_data?.category==oe.get(e.locktime)),c=E.swap(e.placement,t,a(h),e.locktime,a(U),e),W=Ve(Ge(c.transaction));a(_).push(W),re(),o(i,a(i)?.filter(l=>!(l.tx_hash==e.tx_hash&&l.tx_pos==e.tx_pos))),o(d,Map.groupBy(a(i),({locktime:l,placement:u,value:m})=>`${l}-${u}-${m}`),!0),o(h,c.walletUtxos),f.set(e.locktime,c.contractUtxos)}const ne=async function(e){let t=await s.request("blockchain.transaction.broadcast",e);if(t instanceof Error)throw o(k,Y[s.status],!0),t};async function L(){s&&a(b)>1e3&&o(i,await E.getAllCouponUtxos(s,a(b))),a(i)&&(o(d,Map.groupBy(a(i),({locktime:e,placement:t,value:c})=>`${e}-${t}-${c}`),!0),a(i).sort((e,t)=>parseFloat(t.spb)-parseFloat(e.spb)),o(ee,Number(a(i).reduce((e,t)=>e+t.placement,0)/1e8),!0),o(te,Number(a(i).reduce((e,t)=>e+t.value,0)),!0))}const j=async function(){let e=await s.request("blockchain.scripthash.listunspent",a(S),"include_tokens");if(e instanceof Error)throw e;o(h,e.filter(t=>!t.token_data?.nft)),o(O,qe(a(h),!0),!0)},ie=function(e){if(o(k,Y[s.status],!0),e.method==="blockchain.headers.subscribe"){let t=e.params[0];o(b,t.height,!0),C()}else e.method==="blockchain.scripthash.subscribe"?e.params[1]!==a(z)&&(o(z,e.params[1],!0),o(Z,0),C()):console.log(e)};we(async()=>{ze.StorageProvider=Ue,v=w?await Oe.named("vox"):await Le.named("vox"),o(U,je(v.mnemonic,v.derivationPath.slice(0,-2),v.isTestnet),!0);let e=Ke(v.getDepositAddress());if(typeof e=="string")throw e;o(S,Re(e.bytecode),!0),s=new Ie(Ne,"1.4.1",ae),await s.connect(),s.on("notification",ie),await s.subscribe("blockchain.headers.subscribe"),await s.subscribe("blockchain.scripthash.subscribe",a(S)),j(),L()});var M=nt();Ae(e=>{var t=tt();Ee.title="ðŸ…µâ€‹ BCH",n(e,t)});var N=P(M),K=P(N),R=g(K);De(R,{get template(){return E.template}});var ce=g(R,2);{var le=e=>{var t=at();D(()=>{I(t,"src",Pe),I(t,"alt",a(k))}),n(e,t)},ue=e=>{var t=ot();D(()=>I(t,"src",He)),n(e,t)};B(ce,e=>{a(k)=="CONNECTED"?e(le):e(ue,!1)})}H(N);var q=g(N,4);{var pe=e=>{var t=x(),c=T(t);{var W=u=>{var m=x(),he=T(m);J(he,17,()=>a(d).values(),X,(fe,V)=>{var G=x(),ve=T(G);J(ve,17,()=>a(V),X,(ge,be,ye)=>{var Q=x(),ke=T(Q);{var _e=$=>{$e($,Se({handlePlacement:se},()=>a(be),{get isMainnet(){return w},get couponCount(){return a(V).length},get balance(){return a(O)}}))};B(ke,$=>{ye==0&&$(_e)})}n(ge,Q)}),n(fe,G)}),n(u,m)},l=u=>{var m=rt();n(u,m)};B(c,u=>{a(d).size>0?u(W):u(l,!1)})}n(e,t)},me=e=>{var t=st(),c=g(P(t),2);We(c),H(t),n(e,t)};B(q,e=>{a(d)?e(pe):e(me,!1)})}var de=g(q,4);et(de),H(M),D(e=>Fe(K,`${e??""} `),[()=>a(b).toLocaleString()]),n(A,M),Be()}export{Bt as component,Tt as universal};
//# sourceMappingURL=10.Dl9hwbsM.js.map
