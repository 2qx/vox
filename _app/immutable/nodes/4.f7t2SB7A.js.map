{"version":3,"file":"4.f7t2SB7A.js","sources":["../../../../../../src/routes/badger/+page.ts","../../../../../../../badgers/out/index.js","../../../../../../src/lib/BadgerStakeUtxo.svelte","../../../../../../src/routes/badger/+page.svelte"],"sourcesContent":["export const prerender = true;","import template from './template.v1.json' with { type: \"json\" };\nimport packageInfo from '../package.json' with { type: \"json\" };\nimport { binToHex, createVirtualMachineBCH, encodeTransactionBCH, generateTransaction, hexToBin, verifyTransactionTokens, binToNumberInt16LE } from '@bitauth/libauth';\nimport { getAddress, getLibauthCompiler, getScriptHash, } from '@unspent/tau';\nexport const BADGER = hexToBin('242f6ecedb404c743477e35b09733a56cacae34f3109d5cee1cbc1d5630affd7');\nexport const tBADGER = hexToBin('0000000000000000000000000000000000000000000000000000000000000000');\nexport default class BadgerStake {\n    static USER_AGENT = packageInfo.name;\n    static tokenAware = true;\n    static template = template;\n    static compiler = getLibauthCompiler(this.template);\n    static vm = createVirtualMachineBCH();\n    static getLockingBytecode() {\n        const lockingBytecodeResult = this.compiler.generateBytecode({\n            data: {},\n            scriptId: 'lock'\n        });\n        if (!lockingBytecodeResult.success)\n            throw new Error('Failed to generate bytecode, script: , ' + JSON.stringify(lockingBytecodeResult, null, '  '));\n        return lockingBytecodeResult.bytecode;\n    }\n    /**\n     * Get cashaddress\n     *\n     * @param indexKey - the key for the record.\n     * @param reversed - whether to reverse the hash.\n     * @throws {Error} if transaction generation fails.\n     * @returns a cashaddress.\n     */\n    static getScriptHash(reversed = true) {\n        return getScriptHash(this.getLockingBytecode(), reversed);\n    }\n    /**\n     * Get cashaddress\n     *\n     * @param prefix - cashaddress prefix.\n     * @throws {Error} if transaction generation fails.\n     * @returns a cashaddress.\n     */\n    static getAddress(prefix = \"bitcoincash\") {\n        return getAddress(this.getLockingBytecode(), prefix, this.tokenAware);\n    }\n    static parseNFT(utxo) {\n        if (utxo.token_data?.nft?.capability == \"mutable\") {\n            return {\n                amount: parseInt(utxo.token_data?.amount),\n                stake: binToNumberInt16LE(hexToBin(utxo.token_data?.nft?.commitment.slice(-4))),\n                user_pkh: utxo.token_data?.nft?.commitment.slice(0, 40)\n            };\n        }\n        else if (utxo.token_data?.nft?.capability == \"minting\") {\n            return {\n                amount: parseInt(utxo.token_data?.amount),\n                stake: binToNumberInt16LE(hexToBin(utxo.token_data?.nft?.commitment.slice(0, 4))),\n                user_pkh: utxo.token_data?.nft?.commitment.slice(-40)\n            };\n        }\n        else {\n            throw Error(\"Nft was not minting nor mutable\");\n        }\n    }\n    static getSourceOutput(utxo) {\n        return {\n            lockingBytecode: this.getLockingBytecode(),\n            valueSatoshis: BigInt(utxo.value)\n        };\n    }\n    //, amount: number, blocks: number, userPkh: Uint8Array\n    static getInput(utxo) {\n        return {\n            outpointIndex: utxo.tx_pos,\n            outpointTransactionHash: hexToBin(utxo.tx_hash),\n            sequenceNumber: utxo.value,\n            unlockingBytecode: {\n                data: {\n                // \"bytecode\": {\n                //     \"amount\": bigIntToVmNumber(BigInt(amount)),\n                //     \"stake\": numberToBinUint16BE(blocks),\n                //     \"user_pkh\": userPkh\n                // }\n                },\n                compiler: this.compiler,\n                script: 'unlock',\n                valueSatoshis: BigInt(utxo.value),\n            },\n        };\n    }\n    static getOutput() {\n        return {\n            lockingBytecode: {\n                data: {\n                // \"bytecode\": {\n                //     \"key\": hexToBin(indexKey)\n                // }\n                },\n                compiler: this.compiler,\n                script: 'op_return'\n            },\n            valueSatoshis: BigInt(0)\n        };\n    }\n    /**\n     * Get source outputs, transform contract & wallet outpoints for spending verification.\n     *\n     * @param contractUtxo - contract outputs to use as input.\n     * @param walletUtxo - wallet outputs to use as input.\n     * @param key - private key to sign transaction wallet inputs.\n     *\n     * @returns a transaction template.\n     */\n    static getSourceOutputs(valueUtxos) {\n        const sourceOutputs = [];\n        sourceOutputs.push(...valueUtxos.map((u) => this.getSourceOutput(u)));\n        return sourceOutputs;\n    }\n    /**\n     * Unlock completed stake.\n     *\n     * @param utxo - unspent contract record to payout.\n     *\n     * @throws {Error} if transaction generation fails.\n     * @returns a transaction template.\n     */\n    static unlock(utxo) {\n        const inputs = [];\n        const outputs = [];\n        let config = {\n            locktime: 0,\n            version: 2,\n            inputs,\n            outputs\n        };\n        config.inputs.push(this.getInput(utxo));\n        config.outputs.push(this.getOutput());\n        let result = generateTransaction(config);\n        if (!result.success)\n            throw new Error('generate transaction failed!, errors: ' + JSON.stringify(result.errors, null, '  '));\n        const sourceOutputs = [this.getSourceOutput(utxo)];\n        const transaction = result.transaction;\n        const tokenValidationResult = verifyTransactionTokens(transaction, sourceOutputs, { maximumTokenCommitmentLength: 40 });\n        if (tokenValidationResult !== true)\n            throw tokenValidationResult;\n        let verify = this.vm.verify({\n            sourceOutputs: sourceOutputs,\n            transaction: transaction,\n        });\n        if (typeof verify == \"string\")\n            throw verify;\n        return binToHex(encodeTransactionBCH(transaction));\n    }\n}\n//# sourceMappingURL=index.js.map","<script lang=\"ts\">\n\timport { blo } from 'blo';\n\timport bch from '$lib/images/BCH.svg';\n\timport icon from '$lib/images/BADGER.svg';\n\n\timport { disassembleBytecodeBCH, hexToBin } from '@bitauth/libauth';\n\n\timport TokenNftData from './TokenNftData.svelte';\n\timport TokenAmount from './TokenAmount.svelte';\n\timport TokenIcon from './TokenIcon.svelte';\n\n\tlet {\n\t\ttx_pos,\n\t\ttx_hash,\n\t\theight,\n\t\tvalue,\n\t\ttoken_data,\n\t\tunlock = $bindable(),\n\t\tamount,\n\t\tstake,\n\t\tuser_pkh,\n\t\tnow\n\t} = $props();\n\n\tlet hasMatured = $derived((height + stake) < now);\n\t\n</script>\n\n<div class=\"container\">\n\t<div class=\"stake\">\n\t\t<div class=\"balance\">\n\t\t\t<div class=\"fill\">\n\t\t\t\t{#if token_data}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<TokenAmount amount={token_data.amount} category={token_data.category} />\n\n\t\t\t\t\t\t<TokenIcon size=\"20\" category={token_data.category}></TokenIcon>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t{Number(value / 100000000).toLocaleString(undefined, {})} <b>BCH</b>\n\t\t\t\t\t<img width=\"20px\" src={bch} />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"auth\">\n\t\t\t\t\t{#if hasMatured}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\tunlock({ tx_hash: tx_hash, tx_pos: tx_pos });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\trelease\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if user_pkh}\n\t\t\t\t\t\t<img height=\"32px\" src={blo(user_pkh, 16)} alt={user_pkh} />\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"header\">\n\t\t\t<div class=\"timestamp\">{stake}</div>\n\t\t\t<div class=\"fill\"></div>\n\t\t\t<div class=\"timestamp\">{height}</div>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.container {\n\t\tdisplay: flex;\n\t\tpadding: 5px;\n\t}\n\t.stake {\n\t\tborder-radius: 10px;\n\t\tpadding: 5px 5px 5px 15px;\n\t\tbackground-color: #eeeeee;\n\t\tmargin: auto;\n\t\twidth: 100%;\n\t\tborder: #bbb solid;\n\t\tborder-width: 1px;\n\t}\n\n\t.header {\n\t\tdisplay: flex;\n\t}\n\t.balance {\n\t}\n\t.hash {\n\t\tfont-size: xx-small;\n\t\tfont-weight: 200;\n\t\talign-content: flex-start;\n\t\tcolor: #857070;\n\t\tmax-width: 70%;\n\t\tword-break: break-all;\n\t}\n\t.fill {\n\t\tflex: 1;\n\t\tword-break: break-all;\n\t}\n\t.fill div {\n\t}\n\t.fill div p {\n\t\ttext-align: right;\n\t}\n\t.timestamp {\n\t\tfont-size: xx-small;\n\t\tfont-weight: 200;\n\t\tcolor: #777;\n\t\tword-break: break-all;\n\t\tmax-width: 80px;\n\t}\n\t.auth {\n\t\talign-content: center;\n\t\tpadding: 5px 5px 5px 5px;\n\t}\n\t.auth img {\n\t\tborder-radius: 25%;\n\t}\n\n\t.stake :global {\n\t\tp {\n\t\t\tfont-weight: 400;\n\t\t\tline-height: 1;\n\t\t}\n\t}\n\n\t.stake.op {\n\t\tbackground-color: #fff;\n\t}\n\n\t.error {\n\t\tcolor: brown;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport { page } from '$app/state';\n\n\timport { binToHex, cashAddressToLockingBytecode, encodeTransactionBCH } from '@bitauth/libauth';\n\n\timport Readme from './README.md';\n\n\timport bch from '$lib/images/BCH.svg';\n\timport tBADGER from '$lib/images/tBADGER.svg';\n\timport BADGER from '$lib/images/BADGER.svg';\n\n\timport { ElectrumClient, ConnectionStatus } from '@electrum-cash/network';\n\n\timport { IndexedDBProvider } from '@mainnet-cash/indexeddb-storage';\n\timport { BaseWallet, Wallet, TestNetWallet, hexToBin } from 'mainnet-js';\n\n\timport {\n\t\tgetDefaultElectrum,\n\t\tsumUtxoValue,\n\t\tsumTokenAmounts,\n\t\tgetScriptHash,\n\t\tgetHdPrivateKey,\n\t\ttype UtxoI\n\t} from '@unspent/tau';\n\n\timport Badger from '@unspent/badgers';\n\n\timport BadgerStake, { BADGER as badgerCat, tBADGER as tBadgerCat } from '@unspent/badgers';\n\n\timport BitauthLink from '$lib/BitauthLink.svelte';\n\timport Transaction from '$lib/Transaction.svelte';\n\timport CONNECTED from '$lib/images/connected.svg';\n\timport DISCONNECTED from '$lib/images/disconnected.svg';\n\timport BadgerStakeButton from '$lib/BadgerStakeUtxo.svelte';\n\n\tlet now = $state(0);\n\tlet connectionStatus = $state('');\n\tlet contractState = $state('');\n\n\tlet transaction_hex = $state('');\n\tlet transaction: any = undefined;\n\tlet transactionValid = $state(false);\n\tlet sourceOutputs: any = undefined;\n\n\tlet unspent: any[] = $state([]);\n\tlet walletUnspent: any[] = $state([]);\n\tlet key = $state('');\n\tlet electrumClient: any = $state();\n\tlet scripthash = $state('');\n\tlet walletScriptHash = $state('');\n\n\tlet sumWallet = $state(0);\n\tlet sumVault = $state(0);\n\n\tscripthash = Badger.getScriptHash();\n\n\tconst isMainnet = page.url.hostname == 'vox.cash';\n\tconst icon = isMainnet ? BADGER : tBADGER;\n\tconst category = isMainnet ? binToHex(badgerCat) : binToHex(tBadgerCat);\n\tconst baseTicker = isMainnet ? 'BCH' : 'tBCH';\n\tconst ticker = isMainnet ? 'BADGER' : 'tBADGER';\n\tconst prefix = isMainnet ? 'bitcoincash' : 'bchtest';\n\tconst server = getDefaultElectrum(isMainnet);\n\n\tlet spent = new Set();\n\tlet timer: any = 0;\n\tlet amount = 0;\n\tlet wallet: any;\n\tlet transactionError: string | boolean = '';\n\n\tconst handleNotifications = async function (data: any) {\n\t\tif (data.method === 'blockchain.headers.subscribe') {\n\t\t\tlet d = data.params[0];\n\t\t\tnow = d.height;\n\t\t\tupdateUnspent();\n\t\t} else if (data.method === 'blockchain.scripthash.subscribe') {\n\t\t\tif (data.params[1] !== contractState) {\n\t\t\t\tcontractState = data.params[1];\n\t\t\t\tconnectionStatus = ConnectionStatus[electrumClient.status];\n\t\t\t\tamount = 0;\n\t\t\t\t//debounceUpdateWallet();\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(data);\n\t\t}\n\t};\n\n\tconst updateUnspent = async function () {\n\t\tlet response = await electrumClient.request(\n\t\t\t'blockchain.scripthash.listunspent',\n\t\t\tscripthash,\n\t\t\t'include_tokens'\n\t\t);\n\t\tif (response instanceof Error) throw response;\n\t\tlet unspentIds = new Set(response.map((utxo: any) => `${utxo.tx_hash}\":\"${utxo.tx_pos}`));\n\t\tif (unspent.length == 0 || spent.intersection(unspentIds).size == 0) {\n\t\t\tunspent = response\n\t\t\t\t.filter((u) => u.token_data.nft.capability == 'mutable')\n\t\t\t\t.map((u) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...u,\n\t\t\t\t\t\t...BadgerStake.parseNFT(u),\n\t\t\t\t\t\t...{ now: now }\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\tBaseWallet.StorageProvider = IndexedDBProvider;\n\t\twallet = isMainnet ? await Wallet.named(`vox`) : await TestNetWallet.named(`vox`);\n\n\t\tkey = getHdPrivateKey(wallet.mnemonic!, wallet.derivationPath.slice(0, -2), wallet.isTestnet);\n\t\tlet lockingCodeResult = cashAddressToLockingBytecode(wallet.getDepositAddress());\n\t\tif (typeof lockingCodeResult == 'string') throw lockingCodeResult;\n\t\twalletScriptHash = getScriptHash(lockingCodeResult.bytecode);\n\n\t\t// Initialize an electrum client.\n\t\telectrumClient = new ElectrumClient(Badger.USER_AGENT, '1.4.1', server);\n\n\t\t// Wait for the client to connect.\n\t\tawait electrumClient.connect();\n\t\t// Set up a callback function to handle new blocks.\n\n\t\t// Listen for notifications.\n\t\telectrumClient.on('notification', handleNotifications);\n\n\t\t// Set up a subscription for new block headers.\n\t\tawait electrumClient.subscribe('blockchain.scripthash.subscribe', scripthash);\n\t\tawait electrumClient.subscribe('blockchain.scripthash.subscribe', walletScriptHash);\n\t\tawait electrumClient.subscribe('blockchain.headers.subscribe');\n\t});\n\n\tonDestroy(async () => {\n\t\tconst electrumClient = new ElectrumClient(Badger.USER_AGENT, '1.4.1', server);\n\t\tawait electrumClient.disconnect();\n\t});\n</script>\n\n<section>\n\t<div class=\"status\">\n\t\t<BitauthLink template={Badger.template} />\n\t\t{#if connectionStatus == 'CONNECTED'}\n\t\t\t<img src={CONNECTED} alt={connectionStatus} />\n\t\t{:else}\n\t\t\t<img src={DISCONNECTED} alt=\"Disconnected\" />\n\t\t{/if}\n\t</div>\n\n\t<!-- <div class=\"swap\">\n\t\t<div>\n\t\t\t<img width=\"50\" src={bch} alt={baseTicker} />\n\t\t\t<br />\n\t\t\t{sumWallet.toLocaleString()} sats {baseTicker}\n\t\t</div>\n\t\t<div>\n\t\t\t<img width=\"50\" src={icon} alt={ticker} />\n\t\t\t<br />\n\t\t\t{sumVault.toLocaleString()}\n\t\t\t{ticker}\n\t\t</div>\n\t</div> -->\n\n\t{#if unspent.length}\n\t\t<h3>Current Stakes</h3>\n\t\t<div class=\"grid\">\n\t\t\t{#if unspent.filter((i: any) => i.height > 0).length > 0}\n\t\t\t\t{#each unspent.filter((i: any) => i.height > 0) as item, index}\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<BadgerStakeButton {...item} />\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t{:else}\n\t\t\t\t<p>No staked coins?</p>\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n\n\t<Readme />\n</section>\n\n<style>\n\t.swap {\n\t\tdisplay: flex;\n\t}\n\t.status {\n\t\ttext-align: end;\n\t}\n\n\t.swap {\n\t\tdisplay: flex;\n\t\tmargin: auto;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t.swap div {\n\t\tpadding: 20px;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t}\n\n\t.swap input {\n\t\tbackground-color: #ddd;\n\t}\n\n\t.action {\n\t\tdisplay: inline-block;\n\t\tborder-radius: 10px;\n\t\tbackground-color: rgba(255, 255, 255, 0.781);\n\t\t/* color: #000000; */\n\t\tborder: #ffffff solid;\n\t\tmargin: auto;\n\t\tpadding: 10px;\n\t\tfont-weight: 900;\n\t\tfont-size: small;\n\t\tfilter: drop-shadow(8px 8px 16px #ffffff);\n\t}\n\n\t.action:disabled {\n\t\tdisplay: inline-block;\n\t\tborder-radius: 10px;\n\t\tbackground-color: #adadad;\n\t\tcolor: #000000;\n\t\tmargin: 1px;\n\t\tpadding: 0 5px 0 5px;\n\t\tfont-weight: 900;\n\t\tfont-size: small;\n\t}\n\n\t.grid {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex-wrap: wrap;\n\t\talign-items: flex-start;\n\t}\n\n\t.grid .row {\n\t\tflex: 1 1 180px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\ttext-align: right;\n\t\tgrid-gap: 0.2rem;\n\t\tmargin: 0 0 0.2rem 0;\n\t}\n\n\t.swap button {\n\t\tbackground-color: #a45eb6; /* Green */\n\t\tborder: none;\n\t\tcolor: white;\n\t\tborder-radius: 20px;\n\t\tpadding: 15px 32px;\n\t\ttext-align: center;\n\t\ttext-decoration: none;\n\t\tdisplay: inline-block;\n\t\tfont-size: 16px;\n\t}\n\t.swap button:hover {\n\t\tbackground-color: #9933b3;\n\t}\n</style>\n"],"names":["prerender","BADGER","hexToBin","tBADGER","BadgerStake","packageInfo","template","getLibauthCompiler","createVirtualMachineBCH","lockingBytecodeResult","reversed","getScriptHash","prefix","getAddress","utxo","binToNumberInt16LE","valueUtxos","sourceOutputs","u","config","result","generateTransaction","transaction","tokenValidationResult","verifyTransactionTokens","verify","binToHex","encodeTransactionBCH","on_click","_","$$props","hasMatured","$.derived","$$render","consequent_1","blo","bch","now","connectionStatus","contractState","unspent","$.state","$.proxy","key","electrumClient","scripthash","walletScriptHash","Badger","isMainnet","page","badgerCat","tBadgerCat","server","getDefaultElectrum","spent","wallet","handleNotifications","data","d","updateUnspent","$.get","$.set","ConnectionStatus","response","unspentIds","onMount","BaseWallet","IndexedDBProvider","Wallet","TestNetWallet","getHdPrivateKey","lockingCodeResult","cashAddressToLockingBytecode","ElectrumClient","onDestroy","CONNECTED","DISCONNECTED","consequent","alternate","i","$.index","$$anchor","item","alternate_1","consequent_2"],"mappings":"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"}