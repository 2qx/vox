{"version":3,"file":"4.CZ2ugxDK.js","sources":["../../../../../../../../node_modules/.pnpm/svelte@5.33.18/node_modules/svelte/src/internal/client/dom/blocks/html.js","../../../../../../../../node_modules/.pnpm/svelte@5.33.18/node_modules/svelte/src/internal/client/timing.js","../../../../../../../../node_modules/.pnpm/svelte@5.33.18/node_modules/svelte/src/internal/client/loop.js","../../../../../../../../node_modules/.pnpm/svelte@5.33.18/node_modules/svelte/src/internal/client/dom/legacy/event-modifiers.js","../../../../../../src/routes/badger/+page.ts","../../../../../../../../node_modules/.pnpm/svelte@5.33.18/node_modules/svelte/src/motion/utils.js","../../../../../../../../node_modules/.pnpm/svelte@5.33.18/node_modules/svelte/src/motion/spring.js","../../../../../../src/lib/utils.ts","../../../../../../src/lib/RangePips.svelte","../../../../../../src/lib/RangeSlider.svelte","../../../../../../../badgers/out/index.js","../../../../../../src/lib/BadgerStakeUtxo.svelte","../../../../../../src/routes/badger/+page.svelte"],"sourcesContent":["/** @import { Effect, TemplateNode } from '#client' */\nimport { FILENAME, HYDRATION_ERROR } from '../../../../constants.js';\nimport { remove_effect_dom, template_effect } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport { hash, sanitize_location } from '../../../../utils.js';\nimport { DEV } from 'esm-env';\nimport { dev_current_component_function } from '../../context.js';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { active_effect } from '../../runtime.js';\n\n/**\n * @param {Element} element\n * @param {string | null} server_hash\n * @param {string} value\n */\nfunction check_hash(element, server_hash, value) {\n\tif (!server_hash || server_hash === hash(String(value ?? ''))) return;\n\n\tlet location;\n\n\t// @ts-expect-error\n\tconst loc = element.__svelte_meta?.loc;\n\tif (loc) {\n\t\tlocation = `near ${loc.file}:${loc.line}:${loc.column}`;\n\t} else if (dev_current_component_function?.[FILENAME]) {\n\t\tlocation = `in ${dev_current_component_function[FILENAME]}`;\n\t}\n\n\tw.hydration_html_changed(sanitize_location(location));\n}\n\n/**\n * @param {Element | Text | Comment} node\n * @param {() => string} get_value\n * @param {boolean} [svg]\n * @param {boolean} [mathml]\n * @param {boolean} [skip_warning]\n * @returns {void}\n */\nexport function html(node, get_value, svg = false, mathml = false, skip_warning = false) {\n\tvar anchor = node;\n\n\tvar value = '';\n\n\ttemplate_effect(() => {\n\t\tvar effect = /** @type {Effect} */ (active_effect);\n\n\t\tif (value === (value = get_value() ?? '')) {\n\t\t\tif (hydrating) hydrate_next();\n\t\t\treturn;\n\t\t}\n\n\t\tif (effect.nodes_start !== null) {\n\t\t\tremove_effect_dom(effect.nodes_start, /** @type {TemplateNode} */ (effect.nodes_end));\n\t\t\teffect.nodes_start = effect.nodes_end = null;\n\t\t}\n\n\t\tif (value === '') return;\n\n\t\tif (hydrating) {\n\t\t\t// We're deliberately not trying to repair mismatches between server and client,\n\t\t\t// as it's costly and error-prone (and it's an edge case to have a mismatch anyway)\n\t\t\tvar hash = /** @type {Comment} */ (hydrate_node).data;\n\t\t\tvar next = hydrate_next();\n\t\t\tvar last = next;\n\n\t\t\twhile (next !== null && (next.nodeType !== 8 || /** @type {Comment} */ (next).data !== '')) {\n\t\t\t\tlast = next;\n\t\t\t\tnext = /** @type {TemplateNode} */ (get_next_sibling(next));\n\t\t\t}\n\n\t\t\tif (next === null) {\n\t\t\t\tw.hydration_mismatch();\n\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t}\n\n\t\t\tif (DEV && !skip_warning) {\n\t\t\t\tcheck_hash(/** @type {Element} */ (next.parentNode), hash, value);\n\t\t\t}\n\n\t\t\tassign_nodes(hydrate_node, last);\n\t\t\tanchor = set_hydrate_node(next);\n\t\t\treturn;\n\t\t}\n\n\t\tvar html = value + '';\n\t\tif (svg) html = `<svg>${html}</svg>`;\n\t\telse if (mathml) html = `<math>${html}</math>`;\n\n\t\t// Don't use create_fragment_with_script_from_html here because that would mean script tags are executed.\n\t\t// @html is basically `.innerHTML = ...` and that doesn't execute scripts either due to security reasons.\n\t\t/** @type {DocumentFragment | Element} */\n\t\tvar node = create_fragment_from_html(html);\n\n\t\tif (svg || mathml) {\n\t\t\tnode = /** @type {Element} */ (get_first_child(node));\n\t\t}\n\n\t\tassign_nodes(\n\t\t\t/** @type {TemplateNode} */ (get_first_child(node)),\n\t\t\t/** @type {TemplateNode} */ (node.lastChild)\n\t\t);\n\n\t\tif (svg || mathml) {\n\t\t\twhile (get_first_child(node)) {\n\t\t\t\tanchor.before(/** @type {Node} */ (get_first_child(node)));\n\t\t\t}\n\t\t} else {\n\t\t\tanchor.before(node);\n\t\t}\n\t});\n}\n","/** @import { Raf } from '#client' */\nimport { noop } from '../shared/utils.js';\n\nimport { BROWSER } from 'esm-env';\n\nconst now = BROWSER ? () => performance.now() : () => Date.now();\n\n/** @type {Raf} */\nexport const raf = {\n\t// don't access requestAnimationFrame eagerly outside method\n\t// this allows basic testing of user code without JSDOM\n\t// bunder will eval and remove ternary when the user's app is built\n\ttick: /** @param {any} _ */ (_) => (BROWSER ? requestAnimationFrame : noop)(_),\n\tnow: () => now(),\n\ttasks: new Set()\n};\n","/** @import { TaskCallback, Task, TaskEntry } from '#client' */\nimport { raf } from './timing.js';\n\n// TODO move this into timing.js where it probably belongs\n\n/**\n * @returns {void}\n */\nfunction run_tasks() {\n\t// use `raf.now()` instead of the `requestAnimationFrame` callback argument, because\n\t// otherwise things can get wonky https://github.com/sveltejs/svelte/pull/14541\n\tconst now = raf.now();\n\n\traf.tasks.forEach((task) => {\n\t\tif (!task.c(now)) {\n\t\t\traf.tasks.delete(task);\n\t\t\ttask.f();\n\t\t}\n\t});\n\n\tif (raf.tasks.size !== 0) {\n\t\traf.tick(run_tasks);\n\t}\n}\n\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n * @param {TaskCallback} callback\n * @returns {Task}\n */\nexport function loop(callback) {\n\t/** @type {TaskEntry} */\n\tlet task;\n\n\tif (raf.tasks.size === 0) {\n\t\traf.tick(run_tasks);\n\t}\n\n\treturn {\n\t\tpromise: new Promise((fulfill) => {\n\t\t\traf.tasks.add((task = { c: callback, f: fulfill }));\n\t\t}),\n\t\tabort() {\n\t\t\traf.tasks.delete(task);\n\t\t}\n\t};\n}\n","import { noop } from '../../../shared/utils.js';\nimport { user_pre_effect } from '../../reactivity/effects.js';\nimport { on } from '../elements/events.js';\n\n/**\n * Substitute for the `trusted` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function trusted(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\tif (event.isTrusted) {\n\t\t\t// @ts-ignore\n\t\t\tfn?.apply(this, args);\n\t\t}\n\t};\n}\n\n/**\n * Substitute for the `self` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function self(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\t// @ts-ignore\n\t\tif (event.target === this) {\n\t\t\t// @ts-ignore\n\t\t\tfn?.apply(this, args);\n\t\t}\n\t};\n}\n\n/**\n * Substitute for the `stopPropagation` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function stopPropagation(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn?.apply(this, args);\n\t};\n}\n\n/**\n * Substitute for the `once` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function once(fn) {\n\tvar ran = false;\n\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\n\t\t// @ts-ignore\n\t\treturn fn?.apply(this, args);\n\t};\n}\n\n/**\n * Substitute for the `stopImmediatePropagation` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function stopImmediatePropagation(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn?.apply(this, args);\n\t};\n}\n\n/**\n * Substitute for the `preventDefault` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function preventDefault(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn?.apply(this, args);\n\t};\n}\n\n/**\n * Substitute for the `passive` event modifier, implemented as an action\n * @deprecated\n * @param {HTMLElement} node\n * @param {[event: string, handler: () => EventListener]} options\n */\nexport function passive(node, [event, handler]) {\n\tuser_pre_effect(() => {\n\t\treturn on(node, event, handler() ?? noop, {\n\t\t\tpassive: true\n\t\t});\n\t});\n}\n\n/**\n * Substitute for the `nonpassive` event modifier, implemented as an action\n * @deprecated\n * @param {HTMLElement} node\n * @param {[event: string, handler: () => EventListener]} options\n */\nexport function nonpassive(node, [event, handler]) {\n\tuser_pre_effect(() => {\n\t\treturn on(node, event, handler() ?? noop, {\n\t\t\tpassive: false\n\t\t});\n\t});\n}\n","export const prerender = true;","/**\n * @param {any} obj\n * @returns {obj is Date}\n */\nexport function is_date(obj) {\n\treturn Object.prototype.toString.call(obj) === '[object Date]';\n}\n","/** @import { Task } from '#client' */\n/** @import { SpringOpts, SpringUpdateOpts, TickContext } from './private.js' */\n/** @import { Spring as SpringStore } from './public.js' */\nimport { writable } from '../store/shared/index.js';\nimport { loop } from '../internal/client/loop.js';\nimport { raf } from '../internal/client/timing.js';\nimport { is_date } from './utils.js';\nimport { set, source } from '../internal/client/reactivity/sources.js';\nimport { render_effect } from '../internal/client/reactivity/effects.js';\nimport { get } from '../internal/client/runtime.js';\nimport { deferred, noop } from '../internal/shared/utils.js';\n\n/**\n * @template T\n * @param {TickContext} ctx\n * @param {T} last_value\n * @param {T} current_value\n * @param {T} target_value\n * @returns {T}\n */\nfunction tick_spring(ctx, last_value, current_value, target_value) {\n\tif (typeof current_value === 'number' || is_date(current_value)) {\n\t\t// @ts-ignore\n\t\tconst delta = target_value - current_value;\n\t\t// @ts-ignore\n\t\tconst velocity = (current_value - last_value) / (ctx.dt || 1 / 60); // guard div by 0\n\t\tconst spring = ctx.opts.stiffness * delta;\n\t\tconst damper = ctx.opts.damping * velocity;\n\t\tconst acceleration = (spring - damper) * ctx.inv_mass;\n\t\tconst d = (velocity + acceleration) * ctx.dt;\n\t\tif (Math.abs(d) < ctx.opts.precision && Math.abs(delta) < ctx.opts.precision) {\n\t\t\treturn target_value; // settled\n\t\t} else {\n\t\t\tctx.settled = false; // signal loop to keep ticking\n\t\t\t// @ts-ignore\n\t\t\treturn is_date(current_value) ? new Date(current_value.getTime() + d) : current_value + d;\n\t\t}\n\t} else if (Array.isArray(current_value)) {\n\t\t// @ts-ignore\n\t\treturn current_value.map((_, i) =>\n\t\t\t// @ts-ignore\n\t\t\ttick_spring(ctx, last_value[i], current_value[i], target_value[i])\n\t\t);\n\t} else if (typeof current_value === 'object') {\n\t\tconst next_value = {};\n\t\tfor (const k in current_value) {\n\t\t\t// @ts-ignore\n\t\t\tnext_value[k] = tick_spring(ctx, last_value[k], current_value[k], target_value[k]);\n\t\t}\n\t\t// @ts-ignore\n\t\treturn next_value;\n\t} else {\n\t\tthrow new Error(`Cannot spring ${typeof current_value} values`);\n\t}\n}\n\n/**\n * The spring function in Svelte creates a store whose value is animated, with a motion that simulates the behavior of a spring. This means when the value changes, instead of transitioning at a steady rate, it \"bounces\" like a spring would, depending on the physics parameters provided. This adds a level of realism to the transitions and can enhance the user experience.\n *\n * @deprecated Use [`Spring`](https://svelte.dev/docs/svelte/svelte-motion#Spring) instead\n * @template [T=any]\n * @param {T} [value]\n * @param {SpringOpts} [opts]\n * @returns {SpringStore<T>}\n */\nexport function spring(value, opts = {}) {\n\tconst store = writable(value);\n\tconst { stiffness = 0.15, damping = 0.8, precision = 0.01 } = opts;\n\t/** @type {number} */\n\tlet last_time;\n\t/** @type {Task | null} */\n\tlet task;\n\t/** @type {object} */\n\tlet current_token;\n\n\tlet last_value = /** @type {T} */ (value);\n\tlet target_value = /** @type {T | undefined} */ (value);\n\n\tlet inv_mass = 1;\n\tlet inv_mass_recovery_rate = 0;\n\tlet cancel_task = false;\n\t/**\n\t * @param {T} new_value\n\t * @param {SpringUpdateOpts} opts\n\t * @returns {Promise<void>}\n\t */\n\tfunction set(new_value, opts = {}) {\n\t\ttarget_value = new_value;\n\t\tconst token = (current_token = {});\n\t\tif (value == null || opts.hard || (spring.stiffness >= 1 && spring.damping >= 1)) {\n\t\t\tcancel_task = true; // cancel any running animation\n\t\t\tlast_time = raf.now();\n\t\t\tlast_value = new_value;\n\t\t\tstore.set((value = target_value));\n\t\t\treturn Promise.resolve();\n\t\t} else if (opts.soft) {\n\t\t\tconst rate = opts.soft === true ? 0.5 : +opts.soft;\n\t\t\tinv_mass_recovery_rate = 1 / (rate * 60);\n\t\t\tinv_mass = 0; // infinite mass, unaffected by spring forces\n\t\t}\n\t\tif (!task) {\n\t\t\tlast_time = raf.now();\n\t\t\tcancel_task = false;\n\t\t\ttask = loop((now) => {\n\t\t\t\tif (cancel_task) {\n\t\t\t\t\tcancel_task = false;\n\t\t\t\t\ttask = null;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tinv_mass = Math.min(inv_mass + inv_mass_recovery_rate, 1);\n\n\t\t\t\t// clamp elapsed time to 1/30th of a second, so that longer pauses\n\t\t\t\t// (blocked thread or inactive tab) don't cause the spring to go haywire\n\t\t\t\tconst elapsed = Math.min(now - last_time, 1000 / 30);\n\n\t\t\t\t/** @type {TickContext} */\n\t\t\t\tconst ctx = {\n\t\t\t\t\tinv_mass,\n\t\t\t\t\topts: spring,\n\t\t\t\t\tsettled: true,\n\t\t\t\t\tdt: (elapsed * 60) / 1000\n\t\t\t\t};\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst next_value = tick_spring(ctx, last_value, value, target_value);\n\t\t\t\tlast_time = now;\n\t\t\t\tlast_value = /** @type {T} */ (value);\n\t\t\t\tstore.set((value = /** @type {T} */ (next_value)));\n\t\t\t\tif (ctx.settled) {\n\t\t\t\t\ttask = null;\n\t\t\t\t}\n\t\t\t\treturn !ctx.settled;\n\t\t\t});\n\t\t}\n\t\treturn new Promise((fulfil) => {\n\t\t\t/** @type {Task} */ (task).promise.then(() => {\n\t\t\t\tif (token === current_token) fulfil();\n\t\t\t});\n\t\t});\n\t}\n\t/** @type {SpringStore<T>} */\n\t// @ts-expect-error - class-only properties are missing\n\tconst spring = {\n\t\tset,\n\t\tupdate: (fn, opts) => set(fn(/** @type {T} */ (target_value), /** @type {T} */ (value)), opts),\n\t\tsubscribe: store.subscribe,\n\t\tstiffness,\n\t\tdamping,\n\t\tprecision\n\t};\n\treturn spring;\n}\n\n/**\n * A wrapper for a value that behaves in a spring-like fashion. Changes to `spring.target` will cause `spring.current` to\n * move towards it over time, taking account of the `spring.stiffness` and `spring.damping` parameters.\n *\n * ```svelte\n * <script>\n * \timport { Spring } from 'svelte/motion';\n *\n * \tconst spring = new Spring(0);\n * </script>\n *\n * <input type=\"range\" bind:value={spring.target} />\n * <input type=\"range\" bind:value={spring.current} disabled />\n * ```\n * @template T\n * @since 5.8.0\n */\nexport class Spring {\n\t#stiffness = source(0.15);\n\t#damping = source(0.8);\n\t#precision = source(0.01);\n\n\t#current = source(/** @type {T} */ (undefined));\n\t#target = source(/** @type {T} */ (undefined));\n\n\t#last_value = /** @type {T} */ (undefined);\n\t#last_time = 0;\n\n\t#inverse_mass = 1;\n\t#momentum = 0;\n\n\t/** @type {import('../internal/client/types').Task | null} */\n\t#task = null;\n\n\t/** @type {ReturnType<typeof deferred> | null} */\n\t#deferred = null;\n\n\t/**\n\t * @param {T} value\n\t * @param {SpringOpts} [options]\n\t */\n\tconstructor(value, options = {}) {\n\t\tthis.#current.v = this.#target.v = value;\n\n\t\tif (typeof options.stiffness === 'number') this.#stiffness.v = clamp(options.stiffness, 0, 1);\n\t\tif (typeof options.damping === 'number') this.#damping.v = clamp(options.damping, 0, 1);\n\t\tif (typeof options.precision === 'number') this.#precision.v = options.precision;\n\t}\n\n\t/**\n\t * Create a spring whose value is bound to the return value of `fn`. This must be called\n\t * inside an effect root (for example, during component initialisation).\n\t *\n\t * ```svelte\n\t * <script>\n\t * \timport { Spring } from 'svelte/motion';\n\t *\n\t * \tlet { number } = $props();\n\t *\n\t * \tconst spring = Spring.of(() => number);\n\t * </script>\n\t * ```\n\t * @template U\n\t * @param {() => U} fn\n\t * @param {SpringOpts} [options]\n\t */\n\tstatic of(fn, options) {\n\t\tconst spring = new Spring(fn(), options);\n\n\t\trender_effect(() => {\n\t\t\tspring.set(fn());\n\t\t});\n\n\t\treturn spring;\n\t}\n\n\t/** @param {T} value */\n\t#update(value) {\n\t\tset(this.#target, value);\n\n\t\tthis.#current.v ??= value;\n\t\tthis.#last_value ??= this.#current.v;\n\n\t\tif (!this.#task) {\n\t\t\tthis.#last_time = raf.now();\n\n\t\t\tvar inv_mass_recovery_rate = 1000 / (this.#momentum * 60);\n\n\t\t\tthis.#task ??= loop((now) => {\n\t\t\t\tthis.#inverse_mass = Math.min(this.#inverse_mass + inv_mass_recovery_rate, 1);\n\n\t\t\t\t// clamp elapsed time to 1/30th of a second, so that longer pauses\n\t\t\t\t// (blocked thread or inactive tab) don't cause the spring to go haywire\n\t\t\t\tconst elapsed = Math.min(now - this.#last_time, 1000 / 30);\n\n\t\t\t\t/** @type {import('./private').TickContext} */\n\t\t\t\tconst ctx = {\n\t\t\t\t\tinv_mass: this.#inverse_mass,\n\t\t\t\t\topts: {\n\t\t\t\t\t\tstiffness: this.#stiffness.v,\n\t\t\t\t\t\tdamping: this.#damping.v,\n\t\t\t\t\t\tprecision: this.#precision.v\n\t\t\t\t\t},\n\t\t\t\t\tsettled: true,\n\t\t\t\t\tdt: (elapsed * 60) / 1000\n\t\t\t\t};\n\n\t\t\t\tvar next = tick_spring(ctx, this.#last_value, this.#current.v, this.#target.v);\n\t\t\t\tthis.#last_value = this.#current.v;\n\t\t\t\tthis.#last_time = now;\n\t\t\t\tset(this.#current, next);\n\n\t\t\t\tif (ctx.settled) {\n\t\t\t\t\tthis.#task = null;\n\t\t\t\t}\n\n\t\t\t\treturn !ctx.settled;\n\t\t\t});\n\t\t}\n\n\t\treturn this.#task.promise;\n\t}\n\n\t/**\n\t * Sets `spring.target` to `value` and returns a `Promise` that resolves if and when `spring.current` catches up to it.\n\t *\n\t * If `options.instant` is `true`, `spring.current` immediately matches `spring.target`.\n\t *\n\t * If `options.preserveMomentum` is provided, the spring will continue on its current trajectory for\n\t * the specified number of milliseconds. This is useful for things like 'fling' gestures.\n\t *\n\t * @param {T} value\n\t * @param {SpringUpdateOpts} [options]\n\t */\n\tset(value, options) {\n\t\tthis.#deferred?.reject(new Error('Aborted'));\n\n\t\tif (options?.instant || this.#current.v === undefined) {\n\t\t\tthis.#task?.abort();\n\t\t\tthis.#task = null;\n\t\t\tset(this.#current, set(this.#target, value));\n\t\t\tthis.#last_value = value;\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tif (options?.preserveMomentum) {\n\t\t\tthis.#inverse_mass = 0;\n\t\t\tthis.#momentum = options.preserveMomentum;\n\t\t}\n\n\t\tvar d = (this.#deferred = deferred());\n\t\td.promise.catch(noop);\n\n\t\tthis.#update(value).then(() => {\n\t\t\tif (d !== this.#deferred) return;\n\t\t\td.resolve(undefined);\n\t\t});\n\n\t\treturn d.promise;\n\t}\n\n\tget current() {\n\t\treturn get(this.#current);\n\t}\n\n\tget damping() {\n\t\treturn get(this.#damping);\n\t}\n\n\tset damping(v) {\n\t\tset(this.#damping, clamp(v, 0, 1));\n\t}\n\n\tget precision() {\n\t\treturn get(this.#precision);\n\t}\n\n\tset precision(v) {\n\t\tset(this.#precision, v);\n\t}\n\n\tget stiffness() {\n\t\treturn get(this.#stiffness);\n\t}\n\n\tset stiffness(v) {\n\t\tset(this.#stiffness, clamp(v, 0, 1));\n\t}\n\n\tget target() {\n\t\treturn get(this.#target);\n\t}\n\n\tset target(v) {\n\t\tthis.set(v);\n\t}\n}\n\n/**\n * @param {number} n\n * @param {number} min\n * @param {number} max\n */\nfunction clamp(n, min, max) {\n\treturn Math.max(min, Math.min(max, n));\n}\n","import type { NormalisedClient } from './types.js';\n\n/**\n * check if the value is a finite number\n * @param value the value to check\n * @returns true if the value is a finite number\n */\nexport function isFiniteNumber(value: number): value is number {\n  return typeof value === 'number' && !isNaN(value) && isFinite(value);\n}\n\n/**\n * make sure the value is coerced to a float value\n * @param {number|string} value the value to fix\n * @param {number} precision the number of decimal places to fix to\n * @return {number} a float version of the input\n **/\nexport const coerceFloat = (value: number | string, precision: number = 2) => {\n  return parseFloat((+value).toFixed(precision));\n};\n\n/**\n * clamp a value from a range so that it always\n * falls within the min/max values\n * @param {number} value the value to clamp\n * @param {number} min the minimum value\n * @param {number} max the maximum value\n * @return {number} the value after it's been clamped\n **/\nexport const clampValue = function (value: number, min: number, max: number) {\n  // return the min/max if outside of that range\n  return value <= min ? min : value >= max ? max : value;\n};\n\n/**\n * take in a value, and then calculate that value's percentage\n * of the overall range (min-max);\n * @param {number} value the value we're getting percent for\n * @param {number} min the minimum value\n * @param {number} max the maximum value\n * @param {number} precision the number of decimal places to fix to (default 2)\n * @return {number} the percentage value\n **/\nexport const valueAsPercent = function (value: number, min: number, max: number, precision: number = 2) {\n  let percent = ((value - min) / (max - min)) * 100;\n  if (isNaN(percent) || percent <= 0) {\n    return 0;\n  } else if (percent >= 100) {\n    return 100;\n  } else {\n    return coerceFloat(percent, precision);\n  }\n};\n\n/**\n * convert a percentage to a value\n * @param {number} percent the percentage to convert\n * @param {number} min the minimum value\n * @param {number} max the maximum value\n * @return {number} the value after it's been converted\n **/\nexport const percentAsValue = function (percent: number, min: number, max: number) {\n  return ((max - min) / 100) * percent + min;\n};\n\n/**\n * align the value with the steps so that it\n * always sits on the closest (above/below) step\n * @param {number} value the value to align\n * @param {number} min the minimum value\n * @param {number} max the maximum value\n * @param {number} step the step value\n * @param {number} precision the number of decimal places to fix to\n * @param {number[]} limits the limits to check against\n * @return {number} the value after it's been aligned\n **/\nexport const constrainAndAlignValue = function (\n  value: number,\n  min: number,\n  max: number,\n  step: number,\n  precision: number = 2,\n  limits: [number, number] | null = null\n) {\n  value = isFiniteNumber(value) ? value : limits?.[0] ?? min;\n\n  // if limits are provided, clamp the value between the limits\n  // if no limits are provided, clamp the value between the min and max\n  // before we start aligning the value\n  if (value <= (limits?.[0] ?? min) || value >= (limits?.[1] ?? max)) {\n    return (value = clampValue(value, limits?.[0] ?? min, limits?.[1] ?? max));\n  }\n\n  // find the middle-point between steps\n  // and see if the value is closer to the\n  // next step, or previous step\n  let remainder = (value - min) % step;\n  let aligned = value - remainder;\n  if (Math.abs(remainder) * 2 >= step) {\n    aligned += remainder > 0 ? step : -step;\n  } else if (value >= max - remainder) {\n    aligned = max;\n  }\n\n  // make sure the value is within acceptable limits\n  aligned = clampValue(aligned, limits?.[0] ?? min, limits?.[1] ?? max);\n  // make sure the returned value is set to the precision desired\n  // this is also because javascript often returns weird floats\n  // when dealing with odd numbers and percentages\n  return coerceFloat(aligned, precision);\n};\n\n/**\n * helper to take a string of html and return only the text\n * @param {string} possibleHtml the string that may contain html\n * @return {string} the text from the input\n */\nexport const pureText = (possibleHtml: string = '') => {\n  return `${possibleHtml}`.replace(/<[^>]*>/g, '');\n};\n\n/**\n * normalise a mouse or touch event to return the\n * client (x/y) object for that event\n * @param {event} event a mouse/touch event to normalise\n * @returns {object} normalised event client object (x,y)\n **/\nexport const normalisedClient = (event: TouchEvent | MouseEvent) => {\n  const { clientX, clientY } = 'touches' in event ? event.touches[0] || event.changedTouches[0] : event;\n  return { x: clientX, y: clientY } as NormalisedClient;\n};\n\n/**\n * helper func to get the index of an element in it's DOM container\n * @param {Element} el dom object reference we want the index of\n * @returns {number} the index of the input element\n **/\nexport const elementIndex = (el: Element | null) => {\n  if (!el) return -1;\n  var i = 0;\n  while ((el = el.previousElementSibling)) {\n    i++;\n  }\n  return i;\n};\n\n/**\n * helper to check if the given value is inside the range\n * @param value the value to check\n * @param range the range of values to check against\n * @param type the type of range to check against\n * @returns {boolean} true if the value is in the range\n */\nexport const isInRange = (value: number, range: number[], type: string | boolean) => {\n  if (type === 'min') {\n    // if the range is 'min', then we're checking if the value is above the min value\n    return range[0] > value;\n  } else if (type === 'max') {\n    // if the range is 'max', then we're checking if the value is below the max value\n    return range[0] < value;\n  } else if (type) {\n    // if the range is a boolean of true, then we're checking if the value is in the range\n    return range[0] < value && range[1] > value;\n  }\n};\n\n/**\n * helper to check if the given value is outside of the limits\n * @param value the value to check\n * @param limits the limits to check against\n * @returns {boolean} true if the value is out of the limits\n */\nexport const isOutOfLimit = (value: number, limits: number[] | null) => {\n  if (!limits) return false;\n  return value < limits[0] || value > limits[1];\n};\n\n/**\n * helper to check if the given value is selected\n * @param value the value to check if is selected\n * @param values the values to check against\n * @param precision the precision to check against\n * @returns {boolean} true if the value is selected\n */\nexport const isSelected = (value: number, values: number[], precision: number = 2) => {\n  return values.some((v) => coerceFloat(v, precision) === coerceFloat(value, precision));\n};\n\n/**\n * helper to return the value of a pip based on the index, and the min/max values,\n * and the step of the range slider\n * @param index  the index of the pip\n * @param min  the minimum value of the range slider\n * @param max the maximum value of the range slider\n * @param pipStep the step of the pips\n * @param step the step of the range slider\n * @param precision the precision to check against\n * @returns {number} the value of the pip\n */\nexport const getValueFromIndex = (\n  index: number,\n  min: number,\n  max: number,\n  pipStep: number,\n  step: number,\n  precision: number = 2\n) => {\n  return coerceFloat(min + index * step * pipStep, precision);\n};\n\n/**\n * Calculate pointer position, percentage and value for a slider interaction\n * @param clientPos The normalized client position (x,y)\n * @param dims The slider's bounding rectangle dimensions\n * @param vertical Whether the slider is vertical\n * @param reversed Whether the slider is reversed\n * @param min The minimum value of the slider\n * @param max The maximum value of the slider\n * @returns Object containing pointer position, percentage and value\n */\nexport const calculatePointerValues = (\n  slider: HTMLElement,\n  clientPos: NormalisedClient,\n  vertical: boolean,\n  reversed: boolean,\n  min: number,\n  max: number\n) => {\n  // first make sure we have the latest dimensions\n  // of the slider, as it may have changed size\n  const dims = slider.getBoundingClientRect();\n\n  // calculate the interaction position, percent and value\n  let pointerPos = 0;\n  let pointerPercent = 0;\n  let pointerVal = 0;\n\n  if (vertical) {\n    pointerPos = clientPos.y - dims.top;\n    pointerPercent = (pointerPos / dims.height) * 100;\n    pointerPercent = reversed ? pointerPercent : 100 - pointerPercent;\n  } else {\n    pointerPos = clientPos.x - dims.left;\n    pointerPercent = (pointerPos / dims.width) * 100;\n    pointerPercent = reversed ? 100 - pointerPercent : pointerPercent;\n  }\n  pointerVal = percentAsValue(pointerPercent, min, max);\n\n  return { pointerVal, pointerPercent };\n};","<script lang=\"ts\">\n  import {\n    coerceFloat,\n    valueAsPercent,\n    normalisedClient,\n    isInRange,\n    isSelected,\n    getValueFromIndex,\n    isOutOfLimit\n  } from '$lib/utils.js';\n  import type { Pip, Formatter, NormalisedClient } from '$lib/types.js';\n\n  // range slider props\n  export let range: boolean | 'min' | 'max' = false;\n  export let min: number = 0;\n  export let max: number = 100;\n  export let step: number = 1;\n  export let value: number = (max + min) / 2;\n  export let values: number[] = [value];\n  export let vertical: boolean = false;\n  export let reversed: boolean = false;\n  export let hoverable: boolean = true;\n  export let disabled: boolean = false;\n  export let limits: null | [number, number] = null;\n\n  // range pips / values props\n  export let pipstep: number | undefined = undefined;\n  export let all: Pip = true;\n  export let first: Pip = undefined;\n  export let last: Pip = undefined;\n  export let rest: Pip = undefined;\n\n  // formatting props\n  export let prefix: string = '';\n  export let suffix: string = '';\n  export let formatter: Formatter = (v, i, p) => v;\n  export let precision: number = 2;\n\n  // stylistic props\n  export let focus: boolean;\n  export let orientationStart: 'left' | 'right' | 'top' | 'bottom';\n\n  // methods\n  export let moveHandle: (index: number | null, value: number) => void;\n\n  let clientStart: null | NormalisedClient = null;\n\n  // by default we would like to show maximum of 50 pips vertically and 100 horizontally\n  $: stepMax = vertical ? 50 : 100;\n  // track if the amount of steps calculated is greater than the max we'd like to show\n  $: tooManySteps = (max - min) / step >= stepMax;\n\n  // track the number of pips we're actually going to render\n  let pipCount = 0;\n  const limitPipCount = 500;\n  // track the final pipstep we're going to use\n  let finalPipStep = 1;\n\n  $: {\n    // if no pipstep is provided, we use a sensible default (respecting the stepMax check)\n    finalPipStep = pipstep ?? (tooManySteps ? (max - min) / (stepMax / 5) : 1);\n    pipCount = Math.ceil((max - min) / (step * finalPipStep));\n    // there's no way a browser can render over thousands of pips without performance issues,\n    // so we should limit and warn the user if they're trying to render too many\n    if (pipCount > limitPipCount) {\n      console.warn(\n        'RangePips: You are trying to render too many pips. This will cause performance issues. Try increasing the \"pipstep\" prop to reduce the number of pips shown.'\n      );\n      // start increasing the finalPipStep until we get a pipCount below limitPipCount\n      while (pipCount >= limitPipCount) {\n        finalPipStep = finalPipStep + finalPipStep;\n        pipCount = Math.ceil((max - min) / (step * finalPipStep));\n      }\n    }\n  }\n\n  /**\n   * function to run when the user clicks on a label\n   * we store the original client position so we can check if the user has moved the mouse/finger\n   * @param {event} event the event from browser\n   **/\n  function labelDown(event: PointerEvent) {\n    clientStart = normalisedClient(event);\n  }\n\n  /**\n   * function to run when the user releases the mouse/finger\n   * we check if the user has moved the mouse/finger, if not we \"click\" the label\n   * and move the handle it to the label position\n   * @param {number} pipValue the value of the label\n   * @param {event} e the event from browser\n   */\n  function labelUp(pipValue: number, event: PointerEvent) {\n    const clientEnd = normalisedClient(event);\n    if (!disabled && clientStart) {\n      const distanceMoved = Math.sqrt(\n        Math.pow(clientStart.x - clientEnd.x, 2) + Math.pow(clientStart.y - clientEnd.y, 2)\n      );\n      if (distanceMoved <= 5) {\n        moveHandle(null, pipValue);\n      }\n      clientStart = null;\n    }\n  }\n</script>\n\n<div\n  class=\"rangePips\"\n  class:rsDisabled={disabled}\n  class:rsHoverable={hoverable}\n  class:rsVertical={vertical}\n  class:rsReversed={reversed}\n  class:rsFocus={focus}\n>\n  {#if (all && first !== false) || first}\n    <span\n      class=\"rsPip rsPip--first\"\n      class:rsSelected={isSelected(min, values, precision)}\n      class:rsInRange={isInRange(min, values, range)}\n      class:rsOutOfLimit={isOutOfLimit(min, limits)}\n      style=\"{orientationStart}: 0%;\"\n      data-val={coerceFloat(min, precision)}\n      data-index={0}\n      on:pointerdown={(e) => {\n        labelDown(e);\n      }}\n      on:pointerup={(e) => {\n        labelUp(min, e);\n      }}\n    >\n      {#if all === 'label' || first === 'label'}\n        <span class=\"rsPipVal\">\n          {#if prefix}<span class=\"rsPipValPrefix\">{prefix}</span>{/if}\n          {@html formatter(coerceFloat(min, precision), 0, 0)}\n          {#if suffix}<span class=\"rsPipValSuffix\">{suffix}</span>{/if}\n        </span>\n      {/if}\n    </span>\n  {/if}\n\n  {#if (all && rest !== false) || rest}\n    {#each Array(pipCount) as _, i}\n      {@const val = getValueFromIndex(i, min, max, finalPipStep, step, precision)}\n      {#if val > min && val < max}\n        <span\n          class=\"rsPip\"\n          class:rsSelected={isSelected(val, values, precision)}\n          class:rsInRange={isInRange(val, values, range)}\n          class:rsOutOfLimit={isOutOfLimit(val, limits)}\n          style=\"{orientationStart}: {valueAsPercent(val, min, max, precision)}%;\"\n          data-val={val}\n          data-index={i}\n          on:pointerdown={(e) => {\n            labelDown(e);\n          }}\n          on:pointerup={(e) => {\n            labelUp(val, e);\n          }}\n        >\n          {#if all === 'label' || rest === 'label'}\n            <span class=\"rsPipVal\">\n              {#if prefix}<span class=\"rsPipValPrefix\">{prefix}</span>{/if}\n              {@html formatter(val, i, valueAsPercent(val, min, max, precision))}\n              {#if suffix}<span class=\"rsPipValSuffix\">{suffix}</span>{/if}\n            </span>\n          {/if}\n        </span>\n      {/if}\n    {/each}\n  {/if}\n\n  {#if (all && last !== false) || last}\n    <span\n      class=\"rsPip rsPip--last\"\n      class:rsSelected={isSelected(max, values, precision)}\n      class:rsInRange={isInRange(max, values, range)}\n      class:rsOutOfLimit={isOutOfLimit(max, limits)}\n      style=\"{orientationStart}: 100%;\"\n      data-val={coerceFloat(max, precision)}\n      data-index={pipCount}\n      on:pointerdown={(e) => {\n        labelDown(e);\n      }}\n      on:pointerup={(e) => {\n        labelUp(max, e);\n      }}\n    >\n      {#if all === 'label' || last === 'label'}\n        <span class=\"rsPipVal\">\n          {#if prefix}<span class=\"rsPipValPrefix\">{prefix}</span>{/if}\n          {@html formatter(coerceFloat(max, precision), pipCount, 100)}\n          {#if suffix}<span class=\"rsPipValSuffix\">{suffix}</span>{/if}\n        </span>\n      {/if}\n    </span>\n  {/if}\n</div>\n\n<style>\n  /**\n   * RangePips\n   */\n\n  :global(.rangePips) {\n    --pip: var(--range-pip, var(--slider-base));\n    --pip-text: var(--range-pip-text, var(--pip));\n    --pip-active: var(--range-pip-active, var(--slider-fg));\n    --pip-active-text: var(--range-pip-active-text, var(--pip-active));\n    --pip-hover: var(--range-pip-hover, var(--slider-fg));\n    --pip-hover-text: var(--range-pip-hover-text, var(--pip-hover));\n    --pip-in-range: var(--range-pip-in-range, var(--pip-active));\n    --pip-in-range-text: var(--range-pip-in-range-text, var(--pip-active-text));\n    --pip-out-of-limit: var(--range-pip-out-of-limit, var(--slider-base-100));\n    --pip-out-of-limit-text: var(--range-pip-out-of-limit-text, var(--pip-out-of-limit));\n  }\n\n  :global(.rangePips) {\n    position: absolute;\n    transform: translate3d(0, 0, 0.001px);\n    height: 1em;\n    left: 0;\n    right: 0;\n    bottom: -1em;\n    font-variant-numeric: tabular-nums;\n  }\n\n  :global(.rangePips.rsVertical) {\n    height: auto;\n    width: 1em;\n    left: 100%;\n    right: auto;\n    top: 0;\n    bottom: 0;\n  }\n\n  :global(.rangePips .rsPip) {\n    height: 0.4em;\n    position: absolute;\n    top: 0.25em;\n    width: 1px;\n    white-space: nowrap;\n    transform: translate3d(0, 0, 0.001px);\n  }\n\n  :global(.rangePips.rsVertical .rsPip) {\n    height: 1px;\n    width: 0.4em;\n    left: 0.25em;\n    top: auto;\n    bottom: auto;\n  }\n\n  :global(.rangePips .rsPipVal) {\n    position: absolute;\n    top: 0.4em;\n    transform: translate(-50%, 25%);\n    display: inline-flex;\n  }\n\n  :global(.rangePips.rsVertical .rsPipVal) {\n    position: absolute;\n    top: 0;\n    left: 0.4em;\n    transform: translate(25%, -50%);\n  }\n\n  :global(.rangePips .rsPip) {\n    transition: all 0.15s ease;\n  }\n\n  :global(.rangePips .rsPipVal) {\n    transition:\n      all 0.15s ease,\n      font-weight 0s linear;\n  }\n\n  :global(.rangePips .rsPip) {\n    color: var(--pip-text);\n    background-color: var(--pip);\n  }\n\n  :global(.rangePips .rsPip.rsSelected) {\n    color: var(--pip-active-text);\n    background-color: var(--pip-active);\n  }\n\n  :global(.rangePips.rsHoverable:not(.rsDisabled) .rsPip:not(.rsOutOfLimit):hover) {\n    color: var(--pip-hover-text);\n    background-color: var(--pip-hover);\n  }\n\n  :global(.rangePips .rsPip.rsInRange) {\n    color: var(--pip-in-range-text);\n    background-color: var(--pip-in-range);\n  }\n\n  :global(.rangePips .rsPip.rsOutOfLimit) {\n    color: var(--pip-out-of-limit-text);\n    background-color: var(--pip-out-of-limit);\n  }\n\n  :global(.rangePips .rsPip.rsSelected) {\n    height: 0.75em;\n  }\n\n  :global(.rangePips.rsVertical .rsPip.rsSelected) {\n    height: 1px;\n    width: 0.75em;\n  }\n\n  :global(.rangePips .rsPip.rsSelected .rsPipVal) {\n    font-weight: bold;\n    top: 0.75em;\n  }\n\n  :global(.rangePips.rsVertical .rsPip.rsSelected .rsPipVal) {\n    top: 0;\n    left: 0.75em;\n  }\n\n  :global(.rangePips.rsHoverable:not(.rsDisabled) .rsPip:not(.rsSelected):not(.rsOutOfLimit):hover) {\n    transition: none;\n  }\n\n  :global(.rangePips.rsHoverable:not(.rsDisabled) .rsPip:not(.rsSelected):not(.rsOutOfLimit):hover .rsPipVal) {\n    transition: none;\n    font-weight: bold;\n  }\n</style>","<svelte:options immutable={false} />\n\n<script lang=\"ts\">\n  import { type SpringOpts, type Spring, spring as springStore } from 'svelte/motion';\n  import { createEventDispatcher, onMount } from 'svelte';\n  import {\n    isFiniteNumber,\n    coerceFloat,\n    valueAsPercent,\n    clampValue,\n    constrainAndAlignValue,\n    pureText,\n    normalisedClient,\n    elementIndex,\n    percentAsValue,\n    calculatePointerValues\n  } from '$lib/utils.js';\n  import type { Pip, Formatter, NormalisedClient, RangeFormatter } from '$lib/types.js';\n\n  import RangePips from './RangePips.svelte';\n\n  // dom references\n  export let slider: HTMLDivElement | undefined = undefined;\n\n  // precision prop\n  export let precision: number = 2;\n\n  // range slider props\n  export let range: boolean | 'min' | 'max' = false;\n  export let pushy: boolean = false;\n  export let draggy: boolean = false;\n  export let min: number = 0;\n  export let max: number = 100;\n  export let step: number = 1;\n  export let values: number[] = [coerceFloat((max + min) / 2, precision)];\n  export let value: number = values[0];\n  export let vertical: boolean = false;\n  export let float: boolean = false;\n  export let rangeFloat: boolean = false;\n  export let reversed: boolean = false;\n  export let hoverable: boolean = true;\n  export let disabled: boolean = false;\n  export let limits: null | [number, number] = null;\n  export let rangeGapMin: number = 0;\n  export let rangeGapMax: number = Infinity;\n\n  // range pips / values props\n  export let pips: boolean = false;\n  export let pipstep: number | undefined = undefined;\n  export let all: Pip = true;\n  export let first: Pip = undefined;\n  export let last: Pip = undefined;\n  export let rest: Pip = undefined;\n\n  // formatting props\n  export let prefix: string = '';\n  export let suffix: string = '';\n  export let formatter: Formatter = (v, i, p) => v;\n  export let handleFormatter: Formatter = formatter;\n  export let rangeFormatter: RangeFormatter | null = null;\n  export let ariaLabels: string[] = [];\n\n  // stylistic props\n  export let id: string | undefined = undefined;\n  let classes = '';\n  export { classes as class };\n  export let style: string | undefined = undefined;\n  export let darkmode: false | 'auto' | 'force' = false;\n  export let springValues: SpringOpts = { stiffness: 0.15, damping: 0.4 };\n  export let spring = true;\n\n  // prepare dispatched events\n  const dispatch = createEventDispatcher();\n\n  // loading\n  let isMounted = false;\n\n  // state management\n  let valueLength = 0;\n  let focus = false;\n  let handleActivated = false;\n  let handlePressed = false;\n  let rangeActivated = false;\n  let rangePressed = false;\n  let rangeDistancesFromPointer = [1, 1];\n  let keyboardActive = false;\n  let activeHandle = -1;\n  let startValues: (number | undefined)[] = [];\n  let previousValues: (number | undefined)[] = [];\n  let sliderSize = 0;\n  let rangeSize = 0;\n  let rangeStart = 0;\n\n  // copy the initial values in to a spring function which\n  // will update every time the values array is modified\n  let springPositions: Spring<number[]>;\n\n  // check that \"values\" is an array, or set it as array\n  const updateValues = () => {\n    checkValuesIsArray();\n    // sync values with value\n    if (values[0] !== value) {\n      values[0] = value;\n    }\n  };\n\n  // check that \"value\" is a number, or set it as the first value in the values array\n  const updateValue = () => {\n    checkValueIsNumber();\n    // sync value with values\n    if (value !== values[0]) {\n      value = values[0];\n    }\n  };\n\n  const checkMinMax = () => {\n    if (!isFiniteNumber(min)) {\n      min = 0;\n      console.error(\"'min' prop must be a valid finite Number\");\n    }\n    if (!isFiniteNumber(max)) {\n      max = 100;\n      console.error(\"'max' prop must be a valid finite Number\");\n    }\n    if (min >= max) {\n      min = 0;\n      max = 100;\n      console.error(\"'min' prop should be less than 'max'\");\n    }\n    min = coerceFloat(min, precision);\n    max = coerceFloat(max, precision);\n  };\n\n  const checkValueIsNumber = () => {\n    if (!isFiniteNumber(value)) {\n      value = (max + min) / 2;\n      console.error(\"'value' prop should be a Number\");\n    }\n  };\n\n  const checkValuesIsArray = () => {\n    if (!Array.isArray(values)) {\n      values = [value];\n      console.error(\"'values' prop should be an Array\");\n    } else if (values.some((v) => !isFiniteNumber(v))) {\n      values = values.map((v) => (isFiniteNumber(v) ? v : (max + min) / 2));\n      console.error(\"'values' prop should be an Array of Numbers\");\n    }\n  };\n\n  const checkStep = () => {\n    if (!isFiniteNumber(step) || step <= 0) {\n      step = 1;\n      console.error(\"'step' prop must be a positive Number\");\n    }\n  };\n\n  const checkAriaLabels = () => {\n    if (values.length > 1 && !Array.isArray(ariaLabels)) {\n      ariaLabels = [];\n      console.warn(`'ariaLabels' prop should be an Array`);\n    }\n  };\n\n  const checkValuesAgainstRangeGaps = () => {\n    // first, align the values to the step\n    values = values.map((v) => constrainAndAlignValue(v, min, max, step, precision, limits));\n    // rangeGaps should be positive\n    if (rangeGapMin < 0) rangeGapMin = 0;\n    if (rangeGapMax < 0) rangeGapMax = Infinity;\n    // rangeGapMin must be less than rangeGapMax\n    if (rangeGapMin > rangeGapMax) rangeGapMin = rangeGapMax;\n    // then, check the values against the range gaps\n    if (rangeGapMax < Infinity) {\n      const gapMax = constrainAndAlignValue(values[0] + rangeGapMax, min, max, step, precision, limits);\n      if (values[1] > gapMax) {\n        values[1] = gapMax;\n      }\n    }\n    if (rangeGapMin > 0) {\n      const gapMin = constrainAndAlignValue(values[0] + rangeGapMin, min, max, step, precision, limits);\n      if (values[1] < gapMin) {\n        values[1] = gapMin;\n      }\n    }\n  };\n\n  const checkFormatters = () => {\n    if (formatter === null || formatter === undefined) {\n      console.error('formatter must be a function');\n      formatter = (v, i, p) => v;\n    }\n    if (handleFormatter === null || handleFormatter === undefined) {\n      console.error('handleFormatter must be a function');\n      handleFormatter = formatter;\n    }\n    if (rangeFormatter === undefined) {\n      console.error('rangeFormatter must be a function, or null');\n      rangeFormatter = null;\n    }\n  };\n\n  // fixup the value/values at render\n  checkMinMax();\n  checkValueIsNumber();\n  checkValuesIsArray();\n  checkStep();\n  checkValuesAgainstRangeGaps();\n  checkFormatters();\n\n  // keep value and values in sync with each other\n  $: value, updateValues();\n  $: values, updateValue();\n  $: ariaLabels, checkAriaLabels();\n  $: min, checkMinMax();\n  $: max, checkMinMax();\n  $: step, checkStep();\n  $: rangeGapMin, checkValuesAgainstRangeGaps();\n  $: rangeGapMax, checkValuesAgainstRangeGaps();\n  $: formatter, checkFormatters();\n  $: handleFormatter, checkFormatters();\n  $: rangeFormatter, checkFormatters();\n  $: springValues, updateSpringValues();\n  $: hasRange =\n    (range === true && values.length === 2) || ((range === 'min' || range === 'max') && values.length === 1);\n\n  $: ((uValues, uValue) => {\n    // if a range, then trim so it remains as a min/max (only 2 handles)\n    const trimmedValues = trimRange(uValues, range);\n    // and also align the handles to the steps/limits\n    const trimmedAlignedValues = trimmedValues.map((v) => constrainAndAlignValue(v, min, max, step, precision, limits));\n    // update the values if they needed to be fixed\n    if (\n      !(uValues.length === trimmedAlignedValues.length) ||\n      !uValues.every((item, i) => coerceFloat(item, precision) === trimmedAlignedValues[i])\n    ) {\n      uValues = trimmedAlignedValues;\n    }\n\n    // When the values array length changes, we must recreate the spring function\n    // because the spring store is bound to a specific array length. Attempting to\n    // update a spring with a different array size would cause errors or unexpected\n    // behavior. For existing arrays, we update the spring values for smooth animations.\n    if (valueLength !== uValues.length) {\n      // create spring if there's no spring yet, or length changed\n      createSpring(uValues);\n    } else if (slider) {\n      // only update the spring values if the slider is mounted\n      updateSpring(uValues);\n    }\n\n    // update the external values\n    values = uValues;\n\n    // set the valueLength for the next check\n    valueLength = uValues.length;\n  })(values, value);\n\n  /**\n   * create a spring function to animate the handles\n   * @param values the values to animate\n   */\n  const createSpring = (values: number[]) => {\n    springPositions = springStore(\n      values.map((v) => valueAsPercent(v, min, max)),\n      springValues\n    );\n  };\n\n  /**\n   * update the spring function to animate the handles\n   * @param values the values to animate\n   */\n  const updateSpring = (values: number[]) => {\n    requestAnimationFrame(() => {\n      springPositions.set(\n        values.map((v) => valueAsPercent(v, min, max)),\n        { hard: !spring }\n      );\n    });\n  };\n\n  /**\n   * update the spring values\n   */\n  const updateSpringValues = () => {\n    if (springPositions) {\n      springPositions.stiffness = springValues.stiffness ?? 0.15;\n      springPositions.damping = springValues.damping ?? 0.4;\n    }\n  };\n\n  /**\n   * the orientation of the handles/pips based on the\n   * input values of vertical and reversed\n   **/\n  $: orientationStart = vertical\n    ? reversed\n      ? 'top'\n      : 'bottom'\n    : reversed\n      ? 'right'\n      : ('left' as 'left' | 'right' | 'top' | 'bottom');\n  $: orientationEnd = vertical\n    ? reversed\n      ? 'bottom'\n      : 'top'\n    : reversed\n      ? 'left'\n      : ('right' as 'left' | 'right' | 'top' | 'bottom');\n\n  /**\n   * observe slider element size changes using ResizeObserver\n   * to update dimensions and recalculate handle positions\n   **/\n  function updateSliderSize(slider: HTMLDivElement | undefined) {\n    return requestAnimationFrame(() => {\n      if (slider) {\n        const dims = slider.getBoundingClientRect();\n        sliderSize = vertical ? dims.height : dims.width;\n      }\n    });\n  }\n\n  let resizeObserver: ResizeObserver;\n  let rafId: number;\n\n  onMount(() => {\n    if (slider) {\n      resizeObserver = new ResizeObserver((entries) => {\n        if (rafId) {\n          cancelAnimationFrame(rafId);\n        }\n        rafId = updateSliderSize(entries[0].target as HTMLDivElement);\n      }) as ResizeObserver;\n      resizeObserver.observe(slider);\n      setTimeout(() => {\n        isMounted = true;\n      }, 16);\n    }\n    return () => {\n      if (rafId) cancelAnimationFrame(rafId);\n      resizeObserver?.disconnect?.();\n      isMounted = false;\n    };\n  });\n\n  /**\n   * check if an element is a handle on the slider\n   * @param {object} el dom object reference we want to check\n   * @returns {boolean}\n   **/\n  function targetIsHandle(el: Element) {\n    if (!slider) return false;\n    const handles = slider.querySelectorAll('.handle');\n    const isHandle = Array.prototype.includes.call(handles, el);\n    const isChild = Array.prototype.some.call(handles, (e) => e.contains(el));\n    return isHandle || isChild;\n  }\n\n  /**\n   * trim the values array based on whether the property\n   * for 'range' is 'min', 'max', or truthy. This is because we\n   * do not want more than one handle for a min/max range, and we do\n   * not want more than two handles for a true range.\n   * @param {array} values the input values for the rangeSlider\n   * @param {boolean | 'min' | 'max'} range the range property of the rangeSlider\n   * @return {array} the range array for creating a rangeSlider\n   **/\n  function trimRange(values: number[], range: boolean | 'min' | 'max') {\n    if (range === 'min' || range === 'max') {\n      return values.slice(0, 1);\n    } else if (range) {\n      return values.slice(0, 2);\n    } else {\n      return values;\n    }\n  }\n\n  /**\n   * helper to return closest handle to user interaction\n   * @param {object} clientPos the client {x,y} positions to check against\n   * @return {number} the index of the closest handle to clientPos\n   **/\n  function getClosestHandle(clientPos: NormalisedClient) {\n    if (!slider) return 0;\n\n    // get the location of the interaction on the slider as a value\n    const { pointerVal: clickedVal } = calculatePointerValues(slider, clientPos, vertical, reversed, min, max);\n\n    let closest = 0;\n    if (range === true && values[0] === values[1]) {\n      // if we have a range, and the handles are at the same\n      // position, we want a simple check if the interaction\n      // value is greater than return the second handle\n      if (clickedVal > values[1]) {\n        closest = 1;\n      } else {\n        closest = 0;\n      }\n    } else {\n      // if there are multiple handles, and not a range, then\n      // we sort the handles values, and return the first one closest\n      // to the interaction value\n      closest = values.indexOf([...values].sort((a, b) => Math.abs(clickedVal - a) - Math.abs(clickedVal - b))[0]);\n    }\n    return closest;\n  }\n\n  /**\n   * take the interaction position on the slider, convert\n   * it to a value on the range, and then send that value\n   * through to the moveHandle() method to set the active\n   * handle's position\n   * @param {object} clientPos the client {x,y} of the interaction\n   **/\n  function handleInteract(clientPos: NormalisedClient) {\n    if (!slider || !handleActivated) return;\n    // get the location of the interaction on the slider as a value\n    const { pointerVal: handleVal } = calculatePointerValues(slider, clientPos, vertical, reversed, min, max);\n    // move handle to the value\n    moveHandle(activeHandle, handleVal);\n  }\n\n  /**\n   * save the distance between the handles and the interaction position\n   * when the user first starts dragging the range\n   * @param {object} clientPos the client {x,y} of the interaction\n   */\n  function getRangeDistancesOnInteractionStart(clientPos: NormalisedClient) {\n    if (!slider || !draggy || !rangeActivated || range === 'min' || range === 'max') return;\n    // get the location of the interaction on the slider as a value\n    const { pointerVal } = calculatePointerValues(slider, clientPos, vertical, reversed, min, max);\n    // store the distances for later use\n    rangeDistancesFromPointer = [values[0] - pointerVal, values[1] - pointerVal];\n  }\n\n  /**\n   * take the interaction position on the slider, get the values of each handle\n   * then calculate the distance between the handles and the interaction position\n   * so when the user moves the range, each handle moves in the corresponding direction\n   * at the original distance from the interaction position\n   * @param {object} clientPos the client {x,y} of the interaction\n   */\n  function rangeInteract(clientPos: NormalisedClient) {\n    if (!slider || !draggy || !rangeActivated || range === 'min' || range === 'max') return;\n    // get the location of the interaction on the slider as a value\n    const { pointerVal } = calculatePointerValues(slider, clientPos, vertical, reversed, min, max);\n    // if dragging the range, we dont want to 'activate' a handle\n    activeHandle = -1;\n    // move the handles\n    moveHandle(0, pointerVal + rangeDistancesFromPointer[0], false);\n    moveHandle(1, pointerVal + rangeDistancesFromPointer[1], true);\n  }\n\n  /**\n   * move a handle to a specific value, respecting the clamp/align rules\n   * @param {number} index the index of the handle we want to move\n   * @param {number} value the value to move the handle to\n   * @param {boolean} fireEvent whether to fire the change event\n   * @return {number} the value that was moved to (after alignment/clamping)\n   **/\n  function moveHandle(index: number | null, value: number, fireEvent: boolean = true) {\n    // align & clamp the value so we're not doing extra\n    // calculation on an out-of-range value down below\n    value = constrainAndAlignValue(value, min, max, step, precision, limits);\n    // use the active handle if handle index is not provided\n    if (index === null) {\n      index = activeHandle;\n    }\n    // if this is a range slider perform special checks\n    if (range === true) {\n      // restrict the handles of a range-slider from\n      // going past one-another unless \"pushy\" is true\n      if (index === 0) {\n        if (value > values[1] - rangeGapMin) {\n          if (pushy && value <= (limits?.[1] ?? max) - rangeGapMin) {\n            values[1] = value + rangeGapMin;\n          } else {\n            value = values[1] - rangeGapMin;\n          }\n        } else if (value < values[1] - rangeGapMax) {\n          if (pushy) {\n            values[1] = value + rangeGapMax;\n          } else {\n            value = values[1] - rangeGapMax;\n          }\n        }\n      } else if (index === 1) {\n        if (value < values[0] + rangeGapMin) {\n          if (pushy && value >= (limits?.[0] ?? min) + rangeGapMin) {\n            values[0] = value - rangeGapMin;\n          } else {\n            value = values[0] + rangeGapMin;\n          }\n        } else if (value > values[0] + rangeGapMax) {\n          if (pushy) {\n            values[0] = value - rangeGapMax;\n          } else {\n            value = values[0] + rangeGapMax;\n          }\n        }\n      }\n    }\n\n    // if the value has changed, update it\n    if (values[index] !== value) {\n      values[index] = constrainAndAlignValue(value, min, max, step, precision, limits);\n    }\n    if (fireEvent) {\n      fireChangeEvent(values);\n    }\n    return value;\n  }\n\n  /**\n   *\n   */\n  function fireChangeEvent(values: number[]) {\n    // Check if any value has changed by comparing each element\n    const hasChanged =\n      previousValues.some((prev, index) => {\n        return prev !== values[index];\n      }) || previousValues.length !== values.length;\n\n    if (hasChanged) {\n      eChange();\n      previousValues = [...values];\n    }\n  }\n\n  /**\n   * helper to find the beginning range value for use with css style\n   * @param {array} values the input values for the rangeSlider\n   * @return {number} the beginning of the range as a percentage of the total range\n   **/\n  function rangeStartPercent(values: number[]) {\n    if (range === 'min') {\n      return 0;\n    } else {\n      return values[0];\n    }\n  }\n\n  /**\n   * helper to find the ending range value for use with css style\n   * @param {array} values the input values for the rangeSlider\n   * @return {number} the end of the range as a percentage of the total range\n   **/\n  function rangeEndPercent(values: number[]) {\n    if (range === 'max') {\n      return 100;\n    } else if (range === 'min') {\n      return values[0];\n    } else {\n      return values[1];\n    }\n  }\n\n  /**\n   * when the user has unfocussed (blurred) from the\n   * slider, deactivate all handles\n   * @param {FocusEvent} event the event from browser\n   **/\n  function sliderBlurHandle(event: FocusEvent) {\n    const target = event.target as HTMLSpanElement;\n    if (keyboardActive) {\n      focus = false;\n      handleActivated = false;\n      handlePressed = false;\n      rangeActivated = false;\n      rangePressed = false;\n    }\n  }\n\n  /**\n   * when the user focusses the handle of a slider\n   * set it to be active\n   * @param {FocusEvent} event the event from browser\n   **/\n  function sliderFocusHandle(event: FocusEvent) {\n    const target = event.target as HTMLSpanElement;\n    if (!disabled) {\n      activeHandle = elementIndex(target);\n      focus = true;\n    }\n  }\n\n  /**\n   * handle the keyboard accessible features by checking the\n   * input type, and modfier key then moving handle by appropriate amount\n   * @param {KeyboardEvent} event the event from browser\n   **/\n  function sliderKeydown(event: KeyboardEvent) {\n    if (!disabled) {\n      let prevent = false;\n      const handle = elementIndex(event.target as HTMLSpanElement);\n      let jump = step;\n      if (event.ctrlKey || event.metaKey) {\n        // Move by 1% of the total range, but ensure it's aligned to step\n        const onePercent = (max - min) / 100;\n        jump = Math.max(step, Math.round(onePercent / step) * step);\n      } else if (event.shiftKey || event.key === 'PageUp' || event.key === 'PageDown') {\n        // Move by 10% of the total range, but ensure it's aligned to step\n        const tenPercent = (max - min) / 10;\n        jump = Math.max(step, Math.round(tenPercent / step) * step);\n      }\n\n      switch (event.key) {\n        case 'PageUp':\n        case 'ArrowRight':\n        case 'ArrowUp':\n          setStartAndPreviousValues();\n          moveHandle(handle, values[handle] + jump);\n          prevent = true;\n          break;\n        case 'PageDown':\n        case 'ArrowLeft':\n        case 'ArrowDown':\n          setStartAndPreviousValues();\n          moveHandle(handle, values[handle] - jump);\n          prevent = true;\n          break;\n        case 'Home':\n          setStartAndPreviousValues();\n          moveHandle(handle, min);\n          prevent = true;\n          break;\n        case 'End':\n          setStartAndPreviousValues();\n          moveHandle(handle, max);\n          prevent = true;\n          break;\n      }\n      if (prevent) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  }\n\n  /**\n   * set the start and previous values to the current values when the user interacts with the slider\n   */\n  function setStartAndPreviousValues() {\n    startValues = values.map((v) => constrainAndAlignValue(v, min, max, step, precision, limits));\n    previousValues = [...startValues];\n  }\n\n  /**\n   * function to run when the user touches\n   * down on the slider element anywhere\n   * @param {MouseEvent | TouchEvent} event the event from browser\n   **/\n  function sliderInteractStart(event: MouseEvent | TouchEvent) {\n    if (!disabled) {\n      const target = event.target as Element;\n      const clientPos = normalisedClient(event);\n      // set the closest handle as active\n      focus = true;\n\n      if (target.matches('.rangeBar') && range === true && draggy) {\n        handleActivated = false;\n        handlePressed = false;\n        activeHandle = -1;\n        rangeActivated = true;\n        rangePressed = true;\n        getRangeDistancesOnInteractionStart(clientPos);\n      } else {\n        handleActivated = true;\n        handlePressed = true;\n        activeHandle = getClosestHandle(clientPos);\n        // for touch devices we want the handle to instantly\n        // move to the position touched for more responsive feeling\n        if (event.type === 'touchstart' && !target.closest('.rsPipVal')) {\n          handleInteract(clientPos);\n        }\n      }\n      setStartAndPreviousValues();\n      eStart();\n    }\n  }\n\n  /**\n   * function to run when the user stops touching\n   * down on the slider element anywhere\n   * @param {event} e the event from browser\n   **/\n  function sliderInteractEnd(event: MouseEvent | TouchEvent) {\n    // fire the stop event for touch devices\n    if (event.type === 'touchend') {\n      eStop();\n    }\n    handlePressed = false;\n    rangePressed = false;\n  }\n\n  /**\n   * unfocus the slider if the user clicked off of\n   * it, somewhere else on the screen\n   * @param {MouseEvent | TouchEvent} event the event from browser\n   **/\n  function bodyInteractStart(event: MouseEvent | TouchEvent) {\n    const target = event.target as Element;\n    keyboardActive = false;\n    if (slider && focus && target !== slider && !slider.contains(target)) {\n      focus = false;\n    }\n  }\n\n  /**\n   * send the clientX through to handle the interaction\n   * whenever the user moves acros screen while active\n   * @param {MouseEvent | TouchEvent} event the event from browser\n   **/\n  function bodyInteract(event: MouseEvent | TouchEvent) {\n    if (!disabled) {\n      if (handleActivated) {\n        handleInteract(normalisedClient(event));\n      } else if (rangeActivated) {\n        rangeInteract(normalisedClient(event));\n      }\n    }\n  }\n\n  /**\n   * if user triggers mouseup on the body while\n   * a handle is active (without moving) then we\n   * trigger an interact event there\n   * @param {event} event the event from browser\n   **/\n  function bodyMouseUp(event: MouseEvent) {\n    if (!disabled) {\n      const target = event.target as Element;\n      // this only works if a handle is active, which can\n      // only happen if there was sliderInteractStart triggered\n      // on the slider, already\n      if (handleActivated) {\n        if (slider && (target === slider || slider.contains(target))) {\n          focus = true;\n          // don't trigger interact if the target is a handle (no need) or\n          // if the target is a label (we want to move to that value from rangePips)\n          if (!targetIsHandle(target) && !target.closest('.rsPipVal')) {\n            handleInteract(normalisedClient(event));\n          }\n        }\n      }\n      if (handleActivated || rangeActivated) {\n        // fire the stop event for mouse device\n        // when the body is triggered with an active handle/range\n        eStop();\n      }\n    }\n    handleActivated = false;\n    handlePressed = false;\n    rangeActivated = false;\n    rangePressed = false;\n  }\n\n  /**\n   * if user triggers touchend on the body then we\n   * defocus the slider completely\n   * @param {event} event the event from browser\n   **/\n  function bodyTouchEnd(event: TouchEvent) {\n    handleActivated = false;\n    handlePressed = false;\n    rangeActivated = false;\n    rangePressed = false;\n  }\n\n  function bodyKeyDown(event: KeyboardEvent) {\n    const target = event.target as Element;\n    if (!disabled && slider) {\n      if (target === slider || slider.contains(target)) {\n        keyboardActive = true;\n      }\n    }\n  }\n\n  function eStart() {\n    if (disabled) return;\n    dispatch('start', {\n      activeHandle,\n      value: startValues[activeHandle],\n      values: startValues\n    });\n  }\n\n  function eStop() {\n    if (disabled) return;\n    const startValue = rangeActivated ? startValues : startValues[activeHandle];\n    dispatch('stop', {\n      activeHandle,\n      startValue,\n      value: values[activeHandle],\n      values: values.map((v) => constrainAndAlignValue(v, min, max, step, precision, limits))\n    });\n  }\n\n  function eChange() {\n    if (disabled) return;\n    const startValue = rangeActivated ? startValues : startValues[activeHandle];\n    const previousValue =\n      previousValues.length === 0 ? startValue : rangeActivated ? previousValues : previousValues[activeHandle];\n    dispatch('change', {\n      activeHandle,\n      startValue,\n      previousValue,\n      value: values[activeHandle],\n      values: values.map((v) => constrainAndAlignValue(v, min, max, step, precision, limits))\n    });\n  }\n\n  function ariaLabelFormatter(value: number, index: number) {\n    const percent = valueAsPercent(value, min, max, precision);\n    const formattedValue = handleFormatter(value, index, percent);\n    const textLabel = pureText(String(formattedValue));\n    return `${prefix}${textLabel}${suffix}`;\n  }\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div\n  {id}\n  bind:this={slider}\n  role=\"none\"\n  class=\"rangeSlider {classes}\"\n  class:rsDark={darkmode === 'force'}\n  class:rsAutoDark={darkmode === 'auto'}\n  class:rsRange={hasRange}\n  class:rsDrag={hasRange && draggy}\n  class:rsMin={hasRange && range === 'min'}\n  class:rsMax={hasRange && range === 'max'}\n  class:rsDisabled={disabled}\n  class:rsHoverable={hoverable}\n  class:rsVertical={vertical}\n  class:rsReversed={reversed}\n  class:rsFocus={focus}\n  class:rsPips={pips}\n  class:rsPipLabels={all === 'label' || first === 'label' || last === 'label' || rest === 'label'}\n  style={`--slider-length: ${sliderSize};${style ?? ''}`}\n  on:mousedown={sliderInteractStart}\n  on:mouseup={sliderInteractEnd}\n  on:touchstart|preventDefault={sliderInteractStart}\n  on:touchend|preventDefault={sliderInteractEnd}\n>\n  {#each values as value, index}\n    {@const zindex = focus && activeHandle === index ? `z-index: 3; ` : ``}\n    {@const mountOpacity = isMounted ? `` : `opacity: 0; `}\n    <span\n      role=\"slider\"\n      class=\"rangeHandle\"\n      class:rsActive={focus && activeHandle === index}\n      class:rsPress={handlePressed && activeHandle === index}\n      data-handle={index}\n      on:blur={sliderBlurHandle}\n      on:focus={sliderFocusHandle}\n      on:keydown={sliderKeydown}\n      style={`--handle-pos: ${$springPositions[index]};${zindex}${mountOpacity}`}\n      aria-label={ariaLabels[index]}\n      aria-valuemin={range === true && index === 1 ? values[0] : min}\n      aria-valuemax={range === true && index === 0 ? values[1] : max}\n      aria-valuenow={value}\n      aria-valuetext={ariaLabelFormatter(value, index)}\n      aria-orientation={vertical ? 'vertical' : 'horizontal'}\n      aria-disabled={disabled}\n      tabindex={disabled ? -1 : 0}\n    >\n      <span class=\"rangeNub\"></span>\n      {#if float}\n        {@const percent = valueAsPercent(value, min, max, precision)}\n        {@const formattedValue = handleFormatter(value, index, percent)}\n        <span class=\"rangeFloat\">\n          {#if prefix}<span class=\"rangeFloatPrefix\">{prefix}</span>{/if}{@html formattedValue}{#if suffix}<span\n              class=\"rangeFloatSuffix\">{suffix}</span\n            >{/if}\n        </span>\n      {/if}\n    </span>\n  {/each}\n  {#if limits}\n    <span\n      class=\"rangeLimit\"\n      style=\"{orientationStart}: {valueAsPercent(limits[0], min, max, precision)}%;\n             {orientationEnd}: {100 - valueAsPercent(limits[1], min, max, precision)}%;\"\n    ></span>\n  {/if}\n  {#if hasRange}\n    {@const rangeStart = rangeStartPercent($springPositions)}\n    {@const rangeEnd = rangeEndPercent($springPositions)}\n    {@const rangeSize = rangeEnd - rangeStart}\n    {@const mountOpacity = isMounted ? `` : `opacity: 0; `}\n    <span\n      class=\"rangeBar\"\n      class:rsPress={rangePressed}\n      style={`--range-start:${rangeStart};--range-end:${rangeEnd};--range-size:${rangeSize};${mountOpacity};`}\n    >\n      {#if rangeFloat}\n        {@const rangeMin = range === 'min' ? min : values[0]}\n        {@const rangeMax = range === 'max' ? max : range === 'min' ? values[0] : values[1]}\n        {@const [first, second] = reversed ? [rangeMax, rangeMin] : [rangeMin, rangeMax]}\n        <span class=\"rangeFloat\">\n          {#if rangeFormatter}\n            {@html rangeFormatter(\n              first,\n              second,\n              valueAsPercent(first, min, max, precision),\n              valueAsPercent(second, min, max, precision)\n            )}\n          {:else}\n            {#if prefix}<span class=\"rangeFloatPrefix\">{prefix}</span>{/if}{@html first}{#if suffix}<span\n                class=\"rangeFloatSuffix\">{suffix}</span\n              >{/if}\n            {' '}-{' '}\n            {#if prefix}<span class=\"rangeFloatPrefix\">{prefix}</span>{/if}{@html second}{#if suffix}<span\n                class=\"rangeFloatSuffix\">{suffix}</span\n              >{/if}\n          {/if}\n        </span>\n      {/if}\n    </span>\n  {/if}\n  {#if pips}\n    <RangePips\n      {values}\n      {min}\n      {max}\n      {step}\n      {range}\n      {vertical}\n      {reversed}\n      {orientationStart}\n      {hoverable}\n      {disabled}\n      {limits}\n      {all}\n      {first}\n      {last}\n      {rest}\n      {pipstep}\n      {prefix}\n      {suffix}\n      {formatter}\n      {precision}\n      {focus}\n      {moveHandle}\n    />\n  {/if}\n</div>\n\n<svelte:window\n  on:mousedown={bodyInteractStart}\n  on:touchstart={bodyInteractStart}\n  on:mousemove={bodyInteract}\n  on:touchmove={bodyInteract}\n  on:mouseup={bodyMouseUp}\n  on:touchend={bodyTouchEnd}\n  on:keydown={bodyKeyDown}\n/>\n\n<style>\n  /**\n   * RangeSlider\n   */\n\n  @layer base {\n    :global(.rangeSlider) {\n      /* light mode (default) */\n      --slider-light-accent: #d440c8;\n      --slider-light-accent-100: #e483e7;\n      --slider-light-accent-text: #ffffff;\n      --slider-light-base: #826788;\n      --slider-light-base-100: #b9c2c2;\n      --slider-light-bg: #caa9cb;\n      --slider-light-fg: #79426b;\n\n      /* dark mode */\n      --slider-dark-accent: #e260fc;\n      --slider-dark-accent-100: #ab7aa9;\n      --slider-dark-accent-text: #ffffff;\n      --slider-dark-base: #926590;\n      --slider-dark-base-100: #595868;\n      --slider-dark-bg: #5a205a;\n      --slider-dark-fg: #d7dada;\n\n      /* set the variables to light mode by default */\n      --slider-accent: var(--slider-light-accent);\n      --slider-accent-100: var(--slider-light-accent-100);\n      --slider-accent-text: var(--slider-light-accent-text);\n      --slider-base: var(--slider-light-base);\n      --slider-base-100: var(--slider-light-base-100);\n      --slider-bg: var(--slider-light-bg);\n      --slider-fg: var(--slider-light-fg);\n\n      /* apply theme variables to all the component's parts */\n      --slider: var(--range-slider, var(--slider-bg));\n      --handle-inactive: var(--range-handle-inactive, var(--slider-base));\n      --handle: var(--range-handle, var(--slider-accent-100));\n      --handle-focus: var(--range-handle-focus, var(--slider-accent));\n      --handle-border: var(--range-handle-border, var(--handle));\n      --range-inactive: var(--range-range-inactive, var(--handle-inactive));\n      --range: var(--range-range, var(--handle-focus));\n      --range-limit: var(--range-range-limit, var(--slider-base-100));\n      --range-hover: var(--range-range-hover, var(--handle-border));\n      --range-press: var(--range-range-press, var(--handle-border));\n      --float-inactive: var(--range-float-inactive, var(--handle-inactive));\n      --float: var(--range-float, var(--handle-focus));\n      --float-text: var(--range-float-text, var(--slider-accent-text));\n    }\n\n    /* set the variables to dark mode (forced) */\n    :global(.rangeSlider.rsDark) {\n      --slider-accent: var(--slider-dark-accent);\n      --slider-accent-100: var(--slider-dark-accent-100);\n      --slider-accent-text: var(--slider-dark-accent-text);\n      --slider-base: var(--slider-dark-base);\n      --slider-base-100: var(--slider-dark-base-100);\n      --slider-bg: var(--slider-dark-bg);\n      --slider-fg: var(--slider-dark-fg);\n    }\n\n    /* set the variables to dark mode (user-preference) */\n    @media (prefers-color-scheme: dark) {\n      :global(.rangeSlider.rsAutoDark) {\n        --slider-accent: var(--slider-dark-accent);\n        --slider-accent-100: var(--slider-dark-accent-100);\n        --slider-accent-text: var(--slider-dark-accent-text);\n        --slider-base: var(--slider-dark-base);\n        --slider-base-100: var(--slider-dark-base-100);\n        --slider-bg: var(--slider-dark-bg);\n        --slider-fg: var(--slider-dark-fg);\n      }\n    }\n  }\n\n  :global(.rangeSlider) {\n    position: relative;\n    border-radius: 100px;\n    height: 0.5em;\n    margin: 1em;\n    transition: opacity 0.2s ease;\n    user-select: none;\n    overflow: visible;\n  }\n\n  :global(.rangeSlider *) {\n    user-select: none;\n  }\n\n  :global(.rangeSlider.rsPips) {\n    margin-bottom: 1.8em;\n  }\n\n  :global(.rangeSlider.rsPipLabels) {\n    margin-bottom: 2.8em;\n  }\n\n  :global(.rangeSlider.rsVertical) {\n    display: inline-block;\n    border-radius: 100px;\n    width: 0.5em;\n    min-height: 200px;\n  }\n\n  :global(.rangeSlider.rsVertical.rsPips) {\n    margin-right: 1.8em;\n    margin-bottom: 1em;\n  }\n\n  :global(.rangeSlider.rsVertical.rsPipLabels) {\n    margin-right: 2.8em;\n    margin-bottom: 1em;\n  }\n\n  :global(.rangeSlider .rangeHandle) {\n    position: absolute;\n    display: block;\n    height: 1.4em;\n    width: 1.4em;\n    top: 0.25em;\n    bottom: auto;\n    transform: translateY(-50%) translateX(-50%);\n    translate: calc(var(--slider-length) * (var(--handle-pos) / 100) * 1px) 0;\n    z-index: 2;\n  }\n\n  :global(.rangeSlider.rsReversed .rangeHandle) {\n    transform: translateY(-50%) translateX(-50%);\n    translate: calc((var(--slider-length) * 1px) - (var(--slider-length) * (var(--handle-pos) / 100) * 1px)) 0;\n  }\n\n  :global(.rangeSlider.rsVertical .rangeHandle) {\n    left: 0.25em;\n    top: auto;\n    transform: translateY(-50%) translateX(-50%);\n    translate: 0 calc(var(--slider-length) * (1 - var(--handle-pos) / 100) * 1px);\n  }\n\n  :global(.rangeSlider.rsVertical.rsReversed .rangeHandle) {\n    transform: translateY(-50%) translateX(-50%);\n    translate: 0 calc((var(--slider-length) * 1px) - (var(--slider-length) * (1 - var(--handle-pos) / 100) * 1px));\n  }\n\n  :global(.rangeSlider .rangeNub),\n  :global(.rangeSlider .rangeHandle::before) {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: block;\n    border-radius: 10em;\n    height: 100%;\n    width: 100%;\n    transition:\n      background 0.2s ease,\n      box-shadow 0.2s ease;\n  }\n\n  :global(.rangeSlider .rangeHandle::before) {\n    content: '';\n    left: 1px;\n    top: 1px;\n    bottom: 1px;\n    right: 1px;\n    height: auto;\n    width: auto;\n    box-shadow: 0 0 0 0px var(--handle-border);\n    opacity: 0;\n    transition:\n      opacity 0.2s ease,\n      box-shadow 0.2s ease;\n  }\n\n  :global(.rangeSlider.rsHoverable:not(.rsDisabled) .rangeHandle:hover::before) {\n    box-shadow: 0 0 0 8px var(--handle-border);\n    opacity: 0.2;\n  }\n\n  :global(.rangeSlider.rsHoverable:not(.rsDisabled) .rangeHandle.rsPress::before),\n  :global(.rangeSlider.rsHoverable:not(.rsDisabled) .rangeHandle.rsPress:hover::before) {\n    box-shadow: 0 0 0 12px var(--handle-border);\n    opacity: 0.4;\n  }\n\n  :global(.rangeSlider.rsRange:not(.rsMin):not(.rsMax) .rangeNub) {\n    border-radius: 10em 10em 10em 1.6em;\n  }\n\n  :global(.rangeSlider.rsRange .rangeHandle:nth-of-type(1) .rangeNub) {\n    transform: rotate(-135deg);\n  }\n\n  :global(.rangeSlider.rsRange .rangeHandle:nth-of-type(2) .rangeNub) {\n    transform: rotate(45deg);\n  }\n\n  :global(.rangeSlider.rsRange.rsReversed .rangeHandle:nth-of-type(1) .rangeNub) {\n    transform: rotate(45deg);\n  }\n\n  :global(.rangeSlider.rsRange.rsReversed .rangeHandle:nth-of-type(2) .rangeNub) {\n    transform: rotate(-135deg);\n  }\n\n  :global(.rangeSlider.rsRange.rsVertical .rangeHandle:nth-of-type(1) .rangeNub) {\n    transform: rotate(135deg);\n  }\n\n  :global(.rangeSlider.rsRange.rsVertical .rangeHandle:nth-of-type(2) .rangeNub) {\n    transform: rotate(-45deg);\n  }\n\n  :global(.rangeSlider.rsRange.rsVertical.rsReversed .rangeHandle:nth-of-type(1) .rangeNub) {\n    transform: rotate(-45deg);\n  }\n\n  :global(.rangeSlider.rsRange.rsVertical.rsReversed .rangeHandle:nth-of-type(2) .rangeNub) {\n    transform: rotate(135deg);\n  }\n\n  :global(.rangeSlider .rangeFloat) {\n    display: block;\n    position: absolute;\n    left: 50%;\n    bottom: 3em;\n    font-size: 1em;\n    text-align: center;\n    pointer-events: none;\n    white-space: nowrap;\n    font-size: 1.2em;\n    line-height: 1;\n    padding: 0.33em 0.5em 0.5em;\n    border-radius: 0.5em;\n    z-index: 3;\n    opacity: 0;\n    translate: -50% -50% 0.01px;\n    scale: 1;\n    transform-origin: center;\n    transition: all 0.22s cubic-bezier(0.33, 1, 0.68, 1);\n  }\n\n  :global(.rangeSlider .rangeHandle.rsActive .rangeFloat),\n  :global(.rangeSlider.rsHoverable .rangeHandle:hover .rangeFloat),\n  :global(.rangeSlider.rsHoverable .rangeBar:hover .rangeFloat),\n  :global(.rangeSlider.rsFocus .rangeBar .rangeFloat) {\n    opacity: 1;\n    scale: 1;\n    translate: -50% 0% 0.01px;\n  }\n\n  :global(.rangeSlider .rangeBar .rangeFloat) {\n    bottom: 0.875em;\n    z-index: 2;\n  }\n\n  :global(.rangeSlider.rsVertical .rangeFloat) {\n    top: 50%;\n    bottom: auto;\n    left: auto;\n    right: 1.75em;\n    translate: -50% -50% 0.01px;\n  }\n\n  :global(.rangeSlider.rsVertical .rangeHandle.rsActive .rangeFloat),\n  :global(.rangeSlider.rsVertical.rsHoverable .rangeHandle:hover .rangeFloat),\n  :global(.rangeSlider.rsVertical.rsHoverable .rangeBar:hover .rangeFloat),\n  :global(.rangeSlider.rsVertical.rsFocus .rangeBar .rangeFloat) {\n    translate: 0% -50% 0.01px;\n  }\n\n  :global(.rangeSlider.rsVertical .rangeBar .rangeFloat) {\n    right: 0.875em;\n  }\n\n  :global(.rangeSlider .rangeBar),\n  :global(.rangeSlider .rangeLimit),\n  :global(.rangeSlider.rsDrag .rangeBar::before) {\n    position: absolute;\n    display: block;\n    transition: background 0.2s ease;\n    border-radius: 1em;\n    height: 0.5em;\n    top: 0;\n    user-select: none;\n    z-index: 1;\n  }\n\n  :global(.rangeSlider.rsVertical .rangeBar),\n  :global(.rangeSlider.rsVertical .rangeLimit),\n  :global(.rangeSlider.rsVertical.rsDrag .rangeBar::before) {\n    width: 0.5em;\n    height: auto;\n  }\n\n  :global(.rangeSlider .rangeBar) {\n    translate: calc((var(--slider-length) * (var(--range-start) / 100) * 1px)) 0;\n    width: calc(var(--slider-length) * (var(--range-size) / 100 * 1px));\n  }\n  :global(.rangeSlider.rsReversed .rangeBar) {\n    translate: calc((var(--slider-length) * 1px) - (var(--slider-length) * (var(--range-end) / 100) * 1px)) 0;\n  }\n\n  :global(.rangeSlider.rsVertical .rangeBar) {\n    translate: 0 calc((var(--slider-length) * 1px) - (var(--slider-length) * (var(--range-end) / 100) * 1px));\n    height: calc(var(--slider-length) * (var(--range-size) / 100 * 1px));\n  }\n\n  :global(.rangeSlider.rsVertical.rsReversed .rangeBar) {\n    translate: 0 calc((var(--slider-length) * (var(--range-start) / 100) * 1px));\n  }\n\n  :global(.rangeSlider.rsDrag .rangeBar::before) {\n    content: '';\n    inset: 0;\n    top: -0.5em;\n    bottom: -0.5em;\n    height: auto;\n    background-color: var(--range-hover);\n    opacity: 0;\n    scale: 1 0.5;\n    transition:\n      opacity 0.2s ease,\n      scale 0.2s ease;\n  }\n\n  :global(.rangeSlider.rsVertical.rsDrag .rangeBar::before) {\n    inset: 0;\n    left: -0.5em;\n    right: -0.5em;\n    width: auto;\n  }\n\n  :global(.rangeSlider.rsHoverable:not(.rsDisabled).rsDrag .rangeBar:hover::before) {\n    opacity: 0.2;\n    scale: 1 1;\n  }\n\n  :global(.rangeSlider.rsHoverable:not(.rsDisabled).rsDrag .rangeBar.rsPress::before) {\n    opacity: 0.4;\n    scale: 1 1.25;\n  }\n\n  :global(.rangeSlider.rsVertical.rsHoverable:not(.rsDisabled).rsDrag .rangeBar.rsPress::before) {\n    scale: 1.25 1;\n  }\n\n  :global(.rangeSlider) {\n    background-color: var(--slider);\n  }\n\n  :global(.rangeSlider .rangeBar) {\n    background-color: var(--range-inactive);\n  }\n\n  :global(.rangeSlider.rsFocus .rangeBar) {\n    background-color: var(--range);\n  }\n\n  :global(.rangeSlider .rangeLimit) {\n    background-color: var(--range-limit);\n  }\n\n  :global(.rangeSlider .rangeNub) {\n    background-color: var(--handle-inactive);\n  }\n\n  :global(.rangeSlider.rsFocus .rangeNub) {\n    background-color: var(--handle);\n  }\n\n  :global(.rangeSlider .rangeHandle.rsActive .rangeNub) {\n    background-color: var(--handle-focus);\n  }\n\n  :global(.rangeSlider .rangeFloat) {\n    color: var(--float-text);\n    background-color: var(--float-inactive);\n  }\n\n  :global(.rangeSlider.rsFocus .rangeFloat) {\n    background-color: var(--float);\n  }\n\n  :global(.rangeSlider.rsDisabled) {\n    opacity: 0.5;\n  }\n\n  :global(.rangeSlider.rsDisabled .rangeNub) {\n    background-color: var(--handle-inactive);\n  }\n\n  :global(.rangeSlider .rangeBar),\n  :global(.rangeSlider .rangeHandle) {\n    transition: opacity 0.2s ease;\n  }\n</style>","import template from './template.v1.json' with { type: \"json\" };\nimport packageInfo from '../package.json' with { type: \"json\" };\nimport { bigIntToVmNumber, binToNumberInt16LE, createVirtualMachineBch, deriveHdPublicKey, generateTransaction, hdPrivateKeyToP2pkhLockingBytecode, encodeLockingBytecodeP2pkh, hexToBin, verifyTransactionTokens, numberToBinInt16LE, lockingBytecodeToAddressContents, NonFungibleTokenCapability } from '@bitauth/libauth';\nimport { getAddress, getLibauthCompiler, getScriptHash, getTransactionFees, sumSourceOutputValue, sumSourceOutputTokenAmounts, sumOutputValue, } from '@unspent/tau';\nexport const BADGER = hexToBin('242f6ecedb404c743477e35b09733a56cacae34f3109d5cee1cbc1d5630affd7');\nexport const tBADGER = hexToBin('7003b9e854d2abc855b2c20c9734c3dfe4ec3a4de573f7ebb9ce1be527a5bb36');\nexport default class BadgerStake {\n    static USER_AGENT = packageInfo.name;\n    static tokenAware = true;\n    static template = template;\n    static compiler = getLibauthCompiler(this.template);\n    static vm = createVirtualMachineBch();\n    static getLockingBytecode(category = BADGER) {\n        if (typeof category == \"string\")\n            category = hexToBin(category);\n        const lockingBytecodeResult = this.compiler.generateBytecode({\n            data: {\n                \"bytecode\": {\n                    \"authentication_category\": new Uint8Array(category).reverse()\n                }\n            },\n            scriptId: 'lock'\n        });\n        if (!lockingBytecodeResult.success)\n            throw new Error('Failed to generate bytecode, script: , ' + JSON.stringify(lockingBytecodeResult, null, '  '));\n        return lockingBytecodeResult.bytecode;\n    }\n    /**\n     * Get cashaddress\n     *\n     * @param category - the category for badger tokens.\n     * @param reversed - whether to reverse the hash.\n     * @throws {Error} if transaction generation fails.\n     * @returns a cashaddress.\n     */\n    static getScriptHash(category, reversed = true) {\n        return getScriptHash(this.getLockingBytecode(category), reversed);\n    }\n    /**\n     * Get cashaddress\n     *\n     * @param category - the category for badger tokens.\n     * @param prefix - cashaddress prefix.\n     * @throws {Error} if transaction generation fails.\n     * @returns a cashaddress.\n     */\n    static getAddress(category = BADGER, prefix = \"bitcoincash\") {\n        return getAddress(this.getLockingBytecode(category), prefix, this.tokenAware);\n    }\n    static parseNFT(utxo) {\n        if (utxo.token_data?.nft?.capability == \"mutable\") {\n            return {\n                user_pkh: hexToBin(utxo.token_data?.nft?.commitment.slice(0, 40)),\n                stake: binToNumberInt16LE(hexToBin(utxo.token_data?.nft?.commitment.slice(-4))),\n                amount: parseInt(utxo.token_data?.amount)\n            };\n        }\n        else if (utxo.token_data?.nft?.capability == \"minting\") {\n            return {\n                admin_pkh: hexToBin(utxo.token_data?.nft?.commitment.slice(-40)),\n                fee: binToNumberInt16LE(hexToBin(utxo.token_data?.nft?.commitment.slice(0, 4))),\n                amount: parseInt(utxo.token_data?.amount)\n            };\n        }\n        else {\n            throw Error(\"Nft was not minting nor mutable\");\n        }\n    }\n    /**\n     * Encode an order on for an nft commitment\n     *\n     * @param commitment - nft commitment\n     * @returns the new commitment as a 40-byte stake data.\n     */\n    static encodeNFT(stake) {\n        if (stake.user_pkh !== undefined) {\n            stake = stake;\n            return new Uint8Array([\n                ...stake.user_pkh,\n                ...new Uint8Array(18),\n                ...numberToBinInt16LE(stake.stake)\n            ]);\n        }\n        else {\n            stake = stake;\n            return new Uint8Array([\n                ...numberToBinInt16LE(stake.fee),\n                ...new Uint8Array(18),\n                ...stake.admin_pkh\n            ]);\n        }\n    }\n    static encodeCommemorativeNFT(amount) {\n        return new Uint8Array([\n            ...new Uint8Array(2),\n            ...bigIntToVmNumber(amount)\n        ]);\n    }\n    static getSourceOutput(utxo) {\n        return {\n            lockingBytecode: this.getLockingBytecode(utxo.token_data?.category),\n            valueSatoshis: BigInt(utxo.value),\n            token: utxo.token_data ? {\n                category: hexToBin(utxo.token_data.category),\n                amount: BigInt(utxo.token_data.amount),\n                nft: utxo.token_data.nft ? {\n                    commitment: hexToBin(utxo.token_data.nft.commitment),\n                    capability: utxo.token_data.nft.capability,\n                } : undefined\n            } : undefined\n        };\n    }\n    static getAuthInput(utxo, req) {\n        let authCat = new Uint8Array(hexToBin(utxo.token_data?.category)).reverse();\n        return {\n            outpointIndex: utxo.tx_pos,\n            outpointTransactionHash: hexToBin(utxo.tx_hash),\n            sequenceNumber: 0,\n            unlockingBytecode: {\n                data: {\n                    \"bytecode\": {\n                        \"authentication_category\": authCat,\n                        \"amount\": bigIntToVmNumber(BigInt(Math.floor(req.amount))),\n                        \"stake_blocks\": bigIntToVmNumber(BigInt(req.stake)),\n                        \"user_pkh\": req.user_pkh\n                    }\n                },\n                compiler: this.compiler,\n                script: 'stake',\n                valueSatoshis: BigInt(utxo.value),\n                token: utxo.token_data ? {\n                    category: hexToBin(utxo.token_data.category),\n                    amount: BigInt(utxo.token_data.amount),\n                    nft: utxo.token_data.nft ? {\n                        commitment: hexToBin(utxo.token_data.nft.commitment),\n                        capability: utxo.token_data.nft.capability,\n                    } : undefined\n                } : undefined\n            },\n        };\n    }\n    static getAuthOutput(utxo, value, stake, fee) {\n        return {\n            lockingBytecode: this.getLockingBytecode(utxo.token_data?.category),\n            valueSatoshis: BigInt(utxo.value + fee),\n            token: utxo.token_data ? {\n                category: hexToBin(utxo.token_data.category),\n                amount: BigInt(utxo.token_data.amount) - BigInt(Math.floor(value / 100_000_000 * stake)),\n                nft: utxo.token_data.nft ? {\n                    commitment: hexToBin(utxo.token_data.nft.commitment),\n                    capability: utxo.token_data.nft.capability,\n                } : undefined\n            } : undefined\n        };\n    }\n    static getWalletSourceOutput(utxo, key, addressIndex = 0) {\n        const lockingBytecode = key ? hdPrivateKeyToP2pkhLockingBytecode({\n            addressIndex: addressIndex,\n            hdPrivateKey: key,\n            throwErrors: true\n        }) : Uint8Array.from(Array(33));\n        return {\n            lockingBytecode: lockingBytecode,\n            valueSatoshis: BigInt(utxo.value)\n        };\n    }\n    static getWalletInput(utxo, privateKey, addressIndex = 0) {\n        let unlockingData = privateKey ? {\n            compiler: this.compiler,\n            data: {\n                hdKeys: {\n                    addressIndex: addressIndex,\n                    hdPrivateKeys: {\n                        'wallet': privateKey\n                    },\n                }\n            },\n            script: 'wallet_unlock',\n            valueSatoshis: BigInt(utxo.value)\n        } : Uint8Array.from(Array());\n        return {\n            outpointIndex: utxo.tx_pos,\n            outpointTransactionHash: hexToBin(utxo.tx_hash),\n            sequenceNumber: 0,\n            unlockingBytecode: unlockingData,\n        };\n    }\n    // \n    static getUnlockInput(utxo) {\n        let req = this.parseNFT(utxo);\n        return {\n            outpointIndex: utxo.tx_pos,\n            outpointTransactionHash: hexToBin(utxo.tx_hash),\n            sequenceNumber: req.stake,\n            unlockingBytecode: {\n                data: {\n                    \"bytecode\": {\n                        \"authentication_category\": new Uint8Array(hexToBin(utxo.token_data.category)).reverse()\n                    }\n                },\n                compiler: this.compiler,\n                script: 'unlock',\n                valueSatoshis: BigInt(utxo.value),\n                token: utxo.token_data ? {\n                    category: hexToBin(utxo.token_data.category),\n                    amount: BigInt(utxo.token_data.amount),\n                    nft: utxo.token_data.nft ? {\n                        commitment: hexToBin(utxo.token_data.nft.commitment),\n                        capability: utxo.token_data.nft.capability,\n                    } : undefined\n                } : undefined\n            },\n        };\n    }\n    static getLockOutput(authUtxo, stake) {\n        return {\n            lockingBytecode: this.getLockingBytecode(authUtxo.token_data?.category),\n            valueSatoshis: BigInt(stake.amount),\n            token: {\n                category: hexToBin(authUtxo.token_data?.category),\n                amount: BigInt(Math.floor(stake.amount / 100_000_000 * stake.stake)),\n                nft: {\n                    commitment: BadgerStake.encodeNFT(stake),\n                    capability: 'mutable',\n                }\n            }\n        };\n    }\n    static getUnlockOutputs(utxo) {\n        let req = this.parseNFT(utxo);\n        let lockingBytecode = encodeLockingBytecodeP2pkh(req.user_pkh);\n        return [\n            {\n                lockingBytecode: lockingBytecode,\n                valueSatoshis: 1000n,\n                token: utxo.token_data ? {\n                    category: hexToBin(utxo.token_data.category),\n                    amount: BigInt(utxo.token_data.amount),\n                    nft: undefined\n                } : undefined\n            },\n            {\n                lockingBytecode: lockingBytecode,\n                valueSatoshis: 1000n,\n                token: utxo.token_data ? {\n                    category: hexToBin(utxo.token_data.category),\n                    amount: BigInt(0),\n                    nft: utxo.token_data.nft ? {\n                        commitment: this.encodeCommemorativeNFT(BigInt(utxo.token_data.amount)),\n                        capability: NonFungibleTokenCapability.none,\n                    } : undefined\n                } : undefined\n            },\n            {\n                lockingBytecode: lockingBytecode,\n                valueSatoshis: BigInt(utxo.value - 3000)\n            }\n        ];\n    }\n    static getWalletInputs(utxos, amount, privateKey, sourceOutputs = []) {\n        let inputs = [];\n        let outputs = [];\n        // exclude utxos with tokens\n        utxos = utxos.filter(u => !u.token_data && u.value > amount);\n        // TODO: sort by highest value first\n        if (utxos.length == 0)\n            throw Error(\"no suitable output is large enough for the stake.\");\n        // get a random utxo.\n        const randomIdx = Math.floor(Math.random() * utxos.length);\n        const randomUtxo = utxos[randomIdx];\n        // remove the random utxo in place\n        utxos.splice(randomIdx, 1);\n        // spend the utxo\n        inputs.push(this.getWalletInput(randomUtxo, privateKey));\n        sourceOutputs.push(this.getWalletSourceOutput(randomUtxo, privateKey));\n        return { inputs, outputs, sourceOutputs };\n    }\n    static getChangeOutput(value, privateKey, addressIndex = 0) {\n        const lockingBytecode = privateKey ? {\n            compiler: this.compiler,\n            data: {\n                hdKeys: {\n                    addressIndex: addressIndex,\n                    hdPublicKeys: {\n                        'wallet': deriveHdPublicKey(privateKey).hdPublicKey\n                    },\n                },\n            },\n            script: 'wallet_lock'\n        } : Uint8Array.from(Array(33));\n        return {\n            lockingBytecode: lockingBytecode,\n            valueSatoshis: value\n        };\n    }\n    /**\n     * Lock a new BadgerStake.\n     *\n     * @param main - \"MasterBadger utxo.\n     *\n     * @throws {Error} if transaction generation fails.\n     * @returns a transaction template.\n     */\n    static lock(authUtxo, value, stake, utxos, key, addressIndex = 0, fee = 1) {\n        const inputs = [];\n        const outputs = [];\n        const lockingBytecode = key ? hdPrivateKeyToP2pkhLockingBytecode({\n            addressIndex: addressIndex,\n            hdPrivateKey: key,\n            throwErrors: true\n        }) : Uint8Array.from(Array(33));\n        let config = {\n            locktime: 0,\n            version: 2,\n            inputs,\n            outputs\n        };\n        let settings = BadgerStake.parseNFT(authUtxo);\n        let stakeRequest = {\n            user_pkh: lockingBytecodeToAddressContents(lockingBytecode).payload,\n            amount: value,\n            stake: stake\n        };\n        config.inputs.push(this.getAuthInput(authUtxo, stakeRequest));\n        config.outputs.push(this.getAuthOutput(authUtxo, value, stake, settings.fee));\n        const sourceOutputs = [this.getSourceOutput(authUtxo)];\n        config.outputs.push(this.getLockOutput(authUtxo, stakeRequest));\n        const fundingConfig = this.getWalletInputs(utxos, BigInt(value), key);\n        config.inputs.push(...fundingConfig.inputs);\n        sourceOutputs.push(...fundingConfig.sourceOutputs);\n        let satsOut = sumOutputValue(config.outputs);\n        let satsIn = sumSourceOutputValue(sourceOutputs);\n        config.outputs.push(this.getChangeOutput(satsIn - satsOut, key));\n        let result = generateTransaction(config);\n        if (!result.success)\n            throw new Error('generate transaction failed!, errors: ' + JSON.stringify(result.errors, null, '  '));\n        const estimatedFee = getTransactionFees(result.transaction, fee);\n        const lastIdx = config.outputs.length - 1;\n        config.outputs[lastIdx].valueSatoshis = config.outputs[lastIdx].valueSatoshis - estimatedFee;\n        result = generateTransaction(config);\n        if (!result.success)\n            throw new Error('generate transaction failed!, errors: ' + JSON.stringify(result.errors, null, '  '));\n        const transaction = result.transaction;\n        const tokenValidationResult = verifyTransactionTokens(transaction, sourceOutputs, { maximumTokenCommitmentLength: 40 });\n        if (tokenValidationResult !== true && fee > 0)\n            throw tokenValidationResult;\n        let verify = this.vm.verify({\n            sourceOutputs: sourceOutputs,\n            transaction: transaction,\n        });\n        if (typeof verify == \"string\")\n            throw Error(verify);\n        let assetCat = authUtxo.token_data?.category;\n        let feeEstimate = sumSourceOutputValue(sourceOutputs) - sumSourceOutputValue(transaction.outputs);\n        if (feeEstimate > 10000)\n            throw Error(`Excessive fees ${feeEstimate}`);\n        if (sumSourceOutputTokenAmounts(sourceOutputs, assetCat) == 0n)\n            verify = `Error checking token input`;\n        let tokenDiff = sumSourceOutputTokenAmounts(sourceOutputs, assetCat) -\n            sumSourceOutputTokenAmounts(transaction.outputs, assetCat);\n        if (tokenDiff !== 0n)\n            throw Error(`Claiming should not create destroy tokens, token difference: ${tokenDiff}`);\n        return {\n            sourceOutputs: sourceOutputs,\n            transaction: transaction,\n            verify: verify\n        };\n    }\n    /**\n     * Unlock completed stake.\n     *\n     * @param utxo - unspent contract record to payout.\n     *\n     * @throws {Error} if transaction generation fails.\n     * @returns a transaction template.\n     */\n    static unlock(utxo) {\n        const inputs = [];\n        const outputs = [];\n        let config = {\n            locktime: 0,\n            version: 2,\n            inputs,\n            outputs\n        };\n        config.inputs.push(this.getUnlockInput(utxo));\n        config.outputs.push(...this.getUnlockOutputs(utxo));\n        let result = generateTransaction(config);\n        if (!result.success)\n            throw new Error('generate transaction failed!, errors: ' + JSON.stringify(result.errors, null, '  '));\n        const sourceOutputs = [this.getSourceOutput(utxo)];\n        const transaction = result.transaction;\n        const tokenValidationResult = verifyTransactionTokens(transaction, sourceOutputs, { maximumTokenCommitmentLength: 40 });\n        if (tokenValidationResult !== true)\n            throw tokenValidationResult;\n        let verify = this.vm.verify({\n            sourceOutputs: sourceOutputs,\n            transaction: transaction,\n        });\n        if (typeof verify == \"string\")\n            throw verify;\n        return {\n            sourceOutputs: sourceOutputs,\n            transaction: transaction,\n            verify: verify\n        };\n    }\n}\n//# sourceMappingURL=index.js.map","<script lang=\"ts\">\n\timport { blo } from 'blo';\n\timport { binToHex } from \"@bitauth/libauth\";\n\timport bch from '$lib/images/BCH.svg';\n\timport tbch from '$lib/images/tBCH.svg';\n\n\timport {BADGER} from \"@unspent/badgers\";\n\n\timport TokenAmount from './TokenAmount.svelte';\n\timport TokenIcon from './TokenIcon.svelte';\n\n\tlet {\n\t\ttx_pos,\n\t\ttx_hash,\n\t\theight,\n\t\tvalue,\n\t\ttoken_data,\n\t\tunlock = $bindable(),\n\t\tamount,\n\t\tstake,\n\t\tuser_pkh,\n\t\tisMainnet,\n\t\tnow\n\t} = $props();\n\n\tlet hasMatured = $derived( height > 0 && (height + stake) <= now);\n\tlet icon = $derived( isMainnet ? bch: tbch)\n\n</script>\n\n\n<div class=\"container\">\n\t<div class=\"stake\">\n\t\t<div class=\"balance\">\n\t\t\t<div class=\"fill\">\n\t\t\t\t{#if token_data}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<TokenAmount amount={token_data.amount} category={token_data.category} />\n\n\t\t\t\t\t\t<TokenIcon size={20} category={token_data.category}></TokenIcon>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t{Number(value / 100000000).toLocaleString(undefined, {})} <b>BCH</b>\n\t\t\t\t\t<img width=\"20px\" src={icon} />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"auth\">\n\t\t\t\t\t{#if hasMatured}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\tunlock({\n\t\t\t\t\t\t\t\t\ttx_hash: tx_hash,\n\t\t\t\t\t\t\t\t\ttx_pos: tx_pos,\n\t\t\t\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t\t\t\ttoken_data: token_data\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tunlock\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if user_pkh}\n\t\t\t\t\t\t<img height=\"32px\" src={blo(binToHex(user_pkh), 16)} alt={binToHex(user_pkh)} />\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"header\">\n\t\t\t<div class=\"timestamp\">{stake}</div>\n\t\t\t<div class=\"fill\"></div>\n\t\t\t<div class=\"timestamp\">{height}</div>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.container {\n\t\tdisplay: flex;\n\t\tpadding: 5px;\n\t}\n\t.stake {\n\t\tborder-radius: 10px;\n\t\tpadding: 5px 5px 5px 15px;\n\t\tbackground-color: #eeeeee;\n\t\tmargin: auto;\n\t\twidth: 100%;\n\t\tborder: #bbb solid;\n\t\tborder-width: 1px;\n\t}\n\n\t.header {\n\t\tdisplay: flex;\n\t}\n\n\t.hash {\n\t\tfont-size: xx-small;\n\t\tfont-weight: 200;\n\t\talign-content: flex-start;\n\t\tcolor: #857070;\n\t\tmax-width: 70%;\n\t\tword-break: break-all;\n\t}\n\t.fill {\n\t\tflex: 1;\n\t\tword-break: break-all;\n\t\tfont-size: small;\n\t}\n\t.fill div {\n\t}\n\t.fill div p {\n\t\ttext-align: right;\n\t}\n\t.timestamp {\n\t\tfont-size: xx-small;\n\t\tfont-weight: 200;\n\t\tcolor: #777;\n\t\tword-break: break-all;\n\t\tmax-width: 80px;\n\t}\n\t.auth {\n\t\talign-content: center;\n\t\tpadding: 5px 5px 5px 5px;\n\t}\n\t.auth img {\n\t\tborder-radius: 25%;\n\t}\n\n\t.stake :global {\n\t\tp {\n\t\t\tfont-weight: 400;\n\t\t\tline-height: 1;\n\t\t}\n\t}\n\n\tbutton {\n\t\tbackground-color: #a45eb6; /* Green */\n\t\tborder: none;\n\t\tcolor: white;\n\t\tpadding: 5px;\n\t\tborder-radius: 20px;\n\t\ttext-align: center;\n\t\ttext-decoration: none;\n\t\tdisplay: inline-block;\n\t}\n\n\tbutton:hover {\n\t\tbackground-color: #9933b3;\n\t}\n\n\t.stake.op {\n\t\tbackground-color: #fff;\n\t}\n\n\t.error {\n\t\tcolor: brown;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport { page } from '$app/state';\n\n\timport {\n\t\tbinToHex,\n\t\tcashAddressToLockingBytecode,\n\t\tencodeTransactionBch,\n\t\tvalueSatoshisToBin\n\t} from '@bitauth/libauth';\n\n\t// @ts-ignore\n\timport Readme from './README.md';\n\n\timport RangeSlider from '$lib/RangeSlider.svelte';\n\timport TokenIcon from '$lib/TokenIcon.svelte';\n\timport BCH from '$lib/images/BCH.svg';\n\timport tBCH from '$lib/images/tBCH.svg';\n\timport tBADGER from '$lib/images/tBADGER.svg';\n\timport BADGER from '$lib/images/BADGER.svg';\n\n\timport { ElectrumClient, ConnectionStatus } from '@electrum-cash/network';\n\n\timport { IndexedDBProvider } from '@mainnet-cash/indexeddb-storage';\n\timport { BaseWallet, Wallet, TestNetWallet } from 'mainnet-js';\n\n\timport {\n\t\tgetDefaultElectrum,\n\t\tgetScriptHash,\n\t\tgetHdPrivateKey,\n\t\tsumUtxoValue,\n\t\ttype UtxoI\n\t} from '@unspent/tau';\n\n\timport BadgerStake, { BADGER as badgerCat, tBADGER as tBadgerCat } from '@unspent/badgers';\n\n\timport BitauthLink from '$lib/BitauthLink.svelte';\n\timport CONNECTED from '$lib/images/connected.svg';\n\timport DISCONNECTED from '$lib/images/disconnected.svg';\n\timport BadgerStakeButton from '$lib/BadgerStakeUtxo.svelte';\n\n\tlet now = $state(0);\n\tlet connectionStatus = $state('');\n\tlet contractState = $state('');\n\n\tlet transaction_hex = $state('');\n\tlet transaction: any = undefined;\n\tlet transactionValid = $state(false);\n\tlet sourceOutputs: any = undefined;\n\n\tlet unspent: any[] = $state([]);\n\tlet walletUnspent: any[] = $state([]);\n\tlet authUtxo: any = $state('');\n\tlet key = $state('');\n\tlet electrumClient: any = $state();\n\tlet scripthash = $state('');\n\tlet vaultAddr = $state('');\n\tlet walletScriptHash = $state('');\n\n\tlet balance = $state(0);\n\tlet stakeValue: number | undefined = $state();\n\tlet stakeBlock = $state(1);\n\n\tconst isMainnet = page.url.hostname == 'vox.cash';\n\tconst icon = isMainnet ? BADGER : tBADGER;\n\tconst category = isMainnet ? binToHex(badgerCat) : binToHex(tBadgerCat);\n\tconst baseTicker = isMainnet ? 'BCH' : 'tBCH';\n\tconst ticker = isMainnet ? 'BADGER' : 'tBADGER';\n\tconst prefix = isMainnet ? 'bitcoincash' : 'bchtest';\n\tconst server = getDefaultElectrum(isMainnet);\n\tconst bchIcon = isMainnet ? BCH : tBCH;\n\n\tscripthash = BadgerStake.getScriptHash(category);\n\tvaultAddr = BadgerStake.getAddress(category, prefix);\n\n\tlet spent = new Set();\n\tlet timer: any = 0;\n\tlet amount = 0;\n\tlet wallet: any;\n\tlet transactionError: string | boolean = '';\n\tlet req = {};\n\n\tconst handleNotifications = async function (data: any) {\n\t\tconnectionStatus = ConnectionStatus[electrumClient.status];\n\t\tif (data.method === 'blockchain.headers.subscribe') {\n\t\t\tlet d = data.params[0];\n\t\t\tnow = d.height;\n\n\t\t\tupdateUnspent();\n\t\t} else if (data.method === 'blockchain.scripthash.subscribe') {\n\t\t\tif (data.params[1] !== contractState) {\n\t\t\t\tcontractState = data.params[1];\n\t\t\t\tupdateUnspent();\n\t\t\t\tupdateWallet();\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(data);\n\t\t}\n\t};\n\n\tconst updateWallet = async function () {\n\t\tlet response = await electrumClient.request(\n\t\t\t'blockchain.scripthash.listunspent',\n\t\t\twalletScriptHash,\n\t\t\t'include_tokens'\n\t\t);\n\t\tif (response instanceof Error) throw response;\n\t\twalletUnspent = response;\n\t\tbalance = sumUtxoValue(walletUnspent, true);\n\t};\n\n\tconst broadcast = async function (raw_tx: string) {\n\t\tlet response = await electrumClient.request('blockchain.transaction.broadcast', raw_tx);\n\t\tif (response instanceof Error) {\n\t\t\tconnectionStatus = ConnectionStatus[electrumClient.status];\n\t\t\tthrow response;\n\t\t}\n\t\tresponse as any[];\n\t};\n\n\tconst updateUnspent = async function () {\n\t\tlet response = await electrumClient.request(\n\t\t\t'blockchain.scripthash.listunspent',\n\t\t\tscripthash,\n\t\t\t'include_tokens'\n\t\t);\n\t\tif (response instanceof Error) throw response;\n\n\t\tunspent = response\n\t\t\t.filter((u: any) => u.token_data.nft.capability == 'mutable')\n\t\t\t.map((u: any) => {\n\t\t\t\treturn {\n\t\t\t\t\t...u,\n\t\t\t\t\t...BadgerStake.parseNFT(u),\n\t\t\t\t\t...{ now: now }\n\t\t\t\t};\n\t\t\t});\n\t\tunspent.sort((a, b) => a.stake + a.height - (b.stake + b.height));\n\n\t\tauthUtxo = response\n\t\t\t.filter((u: any) => u.token_data.nft.capability == 'minting')\n\t\t\t.map((u: any) => {\n\t\t\t\treturn {\n\t\t\t\t\t...u,\n\t\t\t\t\t...BadgerStake.parseNFT(u),\n\t\t\t\t\t...{ now: now }\n\t\t\t\t};\n\t\t\t})[0];\n\t};\n\n\tconst unlock = async function (utxo: UtxoI) {\n\t\tlet unlockResponse = BadgerStake.unlock(utxo);\n\t\tlet raw_tx = binToHex(encodeTransactionBch(unlockResponse.transaction));\n\t\tconsole.log(raw_tx);\n\t\tawait broadcast(raw_tx);\n\t};\n\n\tconst lock = async function () {\n\t\tif (stakeBlock < 32767) {\n\t\t\tif (stakeValue && stakeValue > 0.0005) {\n\t\t\t\tlet lockResponse = BadgerStake.lock(\n\t\t\t\t\tauthUtxo,\n\t\t\t\t\tMath.floor(stakeValue * 100_000_000),\n\t\t\t\t\tstakeBlock,\n\t\t\t\t\twalletUnspent,\n\t\t\t\t\tkey\n\t\t\t\t);\n\t\t\t\tlet raw_tx = binToHex(encodeTransactionBch(lockResponse.transaction));\n\t\t\t\tconsole.log(raw_tx);\n\t\t\t\tawait broadcast(raw_tx);\n\t\t\t}\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\tBaseWallet.StorageProvider = IndexedDBProvider;\n\t\twallet = isMainnet ? await Wallet.named(`vox`) : await TestNetWallet.named(`vox`);\n\n\t\tkey = getHdPrivateKey(wallet.mnemonic!, wallet.derivationPath.slice(0, -2), wallet.isTestnet);\n\t\tlet lockingCodeResult = cashAddressToLockingBytecode(wallet.getDepositAddress());\n\t\tif (typeof lockingCodeResult == 'string') throw lockingCodeResult;\n\t\twalletScriptHash = getScriptHash(lockingCodeResult.bytecode);\n\n\t\t// Initialize an electrum client.\n\t\telectrumClient = new ElectrumClient(BadgerStake.USER_AGENT, '1.4.1', server);\n\n\t\t// Wait for the client to connect.\n\t\tawait electrumClient.connect();\n\t\t// Set up a callback function to handle new blocks.\n\n\t\t// Listen for notifications.\n\t\telectrumClient.on('notification', handleNotifications);\n\n\t\t// Set up a subscription for new block headers.\n\t\tawait electrumClient.subscribe('blockchain.scripthash.subscribe', scripthash);\n\t\tawait electrumClient.subscribe('blockchain.scripthash.subscribe', walletScriptHash);\n\t\tawait electrumClient.subscribe('blockchain.headers.subscribe');\n\t});\n\n\tonDestroy(async () => {\n\t\tconst electrumClient = new ElectrumClient(BadgerStake.USER_AGENT, '1.4.1', server);\n\t\tawait electrumClient.disconnect();\n\t});\n</script>\n\n\n\n<svelte:head>\n\t<title> Badgers</title>\n\t<meta name=\"description\" content=\"Stake coins for Badgers.\" />\n</svelte:head>\n\n<section>\n\t<div class=\"status\">\n\t\t{now.toLocaleString()}\n\t\t<BitauthLink template={BadgerStake.template} />\n\t\t{#if connectionStatus == 'CONNECTED'}\n\t\t\t<img src={CONNECTED} alt={connectionStatus} />\n\t\t{:else}\n\t\t\t<img src={DISCONNECTED} alt=\"Disconnected\" />\n\t\t{/if}\n\t</div>\n\n\t<h1>Stake Coins for Badgers</h1>\n\n\t<!-- <button onclick={() => { init(); }}> init </button> -->\n\t<div class=\"swap\">\n\t\t<div>\n\t\t\t<img width=\"50\" src={bchIcon} alt={baseTicker} />\n\t\t\t<br />\n\t\t\t{(balance / 100000000).toLocaleString()}\n\t\t\t{baseTicker}\n\t\t</div>\n\t</div>\n\n\n\t{#if balance > 0}\n\t\t<div class=\"stakeForm\">\n\t\t\t<div>\n\t\t\t\t{#if stakeValue > 0 && stakeValue < 0.00005}\n\t\t\t\t\t<span style=\"font-size:large; color: red;\">Min stake is 0.00005 BCH!</span>\n\t\t\t\t{:else if stakeValue > 0 && stakeBlock > 0}\n\t\t\t\t\t<h3>\n\t\t\t\t\t\tEarn {Math.floor(stakeValue * stakeBlock).toLocaleString()}\n\t\t\t\t\t\t{ticker}\n\t\t\t\t\t\t<TokenIcon {category} size={16} {isMainnet}></TokenIcon>\n\t\t\t\t\t</h3>\n\t\t\t\t{:else}\n\t\t\t\t\t<h3>Adjust controls to stake {ticker}</h3>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<div class=\"purple-theme\">\n\t\t\t\t<label for=\"stakeValue\">BCH to Lock</label>\n\t\t\t\t<RangeSlider\n\t\t\t\t\tbind:value={stakeValue}\n\t\t\t\t\tid=\"stakeValue\"\n\t\t\t\t\tfloat={true}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tstep={0.01}\n\t\t\t\t\tmax={balance / 100000000}\n\t\t\t\t/>\n\t\t\t\t{stakeValue}\n\t\t\t\t{baseTicker}\n\t\t\t</div>\n\t\t\t<div class=\"purple-theme\">\n\t\t\t\t<label for=\"stakeBlock\"># Blocks</label>\n\t\t\t\t<RangeSlider bind:value={stakeBlock} id=\"stakeBlock\" float={true} min={1} max={32767} />\n\t\t\t\t{#if stakeBlock > 32767}\n\t\t\t\t\t<span style=\"font-size:large; color: red;\">Max duration is 32,767 blocks!</span>\n\t\t\t\t{:else if stakeBlock < 1}\n\t\t\t\t\t<span style=\"font-size:large; color: red;\">Min duration is one block</span>\n\t\t\t\t{:else if stakeBlock > 0}\n\t\t\t\t\t= {Number(stakeBlock / 144).toLocaleString(undefined, {\n\t\t\t\t\t\tminimumFractionDigits: 0,\n\t\t\t\t\t\tmaximumFractionDigits: 3\n\t\t\t\t\t})} days\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<div class=\"stake\">\n\t\t\t\t{#if stakeValue * stakeBlock >= 1}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\tlock();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tstake\n\t\t\t\t\t</button>\n\t\t\t\t{:else}\n\t\t\t\t\t<button disabled> stake </button>\n\t\t\t\t\t<br />\n\t\t\t\t\t<span style=\"font-size:large; color: red;\"></span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<div class=\"stakeForm\">\n\t\t\t<p><a href=\"/wallet\" >Deposit funds</a> to stake coins.</p>\n\t\t</div>\n\t{/if}\n\t{#if unspent.length}\n\t\t<h3>Current Stakes</h3>\n\t\t<div class=\"grid\">\n\t\t\t{#if unspent.length > 0}\n\t\t\t\t{#each unspent as item, index}\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<BadgerStakeButton {unlock} {isMainnet} {...item} />\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t{:else}\n\t\t\t\t<p>No staked coins?</p>\n\t\t\t\t{vaultAddr}\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n\n\t<Readme />\n</section>\n\n<style>\n\tsection {\n\t\tpadding: 5px;\n\t}\n\t.swap {\n\t\tdisplay: flex;\n\t}\n\t.status {\n\t\ttext-align: end;\n\t\tcolor: #ffffff;\n\t\tfont-weight: 600;\n\t}\n\n\t.stakeForm {\n\t\ttext-align: end;\n\t}\n\t.stakeForm div {\n\t\tmargin: 2em;\n\t}\n\t.swap {\n\t\tdisplay: flex;\n\t\tmargin: auto;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t.swap div {\n\t\tpadding: 10px;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t}\n\n\t\n\t.grid {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex-wrap: wrap;\n\t\talign-items: flex-end;\n\t}\n\n\n\t.grid .row {\n\t\tflex: 1 1 160px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\ttext-align: right;\n\t\tgrid-gap: 0.1rem;\n\t\tmargin: 0 0 3px 0;\n\t}\n\n\tbutton {\n\t\tbackground-color: #a45eb6; /* Green */\n\t\tborder: none;\n\t\tcolor: white;\n\t\tpadding: 10px;\n\t\tborder-radius: 20px;\n\t\ttext-align: center;\n\t\ttext-decoration: none;\n\t\tdisplay: inline-block;\n\t\tfont-size: 16px;\n\t}\n\n\tbutton:disabled {\n\t\tbackground-color: rgb(202, 191, 204);\n\t\tcolor: white;\n\t}\n\tbutton:hover {\n\t\tbackground-color: #9933b3;\n\t}\n\n\t\n\n\tlabel {\n\t\tmargin: 8px;\n\t\tfont-size: 16px;\n\t\tfont-weight: 600;\n\t}\n</style>\n"],"names":["html","node","get_value","svg","mathml","skip_warning","anchor","value","template_effect","effect","active_effect","hydrating","hydrate_next","remove_effect_dom","hydrate_node","next","last","get_next_sibling","w.hydration_mismatch","HYDRATION_ERROR","assign_nodes","set_hydrate_node","create_fragment_from_html","get_first_child","now","raf","_","run_tasks","task","loop","callback","fulfill","preventDefault","fn","args","event","prerender","is_date","obj","tick_spring","ctx","last_value","current_value","target_value","delta","velocity","spring","damper","acceleration","d","next_value","k","opts","store","writable","stiffness","damping","precision","last_time","current_token","inv_mass","inv_mass_recovery_rate","cancel_task","set","new_value","token","elapsed","fulfil","isFiniteNumber","coerceFloat","clampValue","min","max","valueAsPercent","percent","percentAsValue","constrainAndAlignValue","step","limits","remainder","aligned","pureText","possibleHtml","normalisedClient","clientX","clientY","elementIndex","el","i","isInRange","range","type","isOutOfLimit","isSelected","values","v","getValueFromIndex","index","pipStep","calculatePointerValues","slider","clientPos","vertical","reversed","dims","pointerPos","pointerPercent","pointerVal","$.prop","$$props","hoverable","disabled","pipstep","all","first","rest","prefix","suffix","formatter","p","focus","orientationStart","moveHandle","clientStart","pipCount","limitPipCount","finalPipStep","labelDown","labelUp","pipValue","clientEnd","$.set","stepMax","tooManySteps","$.get","$$render","consequent","consequent_1","consequent_2","$.event","span","e","consequent_3","$.index","$$anchor","val","$.derived_safe_equal","consequent_4","$.html","node_10","consequent_5","consequent_6","$1","span_4","consequent_7","consequent_8","consequent_9","consequent_10","consequent_11","span_8","consequent_12","pushy","draggy","float","rangeFloat","rangeGapMin","rangeGapMax","pips","handleFormatter","rangeFormatter","ariaLabels","id","classes","style","darkmode","springValues","dispatch","createEventDispatcher","isMounted","valueLength","handleActivated","handlePressed","rangeActivated","rangePressed","rangeDistancesFromPointer","keyboardActive","activeHandle","startValues","previousValues","sliderSize","springPositions","$.mutable_source","updateValues","checkValuesIsArray","updateValue","checkValueIsNumber","checkMinMax","checkStep","checkAriaLabels","checkValuesAgainstRangeGaps","gapMax","gapMin","checkFormatters","createSpring","$.store_unsub","springStore","$$stores","updateSpring","updateSpringValues","updateSliderSize","resizeObserver","rafId","onMount","entries","targetIsHandle","handles","isHandle","isChild","trimRange","getClosestHandle","clickedVal","closest","a","b","handleInteract","handleVal","getRangeDistancesOnInteractionStart","rangeInteract","fireEvent","fireChangeEvent","prev","eChange","rangeStartPercent","rangeEndPercent","sliderBlurHandle","sliderFocusHandle","target","sliderKeydown","prevent","handle","jump","onePercent","tenPercent","setStartAndPreviousValues","sliderInteractStart","eStart","sliderInteractEnd","eStop","bodyInteractStart","bodyInteract","bodyMouseUp","bodyTouchEnd","bodyKeyDown","startValue","previousValue","ariaLabelFormatter","formattedValue","textLabel","uValues","uValue","trimmedAlignedValues","item","hasRange","orientationEnd","$.each","$$array","zindex","mountOpacity","$.set_style","$springPositions","$.set_attribute","$0","rangeStart","rangeEnd","rangeSize","rangeMin","rangeMax","second","computed_const","alternate","span_5","$.bind_this","div","$$value","classes_1","BADGER","hexToBin","tBADGER","BadgerStake","packageInfo","template","getLibauthCompiler","createVirtualMachineBch","category","lockingBytecodeResult","getScriptHash","getAddress","utxo","binToNumberInt16LE","stake","numberToBinInt16LE","amount","bigIntToVmNumber","req","authCat","fee","key","addressIndex","hdPrivateKeyToP2pkhLockingBytecode","privateKey","unlockingData","authUtxo","lockingBytecode","encodeLockingBytecodeP2pkh","NonFungibleTokenCapability","utxos","sourceOutputs","inputs","outputs","u","randomIdx","randomUtxo","deriveHdPublicKey","config","settings","stakeRequest","lockingBytecodeToAddressContents","fundingConfig","satsOut","sumOutputValue","satsIn","sumSourceOutputValue","result","generateTransaction","estimatedFee","getTransactionFees","lastIdx","transaction","tokenValidationResult","verifyTransactionTokens","verify","assetCat","feeEstimate","sumSourceOutputTokenAmounts","tokenDiff","on_click","hasMatured","icon","$.derived","bch","tbch","blo","binToHex","lock","connectionStatus","contractState","unspent","$.state","$.proxy","walletUnspent","electrumClient","scripthash","vaultAddr","walletScriptHash","balance","stakeValue","stakeBlock","isMainnet","page","badgerCat","tBadgerCat","baseTicker","ticker","server","getDefaultElectrum","bchIcon","BCH","tBCH","wallet","handleNotifications","data","ConnectionStatus","updateUnspent","updateWallet","response","sumUtxoValue","broadcast","raw_tx","unlock","unlockResponse","encodeTransactionBch","lockResponse","BaseWallet","IndexedDBProvider","Wallet","TestNetWallet","getHdPrivateKey","lockingCodeResult","cashAddressToLockingBytecode","ElectrumClient","onDestroy","CONNECTED","DISCONNECTED","alternate_2","alternate_1","expression","alternate_4","alternate_3","alternate_5","alternate_6","node_11","alternate_7"],"mappings":"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","x_google_ignoreList":[0,1,2,3,5,6]}