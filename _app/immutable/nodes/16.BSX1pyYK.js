import{f as l,a as s,t as zt,d as ot}from"../chunks/DYbKDSXk.js";import{o as Vt,a as Ft}from"../chunks/CPLxGhQo.js";import{p as ht,f as g,c as r,r as o,s as i,a as bt,t as h,au as St,aG as W,ac as Gt,ad as H,E as t}from"../chunks/DlUVEpaU.js";import{s as m,d as Yt}from"../chunks/DIwOIcma.js";import{a as Jt}from"../chunks/Fv4VhMRE.js";import{i as b}from"../chunks/C6jlbT71.js";import{e as gt,i as Kt}from"../chunks/CMKxWac-.js";import{s as st,b as D}from"../chunks/vpaS6ag4.js";import{s as yt}from"../chunks/BPbJ7-kK.js";import{s as qt}from"../chunks/jyPZu9FF.js";import{p as Qt}from"../chunks/B8I0sxkP.js";import{h as Xt}from"../chunks/DM0FqWsN.js";import{H as Zt,p as $t,I as te}from"../chunks/0o8OGYDl.js";import{$ as ee}from"../chunks/CRbVXWIV.js";import{I as ae,B as re,W as oe,T as se,a as ie}from"../chunks/1C4dGgcF.js";import{b as ne}from"../chunks/C4jED5RM.js";import{a as ve}from"../chunks/moW41TmD.js";import{T as le,a as ce}from"../chunks/BIB44Wys.js";var de=l(' <img height="16px"/>',1),_e=l('immutable <img height="16px"/>',1),pe=l("Vox: <i> </i>",1),me=l('<div class="capability svelte-1i3diei"><!></div> <div class="commitment svelte-1i3diei"><!></div>',1);function ue(j,a){ht(a,!0);var N=me(),B=g(N),F=r(B);{var c=_=>{var p=de(),q=g(p),M=i(q);h(()=>{m(q,`${a.capability??""} `),st(M,"src",`./${a.capability}.svg`)}),s(_,p)},E=_=>{var p=_e(),q=i(g(p));st(q,"src","./immutable.svg"),s(_,p)};b(F,_=>{a.capability?_(c):_(E,!1)})}o(B);var S=i(B,2),U=r(S);{var C=_=>{var p=pe(),q=i(g(p)),M=r(q,!0);o(q),h(Z=>m(M,Z),[()=>ve(a.commitment)]),s(_,p)},O=_=>{var p=zt();h(()=>m(p,a.commitment)),s(_,p)};b(U,_=>{a.commitment.startsWith("6a03553356")?_(C):_(O,!1)})}o(S),s(j,N),bt()}const fe=!0,la=Object.freeze(Object.defineProperty({__proto__:null,prerender:fe},Symbol.toStringTag,{value:"Module"})),ge=""+new URL("../assets/cashTokens.DElA22mH.svg",import.meta.url).href;var he=l('<div class="svelte-1jvnb4q"><!><br/></div> <div class="svelte-1jvnb4q"><!></div> <div class="svelte-1jvnb4q"><!></div>',1),be=l('<div class="container svelte-1jvnb4q"><div class="post svelte-1jvnb4q"><div class="balance svelte-1jvnb4q"><div class="fill svelte-1jvnb4q"><!></div> <div> <img width="20px"/></div></div> <div class="header svelte-1jvnb4q"><div class="timestamp svelte-1jvnb4q"> </div> <div class="fill svelte-1jvnb4q"></div> <div class="timestamp svelte-1jvnb4q"> </div></div></div></div>');function xe(j,a){ht(a,!0);var N=be(),B=r(N),F=r(B),c=r(F),E=r(c);{var S=G=>{var $=he(),Y=g($),it=r(Y);le(it,{get amount(){return a.token_data.amount},get category(){return a.token_data.category}}),St(),o(Y);var J=i(Y,2),nt=r(J);{var lt=et=>{ue(et,qt(()=>a.token_data.nft))};b(nt,et=>{a.token_data.nft&&et(lt)})}o(J);var tt=i(J,2),ct=r(tt);ce(ct,{get category(){return a.token_data.category}}),o(tt),s(G,$)};b(E,G=>{a.token_data&&G(S)})}o(c);var U=i(c,2),C=r(U),O=i(C);o(U),o(F);var _=i(F,2),p=r(_),q=r(p);o(p);var M=i(p,4),Z=r(M,!0);o(M),o(_),o(B),o(N),h(G=>{m(C,`${G??""} sats `),st(O,"src",ne),m(q,`${a.tx_hash??""} : ${a.tx_pos??""}`),m(Z,a.height)},[()=>Number(a.value).toLocaleString(void 0,{})]),s(j,N),bt()}const ke=(j,a)=>{H(a,!t(a))};var we=(j,a)=>{H(a,!t(a))},ye=l('<button aria-label="toggle address" class="svelte-auppl5"><qr-code><img width="30px" slot="icon"/></qr-code></button> <p id="deposit" style="text-align: center;"> </p>',3),Se=(j,a)=>{H(a,!t(a))},qe=l('<button aria-label="toggle address" class="svelte-auppl5"><qr-code><img width="30px" slot="icon"/></qr-code></button> <p id="deposit" style="text-align: center;"> </p>',3),Te=l("<b> </b>"),De=l('<div class="svelte-auppl5"> </div>'),je=(j,a)=>a(),Ae=(j,a)=>a(),He=l('<h3>Unspent Outputs (coins)</h3> <!> <div class="walletHead svelte-auppl5"><button class="svelte-auppl5">Consolidate Tokens</button> <button class="svelte-auppl5">Consolidate Sats</button></div>',1),Ie=l("<p>no wallet utxos available</p>"),Le=l("<p>loading wallet...</p>"),Ne=l("<h3>DO NOT SHARE WITH ANYONE!</h3> <p> </p> ",1),Oe=(j,a)=>{H(a,!t(a))},We=l('<pre class="svelte-auppl5"> </pre>'),Be=l('<pre class="svelte-auppl5"> </pre>'),Ee=l('<pre class="svelte-auppl5"> </pre>'),Ue=l('<!> <pre class="svelte-auppl5"> </pre> <pre class="svelte-auppl5"> </pre> <pre class="svelte-auppl5"> </pre> <!> <pre class="svelte-auppl5">   &nbsp;</pre>',1),Ce=l("<p>no history</p>"),Me=l('<p style="color: red"> </p>'),Re=l("<p>...getting history</p>"),Pe=l("<h3>History</h3> <!>",1),ze=l('<div class="showSeed svelte-auppl5"><button class="svelte-auppl5">Show/hide backup</button> <!></div> <div class="history"><button class="svelte-auppl5">Show/hide History</button> <!></div>',1),Ve=l('<section><div class="status"><div class="scanable svelte-auppl5"><!> <!> <!></div> <!> <!></div></section>');function ca(j,a){ht(a,!0);const N=Qt.url.hostname=="vox.cash";let B=N?"bch.imaginary.cash":"chipnet.bch.ninja",F=W(0),c=W(void 0),E=W(0),S,U=W(""),C=W(!0),O=W(Gt([])),_=W(!1),p=W(""),q=W(!1);const M=function(e){if(e.method==="blockchain.headers.subscribe"){let n=e.params[0];H(F,n.height,!0)}else e.method==="blockchain.scripthash.subscribe"?$():console.log(e)};async function Z(){const e=t(c).getTokenDepositAddress();let n=(await t(c).getUtxos()).filter(k=>k.token).filter(k=>!k.token.capability);console.log(n);let I=[...new Set(n.map(k=>k.token.tokenId))].map(k=>{const u=n.filter(d=>d.token.tokenId==k&&d.token.amount>0n).map(d=>d.token.amount||0n).reduce((d,f)=>d+f,0n);return new ie({cashaddr:e,value:800,amount:u,tokenId:k})});return await t(c).send(I)}async function G(){return await t(c).sendMax(t(c).getDepositAddress())}const $=async function(){console.log("updating wallet...");let e=await S.request("blockchain.scripthash.listunspent",t(p),"include_tokens");if(e instanceof Error)throw e;H(O,e,!0),H(E,te(t(O),!0),!0)};Vt(async()=>{try{re.StorageProvider=ae,H(c,N?await oe.named("vox"):await se.named("vox"),!0),H(E,await t(c).getBalance("sat"),!0);let e=Zt(t(c).getDepositAddress());if(typeof e=="string")throw e;H(p,$t(e.bytecode,!0),!0),S=new ee("vox/wallet","1.4.1",B);try{await S.connect()}catch(n){H(U,n,!0)}S.on("notification",M),await S.subscribe("blockchain.scripthash.subscribe",t(p)),await S.subscribe("blockchain.headers.subscribe"),await $()}catch(e){throw e}}),Ft(async()=>{await t(c).provider.disconnect(),await S.disconnect()});var Y=Ve(),it=r(Y),J=r(it),nt=r(J);{var lt=e=>{var n=ot(),T=g(n);{var I=u=>{var d=ye(),f=g(d);f.__click=[we,C];var v=r(f);D(v,"id","qr1"),h(()=>D(v,"contents",t(c).getDepositAddress())),D(v,"module-color","#000"),D(v,"position-ring-color","#8dc351"),D(v,"position-center-color","#ff00ec"),D(v,"mask-x-to-y-ratio","1.2"),yt(v,`width: 150px;
                height: 150px;
                margin: 0.5em auto;
                background-color: #fff;`);var R=r(v);o(v),o(f);var x=i(f,2),w=r(x,!0);o(x),h(A=>{st(R,"src",Xt),m(w,A)},[()=>t(c).getDepositAddress()]),s(u,d)},k=u=>{var d=qe(),f=g(d);f.__click=[Se,C];var v=r(f);D(v,"id","qr1"),h(()=>D(v,"contents",t(c).getTokenDepositAddress())),D(v,"module-color","#000"),D(v,"position-ring-color","#8dc351"),D(v,"position-center-color","#ff00ec"),D(v,"mask-x-to-y-ratio","1.2"),yt(v,`width: 150px;
                height: 150px;
                margin: 0.5em auto;
                background-color: #fff;`);var R=r(v);o(v),o(f);var x=i(f,2),w=r(x,!0);o(x),h(A=>{st(R,"src",ge),m(w,A)},[()=>t(c).getTokenDepositAddress()]),s(u,d)};b(T,u=>{t(C)?u(k,!1):u(I)})}s(e,n)};b(nt,e=>{t(c)&&e(lt)})}var tt=i(nt,2);{var ct=e=>{var n=Te(),T=r(n,!0);o(n),h(()=>m(T,t(U))),s(e,n)};b(tt,e=>{t(U)&&e(ct)})}var et=i(tt,2);{var Tt=e=>{var n=De(),T=r(n);o(n),h(I=>m(T,`${I??""} sats`),[()=>t(E).toLocaleString()]),s(e,n)};b(et,e=>{t(E)>=0&&e(Tt)})}o(J);var xt=i(J,2);{var Dt=e=>{var n=ot(),T=g(n);{var I=u=>{var d=He(),f=i(g(d),2);gt(f,19,()=>t(O),w=>w.tx_hash+":"+w.tx_pos,(w,A)=>{xe(w,qt(()=>t(A)))});var v=i(f,2),R=r(v);R.__click=[je,Z];var x=i(R,2);x.__click=[Ae,G],o(v),s(u,d)},k=u=>{var d=Ie();s(u,d)};b(T,u=>{t(O).length>0?u(I):u(k,!1)})}s(e,n)},jt=e=>{var n=Le();s(e,n)};b(xt,e=>{t(O)?e(Dt):e(jt,!1)})}var At=i(xt,2);{var Ht=e=>{var n=ze(),T=g(n),I=r(T);I.__click=[ke,_];var k=i(I,2);{var u=x=>{var w=Ne(),A=i(g(w),2),K=r(A,!0);o(A);var P=i(A);h((z,at)=>{m(K,z),m(P,` Note: vox.cash ${at??""}`)},[()=>t(c).toDbString(),()=>new Date().toLocaleDateString()]),s(x,w)};b(k,x=>{t(_)&&x(u)})}o(T);var d=i(T,2),f=r(d);f.__click=[Oe,q];var v=i(f,2);{var R=x=>{var w=Pe(),A=i(g(w),2);Jt(A,()=>t(c).getHistory("sat",0,10,!0),K=>{var P=Re();s(K,P)},(K,P)=>{var z=ot(),at=g(z);{var It=Q=>{var vt=ot(),Nt=g(vt);gt(Nt,19,()=>t(P),dt=>dt.hash,(dt,V)=>{var kt=Ue(),wt=g(kt);{var Ot=L=>{var y=We(),X=r(y,!0);o(y),h(rt=>m(X,rt),[()=>new Date(t(V).timestamp*1e3).toISOString()]),s(L,y)},Wt=L=>{var y=Be(),X=r(y,!0);o(y),h(rt=>m(X,rt),[()=>new Date().toISOString()]),s(L,y)};b(wt,L=>{t(V).timestamp>0?L(Ot):L(Wt,!1)})}var _t=i(wt,2),Bt=r(_t);o(_t);var pt=i(_t,2),Et=r(pt);o(pt);var mt=i(pt,2),Ut=r(mt);o(mt);var Ct=i(mt,2);gt(Ct,17,()=>t(V).tokenAmountChanges,Kt,(L,y)=>{var X=ot(),rt=g(X);{var Mt=ut=>{var ft=Ee(),Rt=r(ft);o(ft),h(Pt=>m(Rt,`  assets:cash:tokens  ${Pt??""} ${t(y).tokenId??""} `),[()=>t(y).amount.toLocaleString()]),s(ut,ft)};b(rt,ut=>{t(y).amount!=0n&&ut(Mt)})}s(L,X)}),St(2),h((L,y)=>{m(Bt,`# ${t(V).blockHeight??""}â–  ${t(V).hash??""} `),m(Et,`  assets:cash    ${L??""} sat`),m(Ut,`  expenses:fees  ${y??""} sat # ${t(V).size??""} bytes`)},[()=>t(V).valueChange.toLocaleString().padStart(14),()=>t(V).fee.toLocaleString().padStart(14)]),s(dt,kt)}),s(Q,vt)},Lt=Q=>{var vt=Ce();s(Q,vt)};b(at,Q=>{t(P).length>0?Q(It):Q(Lt,!1)})}s(K,z)},(K,P)=>{var z=Me(),at=r(z,!0);o(z),h(()=>m(at,t(P).message)),s(K,z)}),s(x,w)};b(v,x=>{t(q)&&x(R)})}o(d),s(e,n)};b(At,e=>{t(c)&&e(Ht)})}o(it),o(Y),s(j,Y),bt()}Yt(["click"]);export{ca as component,la as universal};
//# sourceMappingURL=16.BSX1pyYK.js.map
