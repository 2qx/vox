import{f as _,a as o,c as Q,t as vt}from"../chunks/DIGK3fbx.js";import"../chunks/D2hU0Bvh.js";import{o as At}from"../chunks/gevkG0Tn.js";import{p as Ht,n as V,c as a,a as Nt,s as v,C as X,D as t,r as e,f as D,t as p,K as T,a0 as Wt}from"../chunks/D9HGzNEp.js";import{d as Bt,s as h}from"../chunks/DLwNFu-O.js";import{a as Ct}from"../chunks/Dk1kGLoU.js";import{i as k}from"../chunks/CKOgfgCC.js";import{e as nt,i as Ft}from"../chunks/Clu73D2-.js";import{a as B,s as E}from"../chunks/8RjDFi4k.js";import{s as Mt}from"../chunks/964CQeWy.js";import{i as Pt,p as Rt}from"../chunks/cB-EERJ9.js";import{r as Ut}from"../chunks/B3x9nJtb.js";import{h as jt}from"../chunks/DM0FqWsN.js";import{b as mt}from"../chunks/C4jED5RM.js";import{b as zt}from"../chunks/B8sppVjI.js";import"../chunks/CQVT_UhJ.js";import{I as Et,T as $t,W as Kt,B as Yt,a as Gt}from"../chunks/BgdkrN9n.js";const Jt=!0,We=Object.freeze(Object.defineProperty({__proto__:null,prerender:Jt},Symbol.toStringTag,{value:"Module"}));var ut=Ut(()=>Yt);const Qt=($,I)=>{X(I,!t(I))};var Vt=_('<qr-code><img width="30px" slot="icon"/></qr-code> <pre id="deposit" class="svelte-cu1t27"> </pre>',3),Xt=_('<div class="svelte-cu1t27"><br/> <b> </b></div>'),Zt=_("<h3>DO NOT SHARE WITH ANYONE!</h3> <p> </p> ",1),te=_('<img height="64px"/>'),ee=_('<img width="64px" alt="bchLogo"/>'),ae=_('<tr class="svelte-cu1t27"><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"><i><!></i></td><td class="r svelte-cu1t27"> </td></tr>'),re=($,I)=>I(),oe=($,I)=>I(),se=_('<h3>Unspent Outputs (coins)</h3> <table class="wallet svelte-cu1t27"><thead class="svelte-cu1t27"><tr class="header svelte-cu1t27"><td></td><td>Token</td><td>Fungible</td><td>NFT</td><td>Sats <img width="15" alt="bchLogo"/></td></tr></thead><tbody class="svelte-cu1t27"></tbody></table> <div class="walletHead svelte-cu1t27"><button class="svelte-cu1t27">Consolidate Tokens</button> <button class="svelte-cu1t27">Consolidate Sats</button></div>',1),ve=_("<p>no wallet utxos available</p>"),ne=_("<p>loading wallet...</p>"),ie=_('<pre class="svelte-cu1t27"> </pre>'),le=_('<pre class="svelte-cu1t27"> </pre>'),ce=_('<pre class="svelte-cu1t27"> </pre>'),de=_('<!> <pre class="svelte-cu1t27"> </pre> <pre class="svelte-cu1t27"> </pre> <pre class="svelte-cu1t27"> </pre> <!> <pre class="svelte-cu1t27">   &nbsp;</pre>',1),_e=_("<p>no history</p>"),pe=_("<h3>History</h3> <!>",1),me=_('<p style="color: red"> </p>'),ue=_("<p>...getting history</p>"),fe=_('<section><div class="status"><div class="scanable svelte-cu1t27"><!> <!> <div class="walletHead svelte-cu1t27"><button class="svelte-cu1t27">Show/hide backup</button></div> <!></div> <!> <!></div></section>');function Be($,I){Ht(I,!1);let m=V(),Z=V(),K=V(),it=V(!1);async function ft(){const r=t(m).getTokenDepositAddress();let i=(await t(m).getUtxos()).filter(s=>s.token).filter(s=>!s.token.capability);console.log(i);let u=[...new Set(i.map(s=>s.token.tokenId))].map(s=>{const c=i.filter(d=>d.token.tokenId==s&&d.token.amount>0n).map(d=>d.token.amount||0n).reduce((d,O)=>d+O,0n);return new Gt({cashaddr:r,value:800,amount:c,tokenId:s})});return await t(m).send(u)}async function gt(){return await t(m).sendMax(t(m).getDepositAddress())}At(async()=>{try{const r=Rt.url.hostname!=="vox.cash";ut(ut().StorageProvider=Et),X(m,r?await $t.named("vox"):await Kt.named("vox")),console.log(t(m).toDbString()),X(Z,await t(m).getBalance("sat")),X(K,await t(m).getUtxos())}catch(r){throw r}}),Pt();var tt=fe(),lt=a(tt),et=a(lt),ct=a(et);{var ht=r=>{var i=Vt(),n=D(i);B(n,"id","qr1"),p(()=>B(n,"contents",t(m).getDepositAddress())),B(n,"module-color","#000"),B(n,"position-ring-color","#8dc351"),B(n,"position-center-color","#ff00ec"),B(n,"mask-x-to-y-ratio","1.2"),Mt(n,`width: 150px;
                height: 150px;
                margin: 0.5em auto;
                background-color: #fff;`);var u=a(n);e(n);var s=v(n,2),c=a(s,!0);e(s),p(d=>{E(u,"src",jt),h(c,d)},[()=>t(m).getDepositAddress()],T),o(r,i)};k(ct,r=>{t(m)&&r(ht)})}var dt=v(ct,2);{var bt=r=>{var i=Xt(),n=v(a(i),2),u=a(n);e(n),e(i),p(s=>h(u,`${s??""} satoshis`),[()=>t(Z).toLocaleString()],T),o(r,i)};k(dt,r=>{t(Z)>=0&&r(bt)})}var at=v(dt,2),kt=a(at);kt.__click=[Qt,it],e(at);var xt=v(at,2);{var wt=r=>{var i=Zt(),n=v(D(i),2),u=a(n,!0);e(n);var s=v(n);p((c,d)=>{h(u,c),h(s,` Note: vox.cash ${d??""}`)},[()=>t(m).toDbString(),()=>new Date().toLocaleDateString()],T),o(r,i)};k(xt,r=>{t(it)&&r(wt)})}e(et);var _t=v(et,2);{var St=r=>{var i=Q(),n=D(i);{var u=c=>{var d=se(),O=v(D(d),2),C=a(O),S=a(C),q=v(a(S),4),rt=v(a(q));e(q),e(S),e(C);var H=v(C);nt(H,7,()=>t(K),N=>N.txid+":"+N.vout,(N,x)=>{var A=ae(),M=a(A),W=a(M),ot=a(W);{var P=l=>{var g=te();p(qt=>{E(g,"src",qt),E(g,"alt",t(x).token?.tokenId)},[()=>zt(t(x).token?.tokenId,16)],T),o(l,g)},st=l=>{var g=ee();p(()=>E(g,"src",mt)),o(l,g)};k(ot,l=>{t(x).token?l(P):l(st,!1)})}e(W),e(M);var R=v(M),b=a(R),f=a(b);{var L=l=>{var g=vt();p(()=>h(g,t(x).token?.tokenId)),o(l,g)};k(f,l=>{t(x).token&&l(L)})}e(b),e(R);var y=v(R),G=a(y),U=a(G);{var j=l=>{var g=vt();p(()=>h(g,t(x).token.amount)),o(l,g)};k(U,l=>{t(x).token&&l(j)})}e(G),e(y);var z=v(y),J=a(z),It=a(J);{var Lt=l=>{var g=vt();p(()=>h(g,t(x).token.commitment)),o(l,g)};k(It,l=>{t(x).token&&l(Lt)})}e(J),e(z);var pt=v(z),Ot=a(pt,!0);e(pt),e(A),p(l=>h(Ot,l),[()=>Number(t(x).satoshis).toLocaleString(void 0,{})],T),o(N,A)}),e(H),e(O);var w=v(O,2),F=a(w);F.__click=[re,ft];var Y=v(F,2);Y.__click=[oe,gt],e(w),p(()=>E(rt,"src",mt)),o(c,d)},s=c=>{var d=ve();o(c,d)};k(n,c=>{t(K).length>0?c(u):c(s,!1)})}o(r,i)},yt=r=>{var i=ne();o(r,i)};k(_t,r=>{t(K)?r(St):r(yt,!1)})}var Dt=v(_t,2);{var Tt=r=>{var i=Q(),n=D(i);Ct(n,()=>t(m).getHistory("sat",0,10,!0),u=>{var s=ue();o(u,s)},(u,s)=>{var c=pe(),d=v(D(c),2);{var O=S=>{var q=Q(),rt=D(q);nt(rt,3,()=>t(s),H=>H.hash,(H,w)=>{var F=de(),Y=D(F);{var N=b=>{var f=ie(),L=a(f,!0);e(f),p(y=>h(L,y),[()=>new Date(t(w).timestamp*1e3).toISOString()],T),o(b,f)},x=b=>{var f=le(),L=a(f,!0);e(f),p(y=>h(L,y),[()=>new Date().toISOString()],T),o(b,f)};k(Y,b=>{t(w).timestamp>0?b(N):b(x,!1)})}var A=v(Y,2),M=a(A);e(A);var W=v(A,2),ot=a(W);e(W);var P=v(W,2),st=a(P);e(P);var R=v(P,2);nt(R,1,()=>t(w).tokenAmountChanges,Ft,(b,f)=>{var L=Q(),y=D(L);{var G=U=>{var j=ce(),z=a(j);e(j),p(J=>h(z,`  assets:cash:tokens  ${J??""} ${t(f).tokenId??""} `),[()=>t(f).amount.toLocaleString()],T),o(U,j)};k(y,U=>{t(f).amount!=0n&&U(G)})}o(b,L)}),Wt(2),p((b,f)=>{h(M,`# ${t(w).blockHeight??""}â–  ${t(w).hash??""} `),h(ot,`  assets:cash    ${b??""} sat`),h(st,`  expenses:fees  ${f??""} sat # ${t(w).size??""} bytes`)},[()=>t(w).valueChange.toLocaleString().padStart(14),()=>t(w).fee.toLocaleString().padStart(14)],T),o(H,F)}),o(S,q)},C=S=>{var q=_e();o(S,q)};k(d,S=>{t(s).length>0?S(O):S(C,!1)})}o(u,c)},(u,s)=>{var c=me(),d=a(c,!0);e(c),p(()=>h(d,t(s).message)),o(u,c)}),o(r,i)};k(Dt,r=>{t(m)&&r(Tt)})}e(lt),e(tt),o($,tt),Nt()}Bt(["click"]);export{Be as component,We as universal};
//# sourceMappingURL=8.DA62y-hF.js.map
