{"version":3,"file":"16.BdhJPZH1.js","sources":["../../../../../../src/routes/trust/+page.ts","../../../../../../../trust/out/index.js","../../../../../../src/routes/trust/+page.svelte"],"sourcesContent":["export const prerender = true;","import templateV3 from './template.v3.json' with { type: \"json\" };\nimport packageInfo from '../package.json' with { type: \"json\" };\nimport { binToHex, hexToBin, generateTransaction, encodeTransaction, stringify, } from '@bitauth/libauth';\nimport { getLibauthCompiler } from '@unspent/tau';\nimport { getScriptHash, getAddress } from '@unspent/tau';\nconst PERIOD = 4383;\nconst RETURN_NUMERATOR = 989995;\nconst RETURN_DENOMINATOR = 1000000;\nexport default class Trust {\n    static USER_AGENT = packageInfo.name;\n    static template = templateV3;\n    static compiler = getLibauthCompiler(this.template);\n    static getLockingBytecode(data = {}) {\n        const lockingBytecodeResult = this.compiler.generateBytecode({\n            data: data,\n            scriptId: 'lock'\n        });\n        if (!lockingBytecodeResult.success) {\n            /* c8 ignore next */\n            throw new Error('Failed to generate bytecode, script: , ' + stringify(lockingBytecodeResult));\n        }\n        return lockingBytecodeResult.bytecode;\n    }\n    static getScriptHash(reversed = true) {\n        return getScriptHash(this.getLockingBytecode(), reversed);\n    }\n    static getAddress(prefix = \"bitcoincash\") {\n        return getAddress(this.getLockingBytecode(), prefix);\n    }\n    static getOutput(utxo) {\n        let outputValue = Math.round((utxo.value * RETURN_NUMERATOR) / RETURN_DENOMINATOR) - 1;\n        return {\n            lockingBytecode: {\n                compiler: this.compiler,\n                script: 'lock'\n            },\n            valueSatoshis: BigInt(outputValue),\n        };\n    }\n    static getInput(utxo) {\n        return {\n            outpointIndex: utxo.tx_pos,\n            outpointTransactionHash: hexToBin(utxo.tx_hash),\n            sequenceNumber: PERIOD,\n            unlockingBytecode: {\n                compiler: this.compiler,\n                script: 'unlock',\n                valueSatoshis: BigInt(utxo.value),\n            },\n        };\n    }\n    static processOutpoint(utxo) {\n        const inputs = [];\n        const outputs = [];\n        outputs.push(this.getOutput(utxo));\n        inputs.push(this.getInput(utxo));\n        const config = {\n            locktime: 0,\n            version: 2,\n            inputs, outputs,\n        };\n        const result = generateTransaction(config);\n        if (!result.success)\n            throw new Error('generate transaction failed!, errors: ' + stringify(result.errors));\n        return binToHex(encodeTransaction(result.transaction));\n    }\n}\n//# sourceMappingURL=index.js.map","<script lang=\"ts\">\n\timport Readme from './README.md';\n\n\timport BitauthLink from '$lib/BitauthLink.svelte';\n\timport CONNECTED from '$lib/images/connected.svg';\n\timport DISCONNECTED from '$lib/images/disconnected.svg';\n\n\timport Trust from '@unspent/trust';\n\n\tlet connectionStatus = $state('');\n</script>\n\n<section>\n\t<div class=\"status\">\n\t\t<BitauthLink template={Trust.template} />\n\t\t{#if connectionStatus == 'CONNECTED'}\n\t\t\t<img src={CONNECTED} alt={connectionStatus} />\n\t\t{:else}\n\t\t\t<img src={DISCONNECTED} alt=\"Disconnected\" />\n\t\t{/if}\n\t</div>\n\n\t<Readme />\n</section>\n\n<style>\n\t.status {\n\t\ttext-align: end;\n\t}\n</style>\n"],"names":["prerender","PERIOD","RETURN_NUMERATOR","RETURN_DENOMINATOR","Trust","packageInfo","templateV3","getLibauthCompiler","data","lockingBytecodeResult","stringify","reversed","getScriptHash","prefix","getAddress","utxo","outputValue","hexToBin","inputs","outputs","result","generateTransaction","binToHex","encodeTransaction","DISCONNECTED","$$render","alternate"],"mappings":"qcAAO,MAAMA,EAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4LCKnBC,EAAS,KACTC,EAAmB,OACnBC,EAAqB,IACZ,MAAMC,CAAM,CACvB,OAAO,WAAaC,EAAY,KAChC,OAAO,SAAWC,EAClB,OAAO,SAAWC,EAAmB,KAAK,QAAQ,EAClD,OAAO,mBAAmBC,EAAO,GAAI,CACjC,MAAMC,EAAwB,KAAK,SAAS,iBAAiB,CACzD,KAAMD,EACN,SAAU,MACtB,CAAS,EACD,GAAI,CAACC,EAAsB,QAEvB,MAAM,IAAI,MAAM,0CAA4CC,EAAUD,CAAqB,CAAC,EAEhG,OAAOA,EAAsB,QACrC,CACI,OAAO,cAAcE,EAAW,GAAM,CAClC,OAAOC,EAAc,KAAK,mBAAkB,EAAID,CAAQ,CAChE,CACI,OAAO,WAAWE,EAAS,cAAe,CACtC,OAAOC,EAAW,KAAK,mBAAkB,EAAID,CAAM,CAC3D,CACI,OAAO,UAAUE,EAAM,CACnB,IAAIC,EAAc,KAAK,MAAOD,EAAK,MAAQb,EAAoBC,CAAkB,EAAI,EACrF,MAAO,CACH,gBAAiB,CACb,SAAU,KAAK,SACf,OAAQ,MACX,EACD,cAAe,OAAOa,CAAW,CACpC,CACT,CACI,OAAO,SAASD,EAAM,CAClB,MAAO,CACH,cAAeA,EAAK,OACpB,wBAAyBE,EAASF,EAAK,OAAO,EAC9C,eAAgBd,EAChB,kBAAmB,CACf,SAAU,KAAK,SACf,OAAQ,SACR,cAAe,OAAOc,EAAK,KAAK,CACnC,CACJ,CACT,CACI,OAAO,gBAAgBA,EAAM,CACzB,MAAMG,EAAS,CAAE,EACXC,EAAU,CAAE,EAClBA,EAAQ,KAAK,KAAK,UAAUJ,CAAI,CAAC,EACjCG,EAAO,KAAK,KAAK,SAASH,CAAI,CAAC,EAM/B,MAAMK,EAASC,EALA,CACX,SAAU,EACV,QAAS,EACT,OAAAH,EAAQ,QAAAC,CACX,CACwC,EACzC,GAAI,CAACC,EAAO,QACR,MAAM,IAAI,MAAM,yCAA2CV,EAAUU,EAAO,MAAM,CAAC,EACvF,OAAOE,EAASC,EAAkBH,EAAO,WAAW,CAAC,CAC7D,CACA,0LCpDyB,OAAAhB,EAAM,8DAIlBoB,CAAY,CAAA,kBAHaC,EAAAC,EAAA,EAAA"}